!function (e) { var t = {}; function n(o) { if (t[o]) return t[o].exports; var r = t[o] = { i: o, l: !1, exports: {} }; return e[o].call(r.exports, r, r.exports, n), r.l = !0, r.exports } n.m = e, n.c = t, n.d = function (e, t, o) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: o }) }, n.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, n.t = function (e, t) { if (1 & t && (e = n(e)), 8 & t) return e; if (4 & t && "object" == typeof e && e && e.__esModule) return e; var o = Object.create(null); if (n.r(o), Object.defineProperty(o, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e) for (var r in e) n.d(o, r, function (t) { return e[t] }.bind(null, r)); return o }, n.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return n.d(t, "a", t), t }, n.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, n.p = "", n(n.s = 8) }([function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.LoggingCommon = t.CachedLogEntry = t.CachedLogEntryType = t.InitializeLogger = t.MMR_ASSERT = t.MMR_WARN = t.MMR_ERR = t.MMR_LOG = void 0; var o = n(2), r = null; t.MMR_LOG = function (e) { r.Log(e) }, t.MMR_ERR = function (e) { r.Error(e) }, t.MMR_WARN = function (e) { r.Warn(e) }, t.MMR_ASSERT = function (e) { r.Assert(e) }, t.InitializeLogger = function (e) { r = e }, function (e) { e[e.ERROR = 1] = "ERROR", e[e.WARNING = 2] = "WARNING", e[e.INFO = 3] = "INFO" }(t.CachedLogEntryType || (t.CachedLogEntryType = {})); var i = function (e, t) { this.type = e, this.logString = t }; t.CachedLogEntry = i; var s = function () { function e() { } return e.Assert = function (e) { return !!e }, e.GetAssertLog = function () { var t = (new Error).stack.split("at ")[4].toString().trim(), n = new Object; n.type = e.ASSERT_FAILURE_MESSAGE_TYPE, n.messageType = o.ProxyCommon.BG_HOST_ASSERT_FAILURE_MESSAGE_TYPE, n.fileName = t; var r = t.match(/:(?:\d+):(\d+)[^\d]*$/); return n.line = r ? r[1] : 0, console.log("MMR_ASSERT: " + t + " Line: " + n.line + " Line object: " + r), n }, e.LOGGING_PAGE_TO_CONTENT_EVENT = "MsRdcMmrLoggingPageToContent_Message", e.LOGGING_CONTENT_TO_PAGE_EVENT = "MsRdcMmrLoggingContentToPage_Message", e.LOGGING_CONTENT_BACKGROUND_PORT = "MsRdcMmrLoggingBackgroundComm", e.ASSERT_FAILURE_BACKGROUND_PORT = "MsRdcMmrAssertBackgroundComm", e.ASSERT_FAILURE_MESSAGE_TYPE = "reportAssertFailure", e.FLUSH_LOGS_MESSAGE_TYPE = "flushLogEntries", e }(); t.LoggingCommon = s }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.mmrWebRtcStatusToDOMError = t.tryJsonStringify = t.ShimCommon = t.PlaybackPathMode = t.getShimObject = t.shimProxyPropertyName = t.shimPropertyName = t.SourceBufferListProxy = t.TextTrackListProxy = t.createTimeRanges = void 0; var o = n(0); t.createTimeRanges = function (e) { var t = e; null == t.forEach && (t = new Array), t.forEach((function (e, t, n) { null == e.start && (n[t].start = 1 / 0), null == e.end && (n[t].end = 1 / 0) })); var n = Object.create(TimeRanges.prototype); return Object.defineProperty(n, "length", { get: function () { return t.length } }), n.start = function (e) { return t[e].start }, n.end = function (e) { return t[e].end }, n }; var r = function () { function e() { this.length = 0 } return e.prototype.getTrackById = function (e) { throw new Error("Method not implemented.") }, e.prototype.item = function (e) { throw new Error("Method not implemented.") }, e.prototype.addEventListener = function (e, t, n) { throw new Error("Method not implemented.") }, e.prototype.removeEventListener = function (e, t, n) { throw new Error("Method not implemented.") }, e.prototype[Symbol.iterator] = function () { throw new Error("Method not implemented.") }, e.prototype.dispatchEvent = function (e) { throw new Error("Method not implemented.") }, e }(); t.TextTrackListProxy = r; var i, s = function () { function e(t) { var n = this; this.sourceBuffers = new Array, this.eventListeners = new Map, this.length = 0, this.parentMediaSource = t, e.eventHandlers.forEach((function (e) { var t = "_on" + e + "eventHandler"; Object.defineProperty(n, "on" + e, { get: function () { return this[t] || null }, set: function (n) { this[t] && (this.removeEventListener(e, this[t], null), delete this[t]), n && (this[t] = n, this.addEventListener(e, this[t], null)) } }) })) } return e.prototype.addEventListener = function (e, t, n) { o.MMR_LOG("SourceBufferListProxy::addEventListener - type: " + e), this.eventListeners.has(e) || this.eventListeners.set(e, new Array), this.eventListeners.get(e).push(t), this.parentMediaSource.addEventListener(e, t, n) }, e.prototype.removeEventListener = function (e, t, n) { o.MMR_LOG("SourceBufferListProxy::removeEventListener - type: " + e); var r = this.eventListeners.get(e); if (null != r) { var i = r.indexOf(t); null != i && r.splice(i, 1) } this.parentMediaSource.removeEventListener(e, t, n) }, e.prototype[Symbol.iterator] = function () { return o.MMR_LOG("SourceBufferListProxy::iterator"), this.sourceBuffers.values() }, e.prototype.dispatchEvent = function (e) { o.MMR_LOG("SourceBufferListProxy::dispatchEvent - event type: " + e.type); var t = this.eventListeners.get(e.type), n = !1, r = this; return null != t && t.forEach((function (t, o, i) { null != t.handleEvent ? n = !t.handleEvent() : (Object.defineProperty(e, "target", { value: r }), Object.defineProperty(e, "currentTarget", { value: r }), n = !t.apply(r, [e])) })), !(n = n && e.cancelable) }, e.prototype.addSourceBuffer = function (e) { o.MMR_LOG("SourceBufferListProxy::addSourceBuffer"), this.sourceBuffers.push(e), this.updateSourceBuffers(), this.dispatchEvent(new CustomEvent("addsourcebuffer")) }, e.prototype.removeSourceBuffer = function (e) { o.MMR_LOG("SourceBufferListProxy::removeSourceBuffer"); var t = this.sourceBuffers.indexOf(e); t > -1 && (this.sourceBuffers.splice(t, 1), this.updateSourceBuffers(), this.dispatchEvent(new CustomEvent("removesourcebuffer"))) }, e.prototype.setSourceBuffers = function (e) { this.sourceBuffers = e, this.updateSourceBuffers(), o.MMR_LOG("SourceBufferListProxy::setSourceBuffers - this.length=" + this.length) }, e.prototype.updateSourceBuffers = function () { var e = this; this.sourceBuffers.forEach((function (t, n, o) { e[n] = t })), this.length = this.sourceBuffers.length }, e.eventHandlers = ["addsourcebuffer", "removesourcebuffer"], e }(); t.SourceBufferListProxy = s, t.shimPropertyName = "MSRDC_MMR_Shim", t.shimProxyPropertyName = t.shimPropertyName + "_Proxy", t.getShimObject = function (e) { if (null != e && null != e[t.shimPropertyName]) return e[t.shimPropertyName] }, function (e) { e[e.UNKNOWN = 0] = "UNKNOWN", e[e.LOCAL = 1] = "LOCAL", e[e.REMOTE = 2] = "REMOTE" }(i = t.PlaybackPathMode || (t.PlaybackPathMode = {})); var a = function () { function e() { } return e.initialPlaybackPathMode = i.UNKNOWN, e }(); t.ShimCommon = a, t.tryJsonStringify = function (e) { var t = "<failed JSON.stringify parse>"; try { t = JSON.stringify(e) } catch (t) { o.MMR_LOG("tryJsonStringify failed for obj=" + e) } return t }, t.mmrWebRtcStatusToDOMError = function (e) { var t = "The operation failed for an unknown reason", n = "UnknownError"; switch (e) { case -1: t = "The object cannot be found", n = "NotFoundError"; break; case -2: t = "The operation is not supported", n = "NotSupportedError"; break; case -3: t = "The object is in an invalid state", n = "InvalidStateError"; break; case -4: t = "The string did not match the expected pattern", n = "SyntaxError"; break; case -5: t = "The object cannot be modified in this way", n = "InvalidModificationError"; break; case -6: t = "The object does not support the operation or argument", n = "InvalidAccessError"; break; case -7: return TypeError("The type of the object does not match the expected type"); case -8: t = "A network error occurred", n = "NetworkError"; break; case -9: t = "The operation was aborted", n = "AbortError"; break; case -10: t = "The operation timed out", n = "TimeoutError"; break; case -11: t = "The input/output read operation failed", n = "NotReadableError"; break; case -13: t = "The constraint was not satisfied", n = "ConstraintError"; break; case -14: t = "Provided data is inadequate", n = "DataError"; break; case -15: t = "The operation failed for an operation-specific reason", n = "OperationError"; break; case -16: t = "Not allowed by the user agent", n = "NotAllowedError" }return new DOMException(t, n) } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.IconStatus = t.ProxyCommon = void 0; var o = function () { function e() { } return e.PROXY_RECEIVE_MESSAGE_EVENT = "MsRdcMmrProxy_MessageReceived", e.PROXY_SEND_MESSAGE_EVENT = "MsRdcMmrProxy_SendMessage", e.PROXY_SEND_MMR_ENGAGED = "MsRdcMmrProxy_MmrEngageMessage", e.PROXY_SEND_SAME_ORIGIN_PARENT_ID = "MsRdcMmrProxy_SameOriginParent", e.CONTENT_BG_PROXY_CONNECTION_NAME = "MsRdcMmrBackgroundComm", e.CONTENT_BG_CLIENT_CONNECTED_MESSAGE_TYPE = "MsRdcMmrBackgroundClientConnected", e.CONTENT_BG_MMR_ACTIVE_MESSAGE_TYPE = "MsRdcMmrActive", e.CONTENT_BG_SAME_ORIGIN_PARENT_MESSAGE_TYPE = "MsRdcMmrSameOriginParent", e.CONTENT_BG_RECONNECT_MESSAGE_TYPE = "MsRdcMmrReconnect", e.NATIVE_MESSAGING_APP_NAME = "com.microsoft.msrdcmmrnativehost", e.BG_PROXY_CONVERT_TAB_TITLE_TO_WINDOW = "__BG_ConvertTabTitleToWindowFlag__", e.POPUP_BG_PROXY_CONNECTION_NAME = "MsRdcMmrProxyBgComm", e.BG_HOST_START_TRACING_MESSAGE_TYPE = "startFullTracing", e.BG_HOST_STOP_TRACING_MESSAGE_TYPE = "stopFullTracing", e.BG_HOST_FLUSH_LOGS_MESSAGE_TYPE = "flushLogs", e.BG_HOST_ASSERT_FAILURE_MESSAGE_TYPE = "reportAssertFailure", e.HOST_BG_TRACING_STARTED_MESSAGE_TYPE = "onTracingStarted", e.HOST_BG_TRACING_STOPPED_MESSAGE_TYPE = "onTracingStopped", e.HOST_BG_LOGS_FLUSH_MESSAGE_TYPE = "onFlushLogs", e }(); t.ProxyCommon = o, function (e) { e[e.NotLoaded = 0] = "NotLoaded", e[e.LoadFailed = 1] = "LoadFailed", e[e.Loaded = 2] = "Loaded", e[e.VideoRedirecting = 3] = "VideoRedirecting", e[e.CallRedirecting = 4] = "CallRedirecting" }(t.IconStatus || (t.IconStatus = {})) }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.LocalizedStringHandler = void 0; var o = n(0), r = new Object; r.disconnectedMessage = "Please refresh page to resume video playback", r.redirectedMessage = "Video is being redirected...", r.redirectionFailedMessage = "Video redirection failed"; var i = new Object; Object.getOwnPropertyNames(r).forEach((function (e) { i[e] = r[e] })); var s = function () { function e() { } return e.dispatchLocalizedStrings = function () { o.MMR_LOG("LocalizedStringHandler::dispatchLocalizedStrings"); var e = new Object; Object.getOwnPropertyNames(r).forEach((function (t) { e[t] = chrome.i18n.getMessage(t) })), document.dispatchEvent(new CustomEvent("MsRdcMmrProxy_LocalizedStrings", { detail: e })) }, e.listenForLocalizedStrings = function () { o.MMR_LOG("LocalizedStringHandler::listenForLocalizedStrings"), document.addEventListener("MsRdcMmrProxy_LocalizedStrings", (function (e) { var t = e.detail; Object.getOwnPropertyNames(t).forEach((function (e) { i[e] = t[e] })) })) }, e.getLocalizedStrings = function () { return i }, e }(); t.LocalizedStringHandler = s }, , function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.MmrInjectionParameterHandler = void 0; var o = n(0), r = function () { function e() { } return e.setParams = function (e) { var t = document.createElement("mmr-enabled"); t.innerText = e.enableShimming.toString() + ";" + e.occlusionSupportVersion.toString() + ";" + e.enablePassthrough.toString() + ";" + e.webrtcSupportVersion.toString() + ";" + e.mmrSupportVersion.toString() + ";" + e.contentPortId.toString() + ";" + e.enableVideoStatusOverlay.toString() + ";" + e.enableVideoOutlines.toString(), (document.head || document.documentElement).prepend(t) }, e.readParams = function () { var e = { enableShimming: !1, occlusionSupportVersion: 0, enablePassthrough: !1, webrtcSupportVersion: 0, mmrSupportVersion: 0, contentPortId: -1, enableVideoStatusOverlay: !1, enableVideoOutlines: !1 }, t = document.getElementsByTagName("mmr-enabled"); if (0 == t.length) o.MMR_ERR("MMR readInjectionParameters: input parameter element missing."); else { var n = t[0].innerText; o.MMR_LOG("MMR readInjectionParameters: input parameters: " + n); var r = n.split(";"); "true" === r[0] ? e.enableShimming = !0 : "false" === r[0] ? e.enableShimming = !1 : o.MMR_ERR("MMR readInjectionParameters: unexpected input parameter text: " + n), e.occlusionSupportVersion = parseInt(r[1]), "true" === r[2] ? e.enablePassthrough = !0 : "false" === r[2] ? e.enablePassthrough = !1 : o.MMR_ERR("MMR readInjectionParameters: unexpected input parameter text: " + n), e.webrtcSupportVersion = parseInt(r[3]), e.mmrSupportVersion = parseInt(r[4]), e.contentPortId = parseInt(r[5]), "true" === r[6] ? e.enableVideoStatusOverlay = !0 : "false" === r[6] ? e.enableVideoStatusOverlay = !1 : o.MMR_ERR("MMR readInjectionParameters: unexpected input parameter text: " + n), "true" === r[7] ? e.enableVideoOutlines = !0 : "false" === r[7] ? e.enableVideoOutlines = !1 : o.MMR_ERR("MMR readInjectionParameters: unexpected input parameter text: " + n) } return e }, e }(); t.MmrInjectionParameterHandler = r }, , , function (e, t, n) { "use strict"; var o, r = this && this.__extends || (o = function (e, t) { return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]) })(e, t) }, function (e, t) { function n() { this.constructor = e } o(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }); Object.defineProperty(t, "__esModule", { value: !0 }), t.LoopbackConnectionPort = void 0; var i, s = n(2), a = n(13), c = n(14), u = n(0), d = n(9), l = "", p = function () { function e() { this.listenerList = new Array, Object.defineProperty(this, "listenerList", { enumerable: !1 }) } return e.prototype.addListener = function (e) { this.listenerList.push(e) }, e.prototype.removeListener = function (e) { var t = this.listenerList.indexOf(e); null != t && this.listenerList.splice(t, 1) }, e.prototype.getRules = function (e, t) { }, e.prototype.removeRules = function (e, t) { }, e.prototype.addRules = function (e, t) { }, e.prototype.hasListener = function (e) { return null != this.listenerList.indexOf(e) }, e.prototype.hasListeners = function () { return this.listenerList.length > 0 }, e }(), g = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return r(t, e), t.prototype.dispatchEvent = function (e) { this.listenerList.forEach((function (t) { t(e) })) }, t }(p), E = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return r(t, e), t.prototype.dispatchEvent = function (e, t) { this.listenerList.forEach((function (n) { n(t, e) })) }, t }(p), f = function () { function e(e) { this.name = "", this.onDisconnect = new g, this.onMessage = new E, null != e && null != e.name && (this.name = e.name + l); var t = this; d.ipcRenderer.on(this.name, (function (e, n) { "msg" == n.type ? t.onMessage.dispatchEvent(t, n.payload) : "disconnect" == n.type ? t.onDisconnect.dispatchEvent(t) : console.log("ConnectionPort " + t.name + " received unknown message of type " + n.type) })) } return e.prototype.postMessage = function (e) { try { d.ipcRenderer.send(this.name, { type: "msg", payload: e }) } catch (t) { console.log("Failed to send message to Main process: " + JSON.stringify(e)) } }, e.prototype.disconnect = function () { d.ipcRenderer.send(this.name, { type: "disconnect" }) }, e }(), m = function () { function e(e) { this.name = "", this.onDisconnect = new g, this.onMessage = new E, null != e && null != e.name && (this.name = e.name) } return e.prototype.postMessage = function (e) { this.onMessage.dispatchEvent(this, e) }, e.prototype.disconnect = function () { this.onDisconnect.dispatchEvent(this) }, e }(); t.LoopbackConnectionPort = m; var M = function () { function e() { } return e.prototype.getAcceptLanguages = function (e) { }, e.prototype.getMessage = function (e, t) { return "" }, e.prototype.getUILanguage = function () { return "" }, e.prototype.detectLanguage = function (e, t) { }, e }(); chrome.i18n = new M, chrome.runtime = [], chrome.runtime.connect = function (e, t) { var n = void 0; return "name" in e ? n = e : "name" in t && (n = t), null != n && n.name == u.LoggingCommon.LOGGING_CONTENT_BACKGROUND_PORT ? i.port : new f(n) }; var _ = d.ipcRenderer.sendSync(s.ProxyCommon.CONTENT_BG_PROXY_CONNECTION_NAME, { type: "init" }); l = _, console.log("Preload script using channelInstanceId = " + l); var h = u.LoggingCommon.LOGGING_CONTENT_BACKGROUND_PORT + l, S = s.ProxyCommon.CONTENT_BG_PROXY_CONNECTION_NAME + l; (i = new c.ElectronLogger(h, S)).start(); new a.NativeMessagingContentProxy; d.ipcRenderer.send(S, { type: "msg", payload: { messageType: "start" } }) }, function (e, t) { e.exports = require("electron") }, , , , function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.NativeMessagingContentProxy = void 0; var o = n(2), r = n(5), i = n(3), s = n(1), a = n(0), c = function () { function e() { this.port = null, this.injectedMmrMain = !1, this.clientConnected = !1, this.disconnected = !1, this.port = chrome.runtime.connect({ name: o.ProxyCommon.CONTENT_BG_PROXY_CONNECTION_NAME }), a.MMR_LOG("NativeMessagingContentProxy: port:"), a.MMR_LOG(this.port); var e = this; this.port.onDisconnect.addListener((function () { a.MMR_LOG("MsRdcMmr:NativeMessagingContentProxy: Disconnected") })), this.port.onMessage.addListener((function (t) { a.MMR_LOG("MsRdcMmr:NativeMessagingContentProxy: Received: " + s.tryJsonStringify(t)); var n = t.messageType; if (n == o.ProxyCommon.CONTENT_BG_CLIENT_CONNECTED_MESSAGE_TYPE) { var r = t.enabledURLs; a.MMR_ASSERT(null != r); var i = document.URL; a.MMR_LOG("MMR: Remote client connected, checking enabled for URL: " + i + " (enabledURLs: " + s.tryJsonStringify(r) + ")"); var c = !1; r.forEach((function (e) { var t = new RegExp(e); null != i.match(t) ? (a.MMR_LOG("URL matches MMR filter: " + e), c = !0) : a.MMR_LOG("URL doesn't match MMR filter: " + e) })); var u = t.enabledWebRtcURLs; a.MMR_ASSERT(null != u); var d = !1; u.forEach((function (e) { var t = new RegExp(e); null != i.match(t) ? (a.MMR_LOG("URL matches WebRTC filter: " + e), d = !0) : a.MMR_LOG("URL doesn't match WebRTC filter: " + e) })), e.clientConnected = !0, a.MMR_ASSERT(null != e.clientConnected); var l = t.occlusionSupportVersion; a.MMR_ASSERT(null != l); var p = t.enablePassthrough; a.MMR_ASSERT(null != p); var g = t.enableForAllSites; a.MMR_ASSERT(null != g); var E = t.enableForAllWebRtcSites = !0; a.MMR_ASSERT(null != E); var f = g || c || d || E, m = t.webrtcSupportVersion; a.MMR_ASSERT(null != m); var M = t.mmrSupportVersion; a.MMR_ASSERT(null != M); var _ = t.contentPortId; a.MMR_ASSERT(null != _); var h = t.enableVideoStatusOverlay; a.MMR_ASSERT(null != h); var S = t.enableVideoOutlines; if (a.MMR_ASSERT(null != S), g || c || (M = 0), E || d || (m = 0), e.clientConnected && (a.MMR_LOG("Injecting MSRDC MMR script - url: " + i + " (shimming enabled: " + f + ")"), e.injectMmrMain(f, l, p, m, M, _, h, S)), f) { e.clientConnected || (a.MMR_LOG("MsRdcMmr:NativeMessagingContentProxy: sending client not connected event"), e.port.postMessage({ messageType: o.ProxyCommon.CONTENT_BG_MMR_ACTIVE_MESSAGE_TYPE, clientConnected: !1 })), a.MMR_LOG("MsRdcMmr:NativeMessagingContentProxy: sending extension loaded event, clientConnected=" + e.clientConnected), e.port.postMessage({ messageType: o.ProxyCommon.CONTENT_BG_MMR_ACTIVE_MESSAGE_TYPE, clientConnected: e.clientConnected, mmrSupportVersion: M, webrtcSupportVersion: m, currentURL: i }); var R = chrome.runtime.getManifest(); e.port.postMessage({ messageType: "connectionTelemetryInformation", enableForAllSitesSetting: g, isUrlSupported: c, enableForAllWebRtcSitesSetting: E, isWebRtcUrlSupported: d, browserExtensionVersion: R.version, domain: document.domain, userAgent: navigator.userAgent }) } } else "onConnectionEvent" == n && ("clientDisconnected" == t.event ? e.disconnected = !0 : "clientConnected" == t.event && e.disconnected && (e.disconnected = !1, e.port.postMessage({ messageType: o.ProxyCommon.CONTENT_BG_RECONNECT_MESSAGE_TYPE }))), document.dispatchEvent(new CustomEvent(o.ProxyCommon.PROXY_RECEIVE_MESSAGE_EVENT, { detail: t })) })); var t = this.port; document.addEventListener(o.ProxyCommon.PROXY_SEND_MESSAGE_EVENT, (function (e) { a.MMR_LOG("MsRdcMmr:NativeMessagingContentProxy: SendMessage: " + s.tryJsonStringify(e.detail)), t.postMessage(e.detail) })), document.addEventListener(o.ProxyCommon.PROXY_SEND_SAME_ORIGIN_PARENT_ID, (function (e) { var n = e.detail.parentNativePortId; a.MMR_ASSERT(null != n), a.MMR_LOG("MsRdcMmr:NativeMessagingContentProxy: sending same origin parent event for parentNativePortId=" + n), t.postMessage({ messageType: o.ProxyCommon.CONTENT_BG_SAME_ORIGIN_PARENT_MESSAGE_TYPE, parentNativePortId: n }) })) } return e.prototype.injectMmrMain = function (e, t, n, o, s, a, c, u) { if (!this.injectedMmrMain) { var d = { enableShimming: e, occlusionSupportVersion: t, enablePassthrough: n, webrtcSupportVersion: o, mmrSupportVersion: s, contentPortId: a, enableVideoStatusOverlay: c, enableVideoOutlines: u }; r.MmrInjectionParameterHandler.setParams(d); var l = document.createElement("script"); l.type = "text/javascript", l.innerHTML = '!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingCommon=t.CachedLogEntry=t.CachedLogEntryType=t.InitializeLogger=t.MMR_ASSERT=t.MMR_WARN=t.MMR_ERR=t.MMR_LOG=void 0;var n=i(2),o=null;t.MMR_LOG=function(e){o.Log(e)},t.MMR_ERR=function(e){o.Error(e)},t.MMR_WARN=function(e){o.Warn(e)},t.MMR_ASSERT=function(e){o.Assert(e)},t.InitializeLogger=function(e){o=e},function(e){e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO"}(t.CachedLogEntryType||(t.CachedLogEntryType={}));var r=function(e,t){this.type=e,this.logString=t};t.CachedLogEntry=r;var a=function(){function e(){}return e.Assert=function(e){return!!e},e.GetAssertLog=function(){var t=(new Error).stack.split("at ")[4].toString().trim(),i=new Object;i.type=e.ASSERT_FAILURE_MESSAGE_TYPE,i.messageType=n.ProxyCommon.BG_HOST_ASSERT_FAILURE_MESSAGE_TYPE,i.fileName=t;var o=t.match(/:(?:\d+):(\d+)[^\d]*$/);return i.line=o?o[1]:0,console.log("MMR_ASSERT: "+t+" Line: "+i.line+" Line object: "+o),i},e.LOGGING_PAGE_TO_CONTENT_EVENT="MsRdcMmrLoggingPageToContent_Message",e.LOGGING_CONTENT_TO_PAGE_EVENT="MsRdcMmrLoggingContentToPage_Message",e.LOGGING_CONTENT_BACKGROUND_PORT="MsRdcMmrLoggingBackgroundComm",e.ASSERT_FAILURE_BACKGROUND_PORT="MsRdcMmrAssertBackgroundComm",e.ASSERT_FAILURE_MESSAGE_TYPE="reportAssertFailure",e.FLUSH_LOGS_MESSAGE_TYPE="flushLogEntries",e}();t.LoggingCommon=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mmrWebRtcStatusToDOMError=t.tryJsonStringify=t.ShimCommon=t.PlaybackPathMode=t.getShimObject=t.shimProxyPropertyName=t.shimPropertyName=t.SourceBufferListProxy=t.TextTrackListProxy=t.createTimeRanges=void 0;var n=i(0);t.createTimeRanges=function(e){var t=e;null==t.forEach&&(t=new Array),t.forEach((function(e,t,i){null==e.start&&(i[t].start=1/0),null==e.end&&(i[t].end=1/0)}));var i=Object.create(TimeRanges.prototype);return Object.defineProperty(i,"length",{get:function(){return t.length}}),i.start=function(e){return t[e].start},i.end=function(e){return t[e].end},i};var o=function(){function e(){this.length=0}return e.prototype.getTrackById=function(e){throw new Error("Method not implemented.")},e.prototype.item=function(e){throw new Error("Method not implemented.")},e.prototype.addEventListener=function(e,t,i){throw new Error("Method not implemented.")},e.prototype.removeEventListener=function(e,t,i){throw new Error("Method not implemented.")},e.prototype[Symbol.iterator]=function(){throw new Error("Method not implemented.")},e.prototype.dispatchEvent=function(e){throw new Error("Method not implemented.")},e}();t.TextTrackListProxy=o;var r,a=function(){function e(t){var i=this;this.sourceBuffers=new Array,this.eventListeners=new Map,this.length=0,this.parentMediaSource=t,e.eventHandlers.forEach((function(e){var t="_on"+e+"eventHandler";Object.defineProperty(i,"on"+e,{get:function(){return this[t]||null},set:function(i){this[t]&&(this.removeEventListener(e,this[t],null),delete this[t]),i&&(this[t]=i,this.addEventListener(e,this[t],null))}})}))}return e.prototype.addEventListener=function(e,t,i){n.MMR_LOG("SourceBufferListProxy::addEventListener - type: "+e),this.eventListeners.has(e)||this.eventListeners.set(e,new Array),this.eventListeners.get(e).push(t),this.parentMediaSource.addEventListener(e,t,i)},e.prototype.removeEventListener=function(e,t,i){n.MMR_LOG("SourceBufferListProxy::removeEventListener - type: "+e);var o=this.eventListeners.get(e);if(null!=o){var r=o.indexOf(t);null!=r&&o.splice(r,1)}this.parentMediaSource.removeEventListener(e,t,i)},e.prototype[Symbol.iterator]=function(){return n.MMR_LOG("SourceBufferListProxy::iterator"),this.sourceBuffers.values()},e.prototype.dispatchEvent=function(e){n.MMR_LOG("SourceBufferListProxy::dispatchEvent - event type: "+e.type);var t=this.eventListeners.get(e.type),i=!1,o=this;return null!=t&&t.forEach((function(t,n,r){null!=t.handleEvent?i=!t.handleEvent():(Object.defineProperty(e,"target",{value:o}),Object.defineProperty(e,"currentTarget",{value:o}),i=!t.apply(o,[e]))})),!(i=i&&e.cancelable)},e.prototype.addSourceBuffer=function(e){n.MMR_LOG("SourceBufferListProxy::addSourceBuffer"),this.sourceBuffers.push(e),this.updateSourceBuffers(),this.dispatchEvent(new CustomEvent("addsourcebuffer"))},e.prototype.removeSourceBuffer=function(e){n.MMR_LOG("SourceBufferListProxy::removeSourceBuffer");var t=this.sourceBuffers.indexOf(e);t>-1&&(this.sourceBuffers.splice(t,1),this.updateSourceBuffers(),this.dispatchEvent(new CustomEvent("removesourcebuffer")))},e.prototype.setSourceBuffers=function(e){this.sourceBuffers=e,this.updateSourceBuffers(),n.MMR_LOG("SourceBufferListProxy::setSourceBuffers - this.length="+this.length)},e.prototype.updateSourceBuffers=function(){var e=this;this.sourceBuffers.forEach((function(t,i,n){e[i]=t})),this.length=this.sourceBuffers.length},e.eventHandlers=["addsourcebuffer","removesourcebuffer"],e}();t.SourceBufferListProxy=a,t.shimPropertyName="MSRDC_MMR_Shim",t.shimProxyPropertyName=t.shimPropertyName+"_Proxy",t.getShimObject=function(e){if(null!=e&&null!=e[t.shimPropertyName])return e[t.shimPropertyName]},function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LOCAL=1]="LOCAL",e[e.REMOTE=2]="REMOTE"}(r=t.PlaybackPathMode||(t.PlaybackPathMode={}));var c=function(){function e(){}return e.initialPlaybackPathMode=r.UNKNOWN,e}();t.ShimCommon=c,t.tryJsonStringify=function(e){var t="<failed JSON.stringify parse>";try{t=JSON.stringify(e)}catch(t){n.MMR_LOG("tryJsonStringify failed for obj="+e)}return t},t.mmrWebRtcStatusToDOMError=function(e){var t="The operation failed for an unknown reason",i="UnknownError";switch(e){case-1:t="The object cannot be found",i="NotFoundError";break;case-2:t="The operation is not supported",i="NotSupportedError";break;case-3:t="The object is in an invalid state",i="InvalidStateError";break;case-4:t="The string did not match the expected pattern",i="SyntaxError";break;case-5:t="The object cannot be modified in this way",i="InvalidModificationError";break;case-6:t="The object does not support the operation or argument",i="InvalidAccessError";break;case-7:return TypeError("The type of the object does not match the expected type");case-8:t="A network error occurred",i="NetworkError";break;case-9:t="The operation was aborted",i="AbortError";break;case-10:t="The operation timed out",i="TimeoutError";break;case-11:t="The input/output read operation failed",i="NotReadableError";break;case-13:t="The constraint was not satisfied",i="ConstraintError";break;case-14:t="Provided data is inadequate",i="DataError";break;case-15:t="The operation failed for an operation-specific reason",i="OperationError";break;case-16:t="Not allowed by the user agent",i="NotAllowedError"}return new DOMException(t,i)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconStatus=t.ProxyCommon=void 0;var n=function(){function e(){}return e.PROXY_RECEIVE_MESSAGE_EVENT="MsRdcMmrProxy_MessageReceived",e.PROXY_SEND_MESSAGE_EVENT="MsRdcMmrProxy_SendMessage",e.PROXY_SEND_MMR_ENGAGED="MsRdcMmrProxy_MmrEngageMessage",e.PROXY_SEND_SAME_ORIGIN_PARENT_ID="MsRdcMmrProxy_SameOriginParent",e.CONTENT_BG_PROXY_CONNECTION_NAME="MsRdcMmrBackgroundComm",e.CONTENT_BG_CLIENT_CONNECTED_MESSAGE_TYPE="MsRdcMmrBackgroundClientConnected",e.CONTENT_BG_MMR_ACTIVE_MESSAGE_TYPE="MsRdcMmrActive",e.CONTENT_BG_SAME_ORIGIN_PARENT_MESSAGE_TYPE="MsRdcMmrSameOriginParent",e.CONTENT_BG_RECONNECT_MESSAGE_TYPE="MsRdcMmrReconnect",e.NATIVE_MESSAGING_APP_NAME="com.microsoft.msrdcmmrnativehost",e.BG_PROXY_CONVERT_TAB_TITLE_TO_WINDOW="__BG_ConvertTabTitleToWindowFlag__",e.POPUP_BG_PROXY_CONNECTION_NAME="MsRdcMmrProxyBgComm",e.BG_HOST_START_TRACING_MESSAGE_TYPE="startFullTracing",e.BG_HOST_STOP_TRACING_MESSAGE_TYPE="stopFullTracing",e.BG_HOST_FLUSH_LOGS_MESSAGE_TYPE="flushLogs",e.BG_HOST_ASSERT_FAILURE_MESSAGE_TYPE="reportAssertFailure",e.HOST_BG_TRACING_STARTED_MESSAGE_TYPE="onTracingStarted",e.HOST_BG_TRACING_STOPPED_MESSAGE_TYPE="onTracingStopped",e.HOST_BG_LOGS_FLUSH_MESSAGE_TYPE="onFlushLogs",e}();t.ProxyCommon=n,function(e){e[e.NotLoaded=0]="NotLoaded",e[e.LoadFailed=1]="LoadFailed",e[e.Loaded=2]="Loaded",e[e.VideoRedirecting=3]="VideoRedirecting",e[e.CallRedirecting=4]="CallRedirecting"}(t.IconStatus||(t.IconStatus={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalizedStringHandler=void 0;var n=i(0),o=new Object;o.disconnectedMessage="Please refresh page to resume video playback",o.redirectedMessage="Video is being redirected...",o.redirectionFailedMessage="Video redirection failed";var r=new Object;Object.getOwnPropertyNames(o).forEach((function(e){r[e]=o[e]}));var a=function(){function e(){}return e.dispatchLocalizedStrings=function(){n.MMR_LOG("LocalizedStringHandler::dispatchLocalizedStrings");var e=new Object;Object.getOwnPropertyNames(o).forEach((function(t){e[t]=chrome.i18n.getMessage(t)})),document.dispatchEvent(new CustomEvent("MsRdcMmrProxy_LocalizedStrings",{detail:e}))},e.listenForLocalizedStrings=function(){n.MMR_LOG("LocalizedStringHandler::listenForLocalizedStrings"),document.addEventListener("MsRdcMmrProxy_LocalizedStrings",(function(e){var t=e.detail;Object.getOwnPropertyNames(t).forEach((function(e){r[e]=t[e]}))}))},e.getLocalizedStrings=function(){return r},e}();t.LocalizedStringHandler=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackObjectManager=t.QueueType=void 0;var n,o=i(0);!function(e){e[e.FALLBACK=0]="FALLBACK",e[e.POSTFALLBACK=1]="POSTFALLBACK"}(n=t.QueueType||(t.QueueType={}));var r=function(){function e(){this.nextLocalObjectId=0,this.urlToIdMap=new Map,this.elementToSourceMap=new Map,this.idToMediaSourceMap=new Map,this.fallbackFunctionQueue=new Array,this.postFallbackFunctionQueue=new Array}return e.prototype.addFallbackVideoElement=function(e){o.MMR_LOG("FallbackObjectManager::addFallbackVideoElement - id: "+this.nextLocalObjectId),e.setFallbackObjectId(this.nextLocalObjectId),this.nextLocalObjectId++},e.prototype.addFallbackMediaSource=function(e,t){o.MMR_LOG("FallbackObjectManager::addFallbackMediaSource - id: "+this.nextLocalObjectId+", url: "+t),e.setFallbackObjectId(this.nextLocalObjectId),this.urlToIdMap.set(t,this.nextLocalObjectId),this.idToMediaSourceMap.set(this.nextLocalObjectId,e),this.nextLocalObjectId++},e.prototype.addElementToSourceAssociation=function(e,t){o.MMR_ASSERT(e>=0&&e<this.nextLocalObjectId);var i=this.urlToIdMap.get(t);o.MMR_LOG("FallbackObjectManager::addElementToSourceAssociation - id: "+e+", url: "+t+", sourceId: "+i),null!=i?this.elementToSourceMap.set(e,i):o.MMR_LOG("FallbackObjectManager::addElementToSourceAssociation - mediaSource for url="+t+" does not exist yet")},e.prototype.queueFallbackFunction=function(e,t,i){switch(void 0===i&&(i=n.FALLBACK),o.MMR_ASSERT(e>=0&&e<this.nextLocalObjectId),i){case n.FALLBACK:this.fallbackFunctionQueue.push({id:e,function:t});break;case n.POSTFALLBACK:this.postFallbackFunctionQueue.push({id:e,function:t})}},e.prototype.switchToLocal=function(e){o.MMR_LOG("FallbackObjectManager::switchToLocal - id: "+e),o.MMR_ASSERT(e>=0&&e<this.nextLocalObjectId);var t=this.elementToSourceMap.get(e);if(this.fallbackFunctionQueue=this.filterAndExecuteFunctionQueue(e,t,this.fallbackFunctionQueue),null!=t){var i=this.idToMediaSourceMap.get(t);o.MMR_ASSERT(null!=i),i.switchToLocal()}this.postFallbackFunctionQueue=this.filterAndExecuteFunctionQueue(e,t,this.postFallbackFunctionQueue)},e.prototype.switchToRemote=function(e){o.MMR_LOG("FallbackObjectManager::switchToRemote - id: "+e),o.MMR_ASSERT(e>=0&&e<this.nextLocalObjectId);var t=this.elementToSourceMap.get(e);if(this.fallbackFunctionQueue=this.filterFunctionQueue(e,t,this.fallbackFunctionQueue),null!=t){var i=this.idToMediaSourceMap.get(t);o.MMR_ASSERT(null!=i),i.switchToRemote()}this.postFallbackFunctionQueue=this.filterFunctionQueue(e,t,this.postFallbackFunctionQueue)},e.prototype.filterAndExecuteFunctionQueue=function(e,t,i){return i.filter((function(i){var n=i.id;o.MMR_ASSERT(null!=n);var r=i.function;return o.MMR_ASSERT(null!=r),n!=e&&n!=t||(r(),!1)}))},e.prototype.filterFunctionQueue=function(e,t,i){return i.filter((function(i){var n=i.id;o.MMR_ASSERT(null!=n);var r=i.function;return o.MMR_ASSERT(null!=r),n!=e&&n!=t}))},e}();t.FallbackObjectManager=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MmrInjectionParameterHandler=void 0;var n=i(0),o=function(){function e(){}return e.setParams=function(e){var t=document.createElement("mmr-enabled");t.innerText=e.enableShimming.toString()+";"+e.occlusionSupportVersion.toString()+";"+e.enablePassthrough.toString()+";"+e.webrtcSupportVersion.toString()+";"+e.mmrSupportVersion.toString()+";"+e.contentPortId.toString()+";"+e.enableVideoStatusOverlay.toString()+";"+e.enableVideoOutlines.toString(),(document.head||document.documentElement).prepend(t)},e.readParams=function(){var e={enableShimming:!1,occlusionSupportVersion:0,enablePassthrough:!1,webrtcSupportVersion:0,mmrSupportVersion:0,contentPortId:-1,enableVideoStatusOverlay:!1,enableVideoOutlines:!1},t=document.getElementsByTagName("mmr-enabled");if(0==t.length)n.MMR_ERR("MMR readInjectionParameters: input parameter element missing.");else{var i=t[0].innerText;n.MMR_LOG("MMR readInjectionParameters: input parameters: "+i);var o=i.split(";");"true"===o[0]?e.enableShimming=!0:"false"===o[0]?e.enableShimming=!1:n.MMR_ERR("MMR readInjectionParameters: unexpected input parameter text: "+i),e.occlusionSupportVersion=parseInt(o[1]),"true"===o[2]?e.enablePassthrough=!0:"false"===o[2]?e.enablePassthrough=!1:n.MMR_ERR("MMR readInjectionParameters: unexpected input parameter text: "+i),e.webrtcSupportVersion=parseInt(o[3]),e.mmrSupportVersion=parseInt(o[4]),e.contentPortId=parseInt(o[5]),"true"===o[6]?e.enableVideoStatusOverlay=!0:"false"===o[6]?e.enableVideoStatusOverlay=!1:n.MMR_ERR("MMR readInjectionParameters: unexpected input parameter text: "+i),"true"===o[7]?e.enableVideoOutlines=!0:"false"===o[7]?e.enableVideoOutlines=!1:n.MMR_ERR("MMR readInjectionParameters: unexpected input parameter text: "+i)}return e},e}();t.MmrInjectionParameterHandler=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupShims=t.rootWindowInfoTracker=void 0;var n=i(17),o=i(20),r=i(23),a=i(24),c=i(25),s=i(0),d=i(26),l=i(5),u=i(3),h=i(4),p=i(1),m=i(27),f=i(28),M=i(30),b=i(7),g=i(12);c.RegisterPageLogger();var O=l.MmrInjectionParameterHandler.readParams(),v=O.enableShimming,R=O.occlusionSupportVersion,E=O.webrtcSupportVersion,y=O.mmrSupportVersion,S=O.enableVideoStatusOverlay,L=O.enableVideoOutlines;s.MMR_LOG("MSRDC MMR main loaded - shim enabled: "+v+", occlusion support version: "+R+", WebRTC support version: "+E+", MMR support version: "+y+", videoStatusOverlayEnabled: "+S+", videoOutlinesEnabled: "+L);var T=new r.NativeMessagingPageProxy(O.contentPortId),j=null,k=null,I=new d.RootWindowInfoTracker(T);function _(e){if(y>0||E>1){var t=e.querySelectorAll("video");if(t&&t.length>0){s.MMR_LOG("Shimming existing elements...");for(var i=0;i<t.length;i++)null!=p.getShimObject(t[i])?s.MMR_LOG("Ignoring video node as it is already shimmed."):(s.MMR_LOG("Shimming new video element"),n.setupVideoElementShims(j,k,R,t[i],S,L,E))}}if(E>0){var o=e.querySelectorAll("audio");if(o&&o.length>0){s.MMR_LOG("Shimming existing audio elements...");for(i=0;i<o.length;i++)null!=p.getShimObject(o[i])?s.MMR_LOG("Ignoring audio node as it is already shimmed."):(s.MMR_LOG("Shimming new audio element"),f.setupAudioElementShims(j,k,R,o[i]))}}}function P(){j=new a.RemoteObjectManager(T,E),k=new h.FallbackObjectManager,_(document.documentElement);var e=document.createElement;if(document.createElement_original=e,document.createElement=function(t){if("video"===t||"VIDEO"===t){if(y>0||E>1){var i=e.apply(document,["VIDEO"]);return s.MMR_LOG("Shimming new element..."),n.setupVideoElementShims(j,k,R,i,S,L,E)}}else if(("audio"===t||"AUDIO"===t)&&E>0){i=e.apply(document,["AUDIO"]);return s.MMR_LOG("Shimming new audio element..."),f.setupAudioElementShims(j,k,R,i)}return e.apply(document,arguments)},E>0&&(m.setupMediaDevicesShims(j,k,R),M.setupRTCPeerConnectionShims(j,k,R),b.setupMediaStreamShim(),g.setupWebAudioShims(),f.shimAudioClass(j,k,R)),y>0){var t=URL.createObjectURL;MediaSource;URL.createObjectURL=function(e){s.MMR_LOG("URL.createObjectURL");return 1==e.isMSRDCObject?e.blobURL:t(e)},o.setupMediaSourceShims(j,k)}var i=document;new MutationObserver((function(e,t){for(var i=0,o=e;i<o.length;i++){var r=o[i];if("childList"===r.type)for(var a=0,c=r.addedNodes;a<c.length;a++){var d=c[a];"VIDEO"==d.nodeName?(y>0||E>1)&&(null!=p.getShimObject(d)?s.MMR_LOG("Ignoring added video node as it is already shimmed."):(s.MMR_LOG("Shimming new video element from mutation observer"),n.setupVideoElementShims(j,k,R,d,S,L,E))):"AUDIO"==d.nodeName?E>0&&(null!=p.getShimObject(d)?s.MMR_LOG("Ignoring added audio node as it is already shimmed."):(s.MMR_LOG("Shimming new audio element from mutation observer"),f.setupAudioElementShims(j,k,R,d))):"SOURCE"==d.nodeName?s.MMR_LOG("New video element source node."):"DIV"==d.nodeName?(s.MMR_LOG("Mutation observer found DIV node with id: "+d.id),_(d)):"CNX"==d.nodeName&&(s.MMR_LOG("Mutation observer found CNX node with id: "+d.id),_(d))}}})).observe(i,{childList:!0,subtree:!0})}t.rootWindowInfoTracker=I,u.LocalizedStringHandler.listenForLocalizedStrings(),p.ShimCommon.initialPlaybackPathMode=O.enablePassthrough?p.PlaybackPathMode.LOCAL:p.PlaybackPathMode.UNKNOWN,t.setupShims=P,v&&P()},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.createTrackRedirectOnMediaStream=t.setupMediaStreamShim=t.createMediaStreamShim=t.MmrMediaStream=t.MmrEventTarget=void 0;var r=i(11),a=i(0),c=function(){function e(){this.eventListeners=new Map}return e.prototype.addEventListener=function(e,t,i){a.MMR_LOG("MmrEventTarget::addEventListener - type: "+e),null==this.eventListeners[e]&&(this.eventListeners[e]=new Array),this.eventListeners[e].push(t)},e.prototype.removeEventListener=function(e,t,i){a.MMR_LOG("MmrEventTarget::removeEventListener");var n=this.eventListeners[e];if(null!=n){var o=n.indexOf(t);null!=o?(a.MMR_LOG("MmrEventTarget::removeEventListener - removing listener for type: "+e),n.splice(o,1)):a.MMR_WARN("MmrEventTarget::removeEventListener - specified listener not found for type: "+e)}else a.MMR_WARN("MmrEventTarget::removeEventListener - no event listeners registered for type: "+e)},e.prototype.dispatchEvent=function(e){if(a.MMR_LOG("MmrEventTarget::dispatchEvent - event.type: "+e.type),null==e.type)throw"UNSPECIFIED_EVENT_TYPE_ERR";if(null!=this.eventListeners[e.type]){var t=this,i=!1;return this.eventListeners[e.type].forEach((function(n,o,r){i=!t.invokeEventListener(e,n)})),!(i=i&&e.cancelable)}a.MMR_LOG("MmrEventTarget::dispatchEvent - no listeners registered for type: "+e.type)},e.prototype.invokeEventListener=function(e,t){return a.MMR_LOG("MmrEventTarget::invokeEventListener - type: "+e.type),null!=t.handleEvent?t.handleEvent():(Object.defineProperty(e,"target",{value:this.eventTarget}),Object.defineProperty(e,"currentTarget",{value:this.eventTarget}),t(e)),!0},e.prototype.shimEventHandlers=function(e,t){t.forEach((function(t){var i="_on"+t+"eventHandler";Object.defineProperty(e,"on"+t,{get:function(){return e[i]||null},set:function(n){e[i]&&(e.removeEventListener(t,e[i],null),delete e[i]),n&&(e[i]=n,e.addEventListener(t,e[i],null))}})}))},e}();t.MmrEventTarget=c;var s=function(e){function t(t){var i=e.call(this)||this;if(i.isMSRDCObject=!0,i.tracks=[],i.eventTarget=i,i.shimEventHandlers(i,["addtrack","removetrack"]),null==t)a.MMR_LOG("MmrMediaStream: empty constructor");else if(null!=t.length){a.MMR_LOG("MmrMediaStream: constructor called with array of tracks"),t.forEach((function(e){null!=i.getTrackById(e.id)||i.tracks.push(e)}))}else{a.MMR_LOG("MmrMediaStream: constructor called with MediaStream "+t.id),t.getTracks().forEach((function(e){null!=i.getTrackById(e.id)||i.tracks.push(e)}))}return i.id=crypto.randomUUID(),a.MMR_LOG("MmrMediaStream: assigned this id to the new stream: "+i.id),i}return o(t,e),Object.defineProperty(t.prototype,"active",{get:function(){return null!=this.tracks.find((function(e){return"ended"!==e.readyState}))},enumerable:!1,configurable:!0}),t.prototype.addTrack=function(e){a.MMR_LOG("MediaStreamShim::addTrack: stream id: "+this.id+" track id: "+e.id),null!=this.getTrackById(e.id)||(this.tracks.push(e),this.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:e})))},t.prototype.clone=function(){return a.MMR_LOG("MediaStreamShim::clone, cloning stream with id "+this.id),new MediaStream(this)},t.prototype.getAudioTracks=function(){return a.MMR_LOG("getAudioTracks called on stream with id "+this.id),this.tracks.filter((function(e){return"audio"===e.kind}))},t.prototype.getTrackById=function(e){var t=this.tracks.find((function(t){return t.id===e}));return null!=t?t:null},t.prototype.getTracks=function(){return this.tracks},t.prototype.getVideoTracks=function(){return this.tracks.filter((function(e){return"video"===e.kind}))},t.prototype.removeTrack=function(e){a.MMR_LOG("MediaStreamShim::removeTrack: stream id: "+this.id+" track id: "+e.id);for(var t=-1,i=0;i<this.tracks.length;i++)if(this.tracks[i].id==e.id){t=i;break}-1!=t&&(this.tracks.splice(t,1),this.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:e})))},t.originalMediaStreamClass=MediaStream,t}(c);t.MmrMediaStream=s,t.createMediaStreamShim=function(e,t){return a.MMR_LOG("Creating shimmed media stream with id "+t),e.id=t,e},t.setupMediaStreamShim=function(){a.MMR_LOG("Shimming MediaStream"),window.MediaStream=s},t.createTrackRedirectOnMediaStream=function(e,t,i,n,o,c){a.MMR_LOG("createTrackRedirectOnMediaStream: Creating MediaStreamTrack with ID: "+i),t.addTrack(r.createTrackRedirect(e,i,n,o,c,!0))}},,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupPassthroughSourceBufferShim=t.setupSourceBufferShim=t.SourceBufferShim=void 0;var n=i(22),o=i(1),r=i(0),a=function(){function e(t,i,a){var c=this;this.remoteObjectManager=t,this.mimeType=i,this.playbackPathMode=o.ShimCommon.initialPlaybackPathMode,r.MMR_LOG("SourceBufferShim::SourceBufferShim - mimeType: "+i),this.sourceBufferRedirect=new n.SourceBufferRedirect(t,this,i,a),this.fallbackFunctionQueue=new Array,this.postFallbackFunctionQueue=new Array,e.eventHandlers.forEach((function(e){var t="_on"+e+"eventHandler";Object.defineProperty(c,"on"+e,{get:function(){return(o.getShimObject(this)?o.getShimObject(this):this)[t]||null},set:function(i){var n=o.getShimObject(this)?o.getShimObject(this):this;n[t]&&(n.removeEventListener(e,n[t],null),delete n[t]),i&&(n[t]=i,n.addEventListener(e,n[t],null))}})}))}return e.prototype.localOrRemoteExecute=function(t,i){var n=o.getShimObject(this)?o.getShimObject(this):this,a=void 0,c=function(){a=n.originalSourceBuffer[t].apply(n.originalSourceBuffer,i)};switch(this.playbackPathMode){case o.PlaybackPathMode.REMOTE:a=n.sourceBufferRedirect[t].apply(n.sourceBufferRedirect,i);break;case o.PlaybackPathMode.UNKNOWN:a=n.sourceBufferRedirect[t].apply(n.sourceBufferRedirect,i),e.postFallbackQueueMethods.includes(t)?n.postFallbackFunctionQueue.push(c):n.fallbackFunctionQueue.push(c);break;case o.PlaybackPathMode.LOCAL:a=c()}return r.MMR_LOG("SourceBufferShim::localOrRemoteExecute - functionName="+t+" args="+i+" return="+a),a},e.prototype.localOrRemoteExecuteFunctions=function(e,t){r.MMR_LOG("SourceBufferShim::localOrRemoteExecuteFunctions");var i=o.getShimObject(this)?o.getShimObject(this):this,n=void 0;switch(this.playbackPathMode){case o.PlaybackPathMode.REMOTE:n=t();break;case o.PlaybackPathMode.UNKNOWN:n=t(),i.fallbackFunctionQueue.push(e);break;case o.PlaybackPathMode.LOCAL:n=e()}return n},e.prototype.setMediaSourceOwner=function(e){r.MMR_LOG("SourceBufferShim:setMediaSourceOwner"),(o.getShimObject(this)?o.getShimObject(this):this).sourceBufferRedirect.setMediaSourceOwner(e)},e.prototype.setFallbackPathMode=function(e){r.MMR_LOG("SourceBufferShim:setFallbackPathMode"),(o.getShimObject(this)?o.getShimObject(this):this).playbackPathMode=e},e.prototype.switchToLocal=function(e){r.MMR_LOG("SourceBufferShim:switchToLocal - playbackPathMode="+this.playbackPathMode);var t=o.getShimObject(this)?o.getShimObject(this):this;t.originalSourceBuffer=e,t.playbackPathMode=o.PlaybackPathMode.LOCAL,t.fallbackFunctionQueue.forEach((function(e){e()})),t.fallbackFunctionQueue=void 0,t.postFallbackFunctionQueue.forEach((function(e){e()})),t.postFallbackFunctionQueue=void 0},e.prototype.switchToRemote=function(){r.MMR_LOG("SourceBufferShim:switchToRemote - playbackPathMode="+this.playbackPathMode);var e=o.getShimObject(this)?o.getShimObject(this):this;r.MMR_ASSERT(e.playbackPathMode==o.PlaybackPathMode.UNKNOWN),e.playbackPathMode=o.PlaybackPathMode.REMOTE,e.fallbackFunctionQueue=void 0,e.postFallbackFunctionQueue=void 0},e.prototype.abort=function(){r.MMR_LOG("SourceBufferShim::abort"),(o.getShimObject(this)?o.getShimObject(this):this).localOrRemoteExecute("abort",[])},e.prototype.appendBuffer=function(e){r.MMR_LOG("SourceBufferShim::appendBuffer"),(o.getShimObject(this)?o.getShimObject(this):this).localOrRemoteExecute("appendBuffer",[e])},e.prototype.remove=function(e,t){r.MMR_LOG("SourceBufferShim::remove"),(o.getShimObject(this)?o.getShimObject(this):this).localOrRemoteExecute("remove",[e,t])},e.prototype.changeType=function(e){var t=o.getShimObject(this)?o.getShimObject(this):this;return r.MMR_LOG("SourceBufferShim::changeType - type: "+e+", currentType: "+t.mimeType),t.mimeType=e,t.localOrRemoteExecute("changeType",[e])},e.prototype.addEventListener=function(e,t,i){r.MMR_LOG("SourceBufferShim::addEventListener - type: "+e);var n=o.getShimObject(this)?o.getShimObject(this):this;if(o.ShimCommon.initialPlaybackPathMode==o.PlaybackPathMode.LOCAL){this.originalSourceBuffer.addEventListener(e,(function(){r.MMR_LOG("SourceBufferShim::addEventListener[LOCAL]::addEventListener - type: "+e+" fired!")}),i)}n.localOrRemoteExecute("addEventListener",[e,t,i])},e.prototype.removeEventListener=function(e,t,i){r.MMR_LOG("SourceBufferShim::removeEventListener - type: "+e),(o.getShimObject(this)?o.getShimObject(this):this).localOrRemoteExecute("removeEventListener",[e,t,i])},e.prototype.dispatchEvent=function(e){return r.MMR_LOG("SourceBufferShim::dispatchEvent - type: "+e.type),(o.getShimObject(this)?o.getShimObject(this):this).localOrRemoteExecute("dispatchEvent",[e])},e.prototype.getLocalObjectId=function(){return(o.getShimObject(this)?o.getShimObject(this):this).sourceBufferRedirect.localObjectId},e.eventHandlers=["abort","error","update","updateend","updatestart"],e.postFallbackQueueMethods=["addEventListener","remoteEventListener"],e}();t.SourceBufferShim=a,t.setupSourceBufferShim=function(e,t,i){var c=new a(e,t,i);c[o.shimPropertyName]=c;var s={get:function(e,t,i){return t==o.shimPropertyName?c:n.SourceBufferRedirect.sourceBufferRedirectAttributes.includes(t)?c.playbackPathMode==o.PlaybackPathMode.LOCAL?(r.MMR_LOG("setupSourceBufferShim::get[LOCAL] - prop="+t),c.originalSourceBuffer[t]):c.sourceBufferRedirect[t]:c[t]},set:function(e,t,i){if(t==o.shimPropertyName)return!0;return c.localOrRemoteExecuteFunctions((function(){c.originalSourceBuffer[t]=i}),(function(){n.SourceBufferRedirect.sourceBufferRedirectAttributes.includes(t)?c.sourceBufferRedirect.setAttribute(t,i):c[t]=i})),!0}},d=new Proxy(c,s);return c[o.shimProxyPropertyName]=d,d},t.setupPassthroughSourceBufferShim=function(e){var t=e;return["abort","appendBuffer","remove","changeType","removeEventListener","dispatchEvent"].forEach((function(e){t[e+"_original"]=t[e],t[e]=function(){return r.MMR_LOG("SourceBufferShim::"+e+"[LOCAL]"),t[e+"_original"].apply(t,arguments)}})),t.addEventListener_original=t.addEventListener,t.addEventListener=function(e,i,n){r.MMR_LOG("SourceBufferShim::addEventListener - type: "+e);var o=function(){r.MMR_LOG("SourceBufferShim::addEventListener[LOCAL]::addEventListener - type: "+e+" fired!")};return t.addEventListener_original.apply(t,[e,o,n]),t.addEventListener_original.apply(t,arguments)},["appendWindowEnd","appendWindowStart","audioTracks","buffered","mode","textTracks","timestampOffset","updating","videoTracks"].forEach((function(e){var i=t.__lookupGetter__(e);null==i&&(i=function(){return t[e+"_noshim_"]});var n=t.__lookupSetter__(e);Object.defineProperty(t,e,{get:function(){var n=i.apply(t);return r.MMR_LOG("SourceBufferShim::get - "+e+"="+n),n},set:function(i){return r.MMR_LOG("SourceBufferShim::set - "+e+"="+i),n.apply(t,[i])}})})),t}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createTrackRedirect=t.MediaStreamTrackRedirect=void 0;var o=i(1),r=i(0),a=i(12),c=function(){function e(t,i,n,a,c,s,d){this.remoteObjectManager=t,this.originalTrack=d,this.isolated=!1,this.enabled=!0,this.muted=!1,this.readyState="live",this.localObjectId=0,this.remoteObjectActive=!1,this.settings=null,this.constraints={},r.MMR_LOG("MediaStreamTrackRedirect constructor"),this.label=n,this.id=i,this.kind=c,this.settings=a,this.isCaptureTrack=s,this.capabilities={deviceId:a.deviceId,groupId:a.groupId},d[o.shimPropertyName]=this;var l=this;e.shimmedMethods.forEach((function(e){d[e]=l[e]})),e.shimmedProperties.forEach((function(e){Object.defineProperty(d,e,{get:function(){return l[e]}})}));Object.defineProperty(d,"enabled",{get:function(){return l.enabled},set:function(e){return l.setIdlAttribute("enabled",!!e),!0}}),e.eventHandlers.forEach((function(e){var t="_on"+e+"eventHandler";Object.defineProperty(d,"on"+e,{get:function(){return l[t]||null},set:function(i){return null!=l[t]&&(l.removeEventListener(e,l[t],null),delete l[t]),null!=i&&(l[t]=i,l.addEventListener(e,l[t],null)),!0}})})),this.remoteObjectManager.createObject(this,"MediaStreamTrack",{trackId:i,kind:c,isCaptureTrack:s})}return e.prototype.setLocalObjectId=function(e){this.localObjectId=e},e.prototype.getLocalObjectId=function(){return this.localObjectId},e.prototype.onRemoteObjectCreated=function(){this.remoteObjectActive=!0},e.prototype.invokeEvent=function(e){},e.prototype.invokeEventListener=function(e,t){r.MMR_LOG("MediaStreamTrackRedirect::invokeEventListener - type: "+e.type),"ended"===this.readyState?r.MMR_LOG("MediaStreamTrackRedirect::invokeEventListener: Ignoring event when track is in ended state."):("ended"==e.type?this.setIdlAttribute("readyState","ended"):"muted"==e.type?this.setIdlAttribute("muted",!0):"unmuted"==e.type&&this.setIdlAttribute("muted",!1),null!=t.handleEvent?t.handleEvent():t(e))},e.prototype.setIdlAttribute=function(e,t){if(r.MMR_LOG("MediaStreamTrackRedirect::setIdlAttribute - name: "+e+", value: "+t),"enabled"==e){var i=this.enabled;this.enabled=t,"ended"!==this.readyState&&(i&&!t?this.remoteObjectManager.invokeMethod(this.localObjectId,"disabled",{},(function(e,t){})):!i&&t&&this.remoteObjectManager.invokeMethod(this.localObjectId,"enabled",{},(function(e,t){})))}else this[e]=t},e.prototype.onAttributeUpdate=function(e,t){r.MMR_LOG("MediaStreamTrackRedirect::onAttributeUpdate - name: "+e+", value: "+o.tryJsonStringify(t))},e.prototype.onConnectionEvent=function(e){"clientConnected"==e?r.MMR_LOG("MediaStreamTrackRedirect::onConnectionEvent - clientConnected"):"clientDisconnected"==e&&(this.remoteObjectActive=!1)},e.prototype.applyConstraints=function(e){r.MMR_LOG("MediaStreamTrackRedirect::applyConstraints[BEGIN] - options: "+JSON.stringify(e));var t=o.getShimObject(this)?o.getShimObject(this):this;return null==e&&(e={}),new Promise((function(i,n){r.MMR_LOG("MediaStreamTrackRedirect::applyConstraints[END]");var o=null;void 0!==e.deviceId&&e.deviceId!==t.capabilities.deviceId&&(o=new DOMException("The constraint could not be satisfied","ConstraintError")),void 0!==e.groupId&&e.groupId!==t.capabilities.groupId&&(o=new DOMException("The constraint could not be satisfied","ConstraintError")),null===o?(t.constraints=e,i()):n(o)}))},e.prototype.clone=function(){return r.MMR_LOG("MediaStreamTrackRedirect::clone - returning same track"),(o.getShimObject(this)?o.getShimObject(this):this).originalTrack},e.prototype.getCapabilities=function(){var e=o.getShimObject(this)?o.getShimObject(this):this;return n({},e.capabilities)},e.prototype.getConstraints=function(){var e=o.getShimObject(this)?o.getShimObject(this):this;return n({},e.constraints)},e.prototype.getSettings=function(){var e=o.getShimObject(this)?o.getShimObject(this):this;return n({},e.settings)},e.prototype.stop=function(){var e=o.getShimObject(this)?o.getShimObject(this):this;"ended"!==e.readyState&&(e.remoteObjectManager.invokeMethod(e.localObjectId,"stop",{},(function(e,t){})),e.setIdlAttribute("readyState","ended"))},e.prototype.addEventListener=function(e,t,i){r.MMR_LOG("MediaStreamTrackRedirect::addEventListener - type: "+e);var n=o.getShimObject(this)?o.getShimObject(this):this;n.remoteObjectManager.addEventListener(n.localObjectId,e,t,i)},e.prototype.removeEventListener=function(e,t,i){r.MMR_LOG("MediaStreamTrackRedirect::removeEventListener - type: "+e);var n=o.getShimObject(this)?o.getShimObject(this):this;n.remoteObjectManager.removeEventListener(n.localObjectId,e,t,i)},e.prototype.dispatchEvent=function(e){r.MMR_LOG("MediaStreamTrackRedirect::dispatchEvent - type: "+e.type);var t=o.getShimObject(this)?o.getShimObject(this):this;return t.remoteObjectManager.dispatchEvent(t.localObjectId,e)},e.audioContext=null,e.eventHandlers=["ended","mute","unmute"],e.shimmedMethods=["applyConstraints","clone","getCapabilities","getConstraints","getSettings","stop","addEventListener","removeEventListener","dispatchEvent"],e.shimmedProperties=["id","kind","label","muted","readyState"],e}();t.MediaStreamTrackRedirect=c,t.createTrackRedirect=function(e,t,i,n,o,s){r.MMR_LOG("createTrackRedirect: Creating MediaStreamTrack with ID: "+t),null==c.audioContext&&(c.audioContext=new a.MmrAudioContext.originalAudioContextClass);var d=c.audioContext.createMediaStreamDestination().stream.getAudioTracks()[0];return new c(e,t,i,n,o,s,d),d}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupWebAudioShims=t.MmrAudioContext=void 0;var n=i(1),o=i(0),r=function(){function e(t){this.audioContextInstance=new e.originalAudioContextClass(t)}return e.prototype.createMediaStreamSource=function(e){if(!0!==e.isMSRDCObject)return o.MMR_LOG("createMediaStreamSource: invoked with non-WebRTC stream"),this.audioContextInstance.createMediaStreamSource(e);var t=new MediaStreamAudioDestinationNode(this.audioContextInstance);o.MMR_LOG("createMediaStreamSource: replacing WebRTC stream with silent track id: "+t.stream.getAudioTracks()[0].id);var i=this.audioContextInstance.createMediaStreamSource(t.stream);return o.MMR_LOG("createMediaStreamSource: sourceNode has stream id: "+i.mediaStream.id+" and track id: "+i.mediaStream.getAudioTracks()[0].id),i},e.prototype.createMediaStreamTrackSource=function(e){if(null==e[n.shimPropertyName])return o.MMR_LOG("createMediaStreamTrackSource: invoked with non-WebRTC track"),this.audioContextInstance.createMediaStreamTrackSource(e);var t=new MediaStreamAudioDestinationNode(this.audioContextInstance).stream.getAudioTracks()[0];return o.MMR_LOG("createMediaStreamTrackSource: replacing WebRTC track with silent track id: "+t.id),this.audioContextInstance.createMediaStreamTrackSource(t)},e.prototype.createMediaStreamDestination=function(){return this.audioContextInstance.createMediaStreamDestination()},Object.defineProperty(e.prototype,"baseLatency",{get:function(){return this.audioContextInstance.baseLatency},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputLatency",{get:function(){return this.audioContextInstance.outputLatency},enumerable:!1,configurable:!0}),e.prototype.close=function(){return this.audioContextInstance.close()},e.prototype.createMediaElementSource=function(e){return this.audioContextInstance.createMediaElementSource(e)},e.prototype.getOutputTimestamp=function(){return this.audioContextInstance.getOutputTimestamp()},e.prototype.resume=function(){return this.audioContextInstance.resume()},e.prototype.suspend=function(){return this.audioContextInstance.suspend()},e.prototype.addEventListener=function(e,t,i){return this.audioContextInstance.addEventListener(e,t,i)},e.prototype.removeEventListener=function(e,t,i){return this.audioContextInstance.removeEventListener(e,t)},Object.defineProperty(e.prototype,"audioWorklet",{get:function(){return this.audioContextInstance.audioWorklet},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.audioContextInstance.currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destination",{get:function(){return o.MMR_LOG("*** destination property was queried."),this.audioContextInstance.destination},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"listener",{get:function(){return this.audioContextInstance.listener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onstatechange",{get:function(){return this._onstatechangeeventHandler},set:function(e){null!=this._onstatechangeeventHandler&&(this.audioContextInstance.removeEventListener("statechange",this._onstatechangeeventHandler,null),delete this._onstatechangeeventHandler),null!=e&&(this._onstatechangeeventHandler=e,this.audioContextInstance.addEventListener("statechange",this._onstatechangeeventHandler,null))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this.audioContextInstance.sampleRate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.audioContextInstance.state},enumerable:!1,configurable:!0}),e.prototype.createAnalyser=function(){return this.audioContextInstance.createAnalyser()},e.prototype.createBiquadFilter=function(){return this.audioContextInstance.createBiquadFilter()},e.prototype.createBuffer=function(e,t,i){return this.audioContextInstance.createBuffer(e,t,i)},e.prototype.createBufferSource=function(){return this.audioContextInstance.createBufferSource()},e.prototype.createChannelMerger=function(e){return this.audioContextInstance.createChannelMerger(e)},e.prototype.createChannelSplitter=function(e){return this.audioContextInstance.createChannelSplitter(e)},e.prototype.createConstantSource=function(){return this.audioContextInstance.createConstantSource()},e.prototype.createConvolver=function(){return this.audioContextInstance.createConvolver()},e.prototype.createDelay=function(e){return this.audioContextInstance.createDelay(e)},e.prototype.createDynamicsCompressor=function(){return this.audioContextInstance.createDynamicsCompressor()},e.prototype.createGain=function(){return this.audioContextInstance.createGain()},e.prototype.createIIRFilter=function(e,t){return this.audioContextInstance.createIIRFilter(e,t)},e.prototype.createOscillator=function(){return this.audioContextInstance.createOscillator()},e.prototype.createPanner=function(){return this.audioContextInstance.createPanner()},e.prototype.createPeriodicWave=function(e,t,i){return this.audioContextInstance.createPeriodicWave(e,t,i)},e.prototype.createScriptProcessor=function(e,t,i){return this.audioContextInstance.createScriptProcessor(e,t,i)},e.prototype.createStereoPanner=function(){return this.audioContextInstance.createStereoPanner()},e.prototype.createWaveShaper=function(){return this.audioContextInstance.createWaveShaper()},e.prototype.decodeAudioData=function(e,t,i){return this.audioContextInstance.decodeAudioData(e,t,i)},e.prototype.dispatchEvent=function(e){return this.audioContextInstance.dispatchEvent(e)},e.originalAudioContextClass=AudioContext,e}();t.MmrAudioContext=r,t.setupWebAudioShims=function(){o.MMR_LOG("Shimming Web Audio"),window.AudioContext=r}},,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupVideoElementShims=t.VideoElementShim=void 0;var n=i(1),o=i(18),r=i(4),a=i(0),c=function(){function e(t,i,r,c,s,d,l){this.remoteObjectManager=t,this.fallbackObjectManager=i,this.originalElement=c,this.webrtcSupportVersion=l,this.duration=NaN,this.readyState=0,this.seeking=!1,this.HAVE_NOTHING=0,this.HAVE_METADATA=1,this.HAVE_CURRENT_DATA=2,this.HAVE_FUTURE_DATA=3,this.HAVE_ENOUGH_DATA=4,this.NETWORK_EMPTY=0,this.NETWORK_IDLE=1,this.NETWORK_LOADING=2,this.NETWORK_NO_SOURCE=3,this.nodeType=Node.ELEMENT_NODE,this.tagName="video",this.originalSetters={},this.sourceChildObserver=null,this.sourceChildAttributeObserver=null,this.sourceNodes=[],this.playbackPathMode=n.ShimCommon.initialPlaybackPathMode,a.MMR_LOG("VideoElementShim::VideoElementShim playbackPathMode="+this.playbackPathMode),this.playbackPathMode!=n.PlaybackPathMode.LOCAL&&(this.videoElementRedirect=new o.VideoElementRedirect(t,c,r,s,d)),this.ownerDocument=window.document,this.videoWidth=1920,this.videoHeight=1080,this.textTracks=new n.TextTrackListProxy,this.buffered=n.createTimeRanges(new Object),this.seekable=n.createTimeRanges(new Object),this.fallbackObjectManager.addFallbackVideoElement(this),this.originalElement[n.shimPropertyName]=this;var u=this;e.shimmedMethods.forEach((function(e){u[e+"_original"]=c[e],c[e]=u[e]})),this.setIdlAttribute_original=function(e,t){return null!=u.originalSetters["set_"+e+"_original"]?u.originalSetters["set_"+e+"_original"].apply(c,[t]):(c[e+"_noshim_"]=t,!0)},e.shimmedProperties.forEach((function(t){e.boolShimmedProperties.includes(t)?u[t]=!!c[t]:u[t]=c[t];var i=c.__lookupGetter__(t);null==i&&(i=function(){return c[t+"_noshim_"]}),u.originalSetters["set_"+t+"_original"]=c.__lookupSetter__(t);var o=e.boolShimmedProperties.includes(t)?function(e){u.setIdlAttribute(t,!!e)}:function(e){u.setIdlAttribute(t,e)};Object.defineProperty(c,t,{get:function(){var e;return e=u.playbackPathMode==n.PlaybackPathMode.LOCAL?i.apply(c):u[t],a.MMR_LOG("VideoElementShim["+u.fallbackObjectId+"]::get - "+t+"="+e),e},set:function(e){return a.MMR_LOG("VideoElementShim["+u.fallbackObjectId+"]::set - "+t+"="+e),o(e),!0},enumerable:!0})})),e.shimmedStyleProperties.forEach((function(e){u[e]=c.style[e]})),u.get_style_original=c.__lookupGetter__("style");var h={get:function(t,i,n){return a.MMR_LOG("VideoElementShim["+t.fallbackObjectId+"].style::get - "+i),e.shimmedStyleProperties.includes(i)?u[i]:u.get_style_original.apply(c)[i]},set:function(t,i,n){(a.MMR_LOG("VideoElementShim["+t.fallbackObjectId+"].style::set - "+i),e.shimmedStyleProperties.includes(i))?u[i]=n:u.get_style_original.apply(c)[i]=n;return!0}};if(this.style=new Proxy(this,h),Object.defineProperty(c,"style",{get:function(){return a.MMR_LOG("VideoElementShim["+u.fallbackObjectId+"]::get - style"),u.style},enumerable:!0}),e.eventHandlers.forEach((function(e){var t="_on"+e+"eventHandler";Object.defineProperty(c,"on"+e,{get:function(){return u[t]||null},set:function(i){return null!=u[t]&&(u.removeEventListener(e,u[t],null),delete u[t]),null!=i&&(u[t]=i,u.addEventListener(e,u[t],null)),!0}})})),this.playbackPathMode!=n.PlaybackPathMode.LOCAL)for(var p=0;p<c.attributes.length;p++){var m=c.attributes[p];if(e.boolShimmedProperties.includes(m.name)){var f=void 0!==m.value;this.videoElementRedirect.setIdlAttribute(m.name,f)}else this.videoElementRedirect.setIdlAttribute(m.name,m.value)}c.childNodes.forEach((function(e){"SOURCE"==e.nodeName&&(a.MMR_LOG("VideoElementShim::VideoElementShim found source childNode"),u.onSourceNodeAdded(e))}));this.sourceChildObserver=new MutationObserver((function(e,t){for(var i=0,n=e;i<n.length;i++){var o=n[i];if("childList"===o.type)for(var r=0,c=o.addedNodes;r<c.length;r++){var s=c[r];if("SOURCE"==s.nodeName){a.MMR_LOG("VideoElementShim::VideoElementShim source childNode is added"),u.onSourceNodeAdded(s);break}}}})),this.sourceChildObserver.observe(c,{childList:!0,subtree:!0}),setTimeout((function(){a.MMR_LOG("VideoElementShim switchToRemote 10 sec timeout"),u.switchToRemote()}),1e4)}return e.prototype.localOrRemoteExecute=function(t,i){var o=this;a.MMR_ASSERT(e.shimmedMethods.includes(t)||"setIdlAttribute"==t);var c=void 0,s=function(){return o[t+"_original"].apply(o.originalElement,i)};switch(this.playbackPathMode){case n.PlaybackPathMode.REMOTE:c=this.videoElementRedirect[t].apply(this.videoElementRedirect,i);break;case n.PlaybackPathMode.UNKNOWN:c=this.videoElementRedirect[t].apply(this.videoElementRedirect,i),e.postFallbackQueueMethods.includes(t)?this.fallbackObjectManager.queueFallbackFunction(this.fallbackObjectId,s,r.QueueType.POSTFALLBACK):this.fallbackObjectManager.queueFallbackFunction(this.fallbackObjectId,s);break;case n.PlaybackPathMode.LOCAL:c=s()}return a.MMR_LOG("VideoElementShim["+this.fallbackObjectId+"]::localOrRemoteExecute - functionName="+t+" args="+i+" return="+c+" playbackPathMode="+this.playbackPathMode),c},e.prototype.localOrRemoteExecuteFunctions=function(e,t){switch(this.playbackPathMode){case n.PlaybackPathMode.REMOTE:return t();case n.PlaybackPathMode.UNKNOWN:return this.fallbackObjectManager.queueFallbackFunction(this.fallbackObjectId,e),t();case n.PlaybackPathMode.LOCAL:return e()}},e.prototype.setFallbackObjectId=function(e){a.MMR_LOG("VideoElementShim["+this.fallbackObjectId+"]::setFallbackObjectId - fallbackObjectId: "+e),this.fallbackObjectId=e},e.prototype.switchToLocal=function(e){void 0===e&&(e="Unknown."),a.MMR_LOG("VideoElementShim["+this.fallbackObjectId+"]::switchToLocal - playbackPathMode="+this.playbackPathMode+" message="+e),this.playbackPathMode==n.PlaybackPathMode.UNKNOWN&&(this.videoElementRedirect.cancelRemote(e),this.playbackPathMode=n.PlaybackPathMode.LOCAL,this.fallbackObjectManager.switchToLocal(this.fallbackObjectId))},e.prototype.switchToRemote=function(){a.MMR_LOG("VideoElementShim["+this.fallbackObjectId+"]::switchToRemote - playbackPathMode="+this.playbackPathMode),this.playbackPathMode==n.PlaybackPathMode.UNKNOWN&&(this.playbackPathMode=n.PlaybackPathMode.REMOTE,this.fallbackObjectManager.switchToRemote(this.fallbackObjectId))},e.prototype.setContentAttribute=function(e,t){a.MMR_LOG("VideoElementShim["+this.fallbackObjectId+"]::setContentAttribute - name: "+e+", value: "+t),this.setAttribute_original.apply(this.originalElement,[e,t])},e.prototype.setIdlAttribute=function(e,t){a.MMR_LOG("VideoElementShim["+this.fallbackObjectId+"]::setIdlAttribute - name: "+e+", value: "+t),"currentTime"==e&&this.currentTime!=t&&(this.seeking=!0),this.setAttributeOnShim(e,t),this.playbackPathMode==n.PlaybackPathMode.UNKNOWN&&("srcObject"==e&&this.webrtcSupportVersion<2?this.switchToLocal("VideoElementShim srcObject attribute was set."):"src"==e&&this.fallbackObjectManager.addElementToSourceAssociation(this.fallbackObjectId,t)),this.localOrRemoteExecute("setIdlAttribute",[e,t]),"src"==e&&""==t&&this.sourceNodes.length>0&&this.checkAndSetSrcFromSourceNode(this.sourceNodes[0])},e.prototype.setAttributeOnShim=function(t,i){var o=n.getShimObject(this)?n.getShimObject(this):this,r=i;e.boolShimmedProperties.includes(t)&&(r=!!i),o[t]=r},e.prototype.onSourceNodeAdded=function(e){if(a.MMR_LOG("VideoElementShim::onSourceNodeAdded"),this.sourceNodes.push(e),1==this.sourceNodes.length){this.checkAndSetSrcFromSourceNode(e);var t=this;this.sourceChildAttributeObserver=new MutationObserver((function(i,n){for(var o=0,r=i;o<r.length;o++){"src"==r[o].attributeName&&t.checkAndSetSrcFromSourceNode(e)}})),this.sourceChildAttributeObserver.observe(e,{attributes:!0})}},e.prototype.checkAndSetSrcFromSourceNode=function(e){null!=this.src&&""!=this.src||""==e.src||(a.MMR_LOG("VideoElementShim::checkAndSetSrcFromSourceNode "+e.src),this.fallbackObjectManager.addElementToSourceAssociation(this.fallbackObjectId,e.src),this.playbackPathMode!=n.PlaybackPathMode.LOCAL&&this.videoElementRedirect.setIdlAttribute("src",e.src))},e.prototype.setAttribute=function(t,i){var o=n.getShimObject(this)?n.getShimObject(this):this;if(a.MMR_LOG("VideoElementShim["+o.fallbackObjectId+"]::setAttribute - name: "+t+", value: "+i),o.setContentAttribute(t,i),o.playbackPathMode!=n.PlaybackPathMode.LOCAL)if(e.boolShimmedProperties.includes(t)){var r=void 0!==i;o.videoElementRedirect.setIdlAttribute(t,r)}else o.videoElementRedirect.setIdlAttribute(t,i);o.setAttributeOnShim(t,i)},e.prototype.removeAttribute=function(e){var t=n.getShimObject(this)?n.getShimObject(this):this;a.MMR_LOG("VideoElementShim["+t.fallbackObjectId+"]::removeAttribute - name: "+e),t.removeAttribute_original.apply(t.originalElement,[e]),t.setAttributeOnShim(e,t.originalElement[e])},e.prototype.getVideoPlaybackQuality=function(){var e=n.getShimObject(this)?n.getShimObject(this):this;return e.playbackPathMode==n.PlaybackPathMode.LOCAL?e.getVideoPlaybackQuality_original.apply(e.originalElement):e.videoElementRedirect.getVideoPlaybackQuality()},e.prototype.pause=function(){var e=n.getShimObject(this)?n.getShimObject(this):this;a.MMR_LOG("VideoElementShim["+e.fallbackObjectId+"]::pause"),e.playbackPathMode!=n.PlaybackPathMode.LOCAL&&(n.getShimObject(this).paused=!0),e.localOrRemoteExecute("pause",[])},e.prototype.setMediaKeys=function(e){var t=n.getShimObject(this)?n.getShimObject(this):this;return a.MMR_LOG("VideoElementShim["+t.fallbackObjectId+"]::setMediaKeys"),null!=e&&t.playbackPathMode==n.PlaybackPathMode.UNKNOWN&&t.switchToLocal("VideoElementShim setMediaKeys was called."),t.playbackPathMode==n.PlaybackPathMode.LOCAL?t.setMediaKeys_original.apply(t.originalElement,[e]):(console.warn("VideoElement: Unimplemented MSRDC shim method"),new Promise((function(){})))},e.prototype.play=function(){var e=n.getShimObject(this)?n.getShimObject(this):this;return a.MMR_LOG("VideoElementShim["+e.fallbackObjectId+"]::play"),e.playbackPathMode!=n.PlaybackPathMode.LOCAL&&(n.getShimObject(this).paused=!1),new Promise((function(t,i){e.localOrRemoteExecuteFunctions((function(){e.play_original.apply(e.originalElement).then((function(e){t()})).catch((function(e){i(e)}))}),(function(){e.videoElementRedirect.play().then((function(e){t()})).catch((function(e){i(e)}))}))}))},e.prototype.setSinkId=function(e){var t=n.getShimObject(this)?n.getShimObject(this):this;return a.MMR_LOG("VideoElementShim["+this.fallbackObjectId+"]::setSinkId: elementId: "+t.originalElement.id),new Promise((function(i,n){t.localOrRemoteExecuteFunctions((function(){a.MMR_LOG("Accepting the requested device id when executing setSinkId on local element"),i()}),(function(){t.videoElementRedirect.setSinkId(e).then((function(e){i()})).catch((function(e){n(e)}))}))}))},e.prototype.canPlayType=function(e){var t=n.getShimObject(this)?n.getShimObject(this):this,i=t.canPlayType_original.apply(t.originalElement,[e]);return console.warn("VideoElement: Unimplemented MSRDC shim method"),a.MMR_LOG("VideoElementShim["+t.fallbackObjectId+"]: canplayType type="+e+" ret="+i),i},e.prototype.load=function(){var e=n.getShimObject(this)?n.getShimObject(this):this;a.MMR_LOG("VideoElementShim["+e.fallbackObjectId+"]::load"),e.localOrRemoteExecute("load",[])},e.prototype.addEventListener=function(e,t,i){var o=n.getShimObject(this)?n.getShimObject(this):this;if(a.MMR_LOG("VideoElementShim["+o.fallbackObjectId+"]::addEventListener - type: "+e),n.ShimCommon.initialPlaybackPathMode==n.PlaybackPathMode.LOCAL){var r=function(){a.MMR_LOG("VideoElementShim["+o.fallbackObjectId+"][LOCAL]::addEventListener - type: "+e+" fired!")};o.removeEventListener_original.apply(o.originalElement,[e,r,i]),o.addEventListener_original.apply(o.originalElement,[e,r,i])}return o.addEventListener_original.apply(o.originalElement,[e,t,i])},e.prototype.removeEventListener=function(e,t,i){var o=n.getShimObject(this)?n.getShimObject(this):this;return a.MMR_LOG("VideoElementShim["+o.fallbackObjectId+"]::removeEventListener - type: "+e),o.removeEventListener_original.apply(o.originalElement,[e,t,i])},e.prototype.dispatchEvent=function(e){var t=n.getShimObject(this)?n.getShimObject(this):this;return a.MMR_LOG("VideoElementShim["+t.fallbackObjectId+"]::dispatchEvent - type: "+e.type),t.dispatchEvent_original.apply(t.originalElement,[e])},e.eventHandlers=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],e.shimmedMethods=["setAttribute","removeAttribute","play","pause","setMediaKeys","setSinkId","canPlayType","load","getVideoPlaybackQuality","addEventListener","removeEventListener","dispatchEvent"],e.shimmedProperties=o.VideoElementRedirect.redirectAttributes,e.boolShimmedProperties=o.VideoElementRedirect.boolRedirectAttributes,e.shimmedStyleProperties=["opacity"],e.postFallbackQueueMethods=["addEventListener","removeEventListener"],e}();t.VideoElementShim=c,t.setupVideoElementShims=function(e,t,i,n,o,r,s){return a.MMR_LOG("Shimming video element: "+n.outerHTML),new c(e,t,i,n,o,r,s),n}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoElementRedirect=void 0;var n,o=i(19),r=i(6),a=i(1),c=i(3),s=i(0);!function(e){e[e.Rendering=0]="Rendering",e[e.NotRendering=1]="NotRendering",e[e.Paused=2]="Paused"}(n||(n={}));var d=function(e,t,i,n,o){this.creationTime=e,this.corruptedVideoFrames=t,this.droppedVideoFrames=i,this.totalFrameDelay=n,this.totalVideoFrames=o},l=function(){function e(e,t,i,r,a){this.remoteObjectManager=e,this.originalElement=t,this.occlusionSupportVersion=i,this.videoStatusOverlayEnabled=r,this.videoOutlinesEnabled=a,this.localObjectId=0,this.creationTime=0,this.mutationObserver=null,this.intersectionObserver=null,this.tabVisible=!1,this.ignoreTimeUpdates=!1,this.elementRectUpdateInterval=null,this.disconnectedMessageElement=null,this.redirectedMessageElement=null,this.lastValidVideoRect=new DOMRect(0,0,0,0),this.parentElementClipRects=new Array,this.hasPositionedAncestor=!1,this.elementVisible=!0,this.switchToLocal=!1,this.isWebRTCMode=!1,this.checkLocalPlaySuppressed=!0,this.remoteObjectActive=!1,this.patternElement=null,this.patternDefElement=null,this.patternScaleFactor=0,this.previousTotalVideoFrames=-1,this.lastVideoTimestamp=0,this.redirectionPlaying=n.NotRendering,this.displayedRedirectionMessage=!1;var c=navigator.userAgent;this.remoteObjectManager.createObject(this,"VideoElement",{occlusionSupportVersion:i,userAgent:c}),this.creationTime=performance.now(),s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::VideoElementRedirect - overlay: "+this.videoStatusOverlayEnabled+", outlines: "+this.videoOutlinesEnabled),this.genericOcclusionSupported()&&(this.patternElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.patternElement.style.position="absolute",this.videoOutlinesEnabled&&(this.patternElement.style.border="10px solid red",this.patternElement.style.boxSizing="border-box"));var d=this,l=t;this.mutationObserver=new MutationObserver((function(e,t){for(var i=0,n=e;i<n.length;i++){var o=n[i];d.onContentAttributeUpdated(o.attributeName,l.hasAttribute(o.attributeName)?l.getAttribute(o.attributeName):void 0)}})),this.mutationObserver.observe(l,{attributes:!0});var u=this;this.callSendElementRect=function(e){u.sendElementRect(u)},this.intersectionObserver=new IntersectionObserver(this.callSendElementRect,{root:null,rootMargin:"0px",threshold:0}),this.intersectionObserver.observe(this.originalElement),this.tabVisible=!document.hidden,this.sendElementRect(this),this.scheduleElementRectUpdate(),this.genericOcclusionSupported()||(this.occlusionTracker=o.createOcclusionTrackerForSite(document.URL,this),this.occlusionTracker.startMonitoring()),document.addEventListener("scroll",this.callSendElementRect),window.addEventListener("resize",this.callSendElementRect)}return e.prototype.genericOcclusionSupported=function(){return 1==this.occlusionSupportVersion},e.prototype.onContentAttributeUpdated=function(e,t){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::onContentAttributeUpdated - name: "+e+", value: "+t)},e.prototype.setIdlAttribute=function(t,i){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::setIdlAttribute[BEGIN] - name: "+t+", value: "+i);var n=i;if("src"==t&&(a.getShimObject(this.originalElement).currentTime=0,this.ignoreTimeUpdates=!0,s.MMR_LOG("VideoElementShim::ignoreTimeUpdates = true"),null!=i&&(n=new URL(n,document.URL).toString()),this.isWebRTCMode=!1),"currentTime"==t&&i<0&&(n="0.0"),"preload"==t&&"none"!=i&&this.onLoad(),e.boolRedirectAttributes.includes(t)&&(n=!1===i||void 0===i?"false":"true"),"srcObject"==t)return this.setNewMediaStream(i),void(this.isWebRTCMode=!0);var o=this;this.remoteObjectManager.invokeMethod(this.localObjectId,"setAttribute",{name:t,value:n},(function(e,n){s.MMR_LOG("VideoElementRedirect["+o.localObjectId+"]::setIdlAttribute[END] - result: 0x"+e.toString(16)),"src"==t&&(a.getShimObject(o.originalElement).currentSrc=i,o.ignoreTimeUpdates=!1,s.MMR_LOG("VideoElementRedirect["+o.localObjectId+"]::ignoreTimeUpdates = false"))}))},e.prototype.onOcclusionUpdate=function(){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::onOcclusionUpdate"),this.tabVisible=!document.hidden,this.sendElementRect(this)},e.prototype.scheduleElementRectUpdate=function(){if(this.elementRectUpdateInterval)s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::scheduleElementRectUpdate - timer already scheduled");else{s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::scheduleElementRectUpdate - scheduling timer");var e=this;this.elementRectUpdateInterval=setInterval((function(){e.tabVisible=!document.hidden,e.updateParentBoundingRects(),e.sendElementRect(e)}),1e3)}},e.prototype.cancelElementRectUpdate=function(){this.elementRectUpdateInterval?(s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::cancelElementRectUpdate - clearing existing timer"),clearInterval(this.elementRectUpdateInterval),this.elementRectUpdateInterval=null):s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::cancelElementRectUpdate - timer already cleared")},e.prototype.setLocalObjectId=function(e){this.localObjectId=e},e.prototype.getLocalObjectId=function(){return this.localObjectId},e.prototype.onRemoteObjectCreated=function(){this.remoteObjectActive=!0},e.prototype.invokeEvent=function(e){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::invokeEvent - type: "+e.type),"loadstart"==e.type&&(this.displayedRedirectionMessage=!1,this.resetRedirectedMessageElement()),a.getShimObject(this.originalElement).dispatchEvent(e)},e.prototype.invokeEventListener=function(e,t){},e.prototype.onAttributeUpdate=function(e,t){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::onAttributeUpdate - name: "+e+", value: "+a.tryJsonStringify(t));var i=a.getShimObject(this.originalElement),n=t;if(this.ignoreTimeUpdates&&"currentTime"==e)s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::onAttributeUpdate - ignoring currentTime update");else{if("duration"==e&&null==t&&(n=1/0),"buffered"!=e&&"seekable"!=e||(n=a.createTimeRanges(t)),"videoPlaybackQuality"==e){var o=t.framesCorrupted?t.framesCorrupted:0,r=t.framesDropped?t.framesDropped:0,c=t.totalFrameDelay?t.totalFrameDelay:0,l=t.framesRendered?t.framesRendered:0,u=performance.now()-this.creationTime;n=new d(u,o,r,c,l),this.updatePlaybackStatus(l,u,i)}i.setAttributeOnShim(e,n)}},e.prototype.onConnectionEvent=function(e){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::onConnectionEvent - eventType: "+e),"clientConnected"==e?(this.occlusionTracker&&this.occlusionTracker.startMonitoring(),this.scheduleElementRectUpdate()):"clientDisconnected"==e?(this.occlusionTracker&&this.occlusionTracker.stopMonitoring(),this.remoteObjectActive=!1,this.cancelElementRectUpdate(),null==this.disconnectedMessageElement&&this.addDisconnectedMessageElement()):"switchToRemote"==e&&a.getShimObject(this.originalElement).switchToRemote()},e.prototype.updatePlaybackStatus=function(e,t,i){this.previousTotalVideoFrames==e?this.redirectionPlaying==n.Rendering&&t-this.lastVideoTimestamp>500&&(s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::onAttributeUpdate - frames no longer rendering, "+i.paused),this.remoteObjectManager.invokeMethod(this.localObjectId,"showPause",{type:"video"},(function(e,t){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::showPause")})),this.redirectionPlaying=n.NotRendering):(this.redirectionPlaying==n.NotRendering&&(s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::onAttributeUpdate - frames rendering"),this.remoteObjectManager.invokeMethod(this.localObjectId,"showPlay",{type:"video"},(function(e,t){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::showPlay")})),this.redirectionPlaying=n.Rendering,this.videoStatusOverlayEnabled&&this.addRedirectedMessageElement()),this.previousTotalVideoFrames=e,this.lastVideoTimestamp=t)},e.prototype.addDisconnectedMessageElement=function(){if(null==this.disconnectedMessageElement){this.updatePatternElement(new DOMRect),this.disconnectedMessageElement=document.createElement("div");var e=c.LocalizedStringHandler.getLocalizedStrings().disconnectedMessage;this.disconnectedMessageElement.innerHTML="<h1>"+e+"</h1>",this.updateDisconnectedMessageRect(),this.disconnectedMessageElement.style.backgroundColor="black",this.disconnectedMessageElement.style.opacity="0.9",this.disconnectedMessageElement.style.color="white",this.disconnectedMessageElement.style.position="absolute",this.disconnectedMessageElement.style.textAlign="center",document.body.appendChild(this.disconnectedMessageElement)}},e.prototype.resetRedirectedMessageElement=function(){if(null!=this.redirectedMessageElement){var t=document.getElementById(e.redirectionMessageElementId);null!=t&&t.remove()}else this.redirectedMessageElement=document.createElement("div"),this.redirectedMessageElement.setAttribute("id",e.redirectionMessageElementId)},e.prototype.addRedirectionFailedMessageElement=function(){if(this.videoStatusOverlayEnabled){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::addRedirectionFailedMessageElement"),this.displayedRedirectionMessage&&(this.displayedRedirectionMessage=!1),this.resetRedirectedMessageElement();var e=c.LocalizedStringHandler.getLocalizedStrings().redirectionFailedMessage;this.redirectedMessageElement.innerHTML=e,this.updateRedirectedMessageRect(),document.body.appendChild(this.redirectedMessageElement)}},e.prototype.addRedirectedMessageElement=function(){if(this.videoStatusOverlayEnabled&&!this.displayedRedirectionMessage){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::addRedirectedMessageElement"),this.resetRedirectedMessageElement();var t=c.LocalizedStringHandler.getLocalizedStrings().redirectedMessage;this.redirectedMessageElement.innerHTML=t,this.updateRedirectedMessageRect(),document.body.appendChild(this.redirectedMessageElement),this.displayedRedirectionMessage=!0,setTimeout((function(){document.getElementById(e.redirectionMessageElementId).remove()}),5e3)}},e.prototype.updateDisconnectedMessageRect=function(){if(null!=this.disconnectedMessageElement){var e=this.originalElement.getBoundingClientRect();0!=e.width&&0!=e.height||(e=this.lastValidVideoRect),0!=e.width&&0!=e.height||(e.width=.4*document.body.clientWidth,e.height=.2*document.body.clientHeight,e.x=.3*document.body.clientWidth,e.y=0),this.disconnectedMessageElement.style.left=e.x.toString()+"px",this.disconnectedMessageElement.style.top=e.y.toString()+"px",this.disconnectedMessageElement.style.width=e.width.toString()+"px",this.disconnectedMessageElement.style.height=(e.height/2).toString()+"px",this.disconnectedMessageElement.style.paddingTop=(e.height/2).toString()+"px"}},e.prototype.updateRedirectedMessageRect=function(){var e=this.originalElement.getBoundingClientRect();0!=e.width&&0!=e.height||(e=this.lastValidVideoRect),0!=e.width&&0!=e.height||(e.width=.4*document.body.clientWidth,e.height=.2*document.body.clientHeight,e.x=.3*document.body.clientWidth,e.y=0),this.redirectedMessageElement.style.left=e.x.toString()+"px",this.redirectedMessageElement.style.top=e.y.toString()+"px",this.redirectedMessageElement.style.width=e.width.toString()+"px",this.redirectedMessageElement.style.height=(e.height/18).toString()+"px",this.redirectedMessageElement.style.backgroundColor="black",this.redirectedMessageElement.style.opacity="1.0",this.redirectedMessageElement.style.color="white",this.redirectedMessageElement.style.fontFamily="Segoe UI, Tahoma, sans-serif",this.redirectedMessageElement.style.fontSize="1vw",this.redirectedMessageElement.style.fontWeight="bold",this.redirectedMessageElement.style.position="absolute",this.redirectedMessageElement.style.display="flex",this.redirectedMessageElement.style.justifyContent="center",this.redirectedMessageElement.style.alignItems="center"},e.prototype.updateParentBoundingRects=function(){var e=0,t=this.originalElement.parentElement,i=this.originalElement.getBoundingClientRect(),n=new Array;for(this.elementVisible=!0;null!=t&&e<5;){var o=window.getComputedStyle(t),r=o["overflow-x"]?o["overflow-x"]:o.overflow,a=o["overflow-y"]?o["overflow-y"]:o.overflow,c=t.getBoundingClientRect();if(null!=o.position&&""!=o.position&&"static"!=o.position&&(this.hasPositionedAncestor=!0),"HTML"==t.tagName)break;if(null!=o.opacity)break;if(r&&"visible"!=r){if(i.right<=c.left||i.left>=c.right){s.MMR_LOG("VideoElement["+this.localObjectId+"]::updateParentBoundingRects - Element is completely occluded. rect: "+JSON.stringify(i)+", parentRect: "+JSON.stringify(i)),this.elementVisible=!1;break}c.left-i.left>1&&(s.MMR_LOG("VideoElement["+this.localObjectId+"]::updateParentBoundingRects - rect.left="+i.left+" < parentRect.left="+c.left+" overflow="+r),n.push(new DOMRect(i.left,i.top,c.left-i.left,i.height))),i.right-c.right>1&&(s.MMR_LOG("VideoElement["+this.localObjectId+"]::updateParentBoundingRects - rect.right="+i.right+" > parentRect.right="+c.left+" overflow="+r),n.push(new DOMRect(c.right,i.top,i.right-c.right,i.height)))}if(a&&"visible"!=a){if(i.bottom<=c.top||i.top>=c.bottom){s.MMR_LOG("VideoElement["+this.localObjectId+"]::updateParentBoundingRects - Element is completely occluded. rect: "+JSON.stringify(i)+", parentRect: "+JSON.stringify(i)),this.elementVisible=!1;break}c.top-i.top>1&&(s.MMR_LOG("VideoElement["+this.localObjectId+"]::updateParentBoundingRects - rect.top="+i.top+" < parentRect.top="+c.top+" overflow="+a),n.push(new DOMRect(i.left,i.top,i.width,c.top-i.top))),i.bottom-c.bottom>1&&(s.MMR_LOG("VideoElement["+this.localObjectId+"]::updateParentBoundingRects - rect.bottom="+i.bottom+" > parentRect.bottom="+c.bottom+" overflow="+a),n.push(new DOMRect(i.left,c.bottom,i.width,i.bottom-c.bottom)))}t=t.parentElement,e++}this.parentElementClipRects=n},e.prototype.updatePatternElement=function(e){if(this.genericOcclusionSupported()){if(this.switchToLocal||!this.remoteObjectActive)return this.patternElement.style.visibility="hidden",void this.setOpacityOnOriginalElement("1");var t=Math.round(e.width),i=Math.round(e.height),n=t+t%2,o=i+i%2,r=new DOMRect(e.x,e.y,n,o),a=window.devicePixelRatio;if(!this.patternDefElement||r.width!=this.lastValidVideoRect.width||r.height!=this.lastValidVideoRect.height||a!=this.patternScaleFactor){var c=1/a;if(!this.patternDefElement||a!=this.patternScaleFactor){var s=null;if(this.patternDefElement)for((s=this.patternDefElement.parentElement).removeChild(this.patternDefElement),this.patternDefElement=null;this.patternElement.firstChild;)this.patternElement.removeChild(this.patternElement.firstChild);else s=document.createElementNS("http://www.w3.org/2000/svg","defs");this.patternDefElement=document.createElementNS("http://www.w3.org/2000/svg","pattern"),this.patternDefElement.setAttribute("id","Checkerboard"+this.localObjectId);for(var d=c.toString(),l=[{x:"0",y:"0",fill:"#ff00ff"},{x:d,y:"0",fill:"#00ff00"},{x:"0",y:d,fill:"#00ff00"},{x:d,y:d,fill:"#ff00ff"}],u=0;u<l.length;u++){var h=l[u],p=document.createElementNS("http://www.w3.org/2000/svg","rect");p.setAttribute("x",h.x),p.setAttribute("y",h.y),p.setAttribute("fill",h.fill),p.setAttribute("width",d),p.setAttribute("height",d),this.patternDefElement.appendChild(p)}s.appendChild(this.patternDefElement),this.patternElement.appendChild(s);var m=document.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("id","overallPatternRect"),m.setAttribute("fill","url(#Checkerboard"+this.localObjectId+")"),this.patternElement.appendChild(m)}var f=2*c/r.width,M=2*c/r.height;this.patternDefElement.setAttribute("width",f.toString()),this.patternDefElement.setAttribute("height",M.toString());var b=this.patternElement.getElementById("overallPatternRect");b.setAttribute("width",r.width.toString()),b.setAttribute("height",r.height.toString()),this.patternScaleFactor=a}var g=this.originalElement.parentElement,O=null!=g?g.getBoundingClientRect():new DOMRect(0,0,0,0);if(this.patternElement.style.width=r.width+"px",this.patternElement.style.height=r.height+"px",this.hasPositionedAncestor?(this.patternElement.style.top=r.top-O.top+"px",this.patternElement.style.bottom=r.bottom-O.top+"px",this.patternElement.style.left=r.left-O.left+"px",this.patternElement.style.right=r.right-O.right+"px"):(this.patternElement.style.top=r.top+"px",this.patternElement.style.bottom=r.bottom+"px",this.patternElement.style.left=r.left+"px",this.patternElement.style.right=r.right+"px"),this.patternElement.style.visibility="visible",this.patternElement.parentElement!=g){null!=this.patternElement.parentElement&&this.patternElement.parentElement.removeChild(this.patternElement);var v=this.originalElement.nextSibling;g.insertBefore(this.patternElement,v)}this.setOpacityOnOriginalElement("0")}},e.prototype.sendElementRect=function(e){var t=r.rootWindowInfoTracker.getRootWindowInfo(),i=t.rootOffset,n=e.originalElement.getBoundingClientRect();0!=n.width&&0!=n.height?(this.updatePatternElement(n),this.lastValidVideoRect=n):e.patternElement&&(e.patternElement.style.visibility="hidden"),this.updateDisconnectedMessageRect();var o=window.devicePixelRatio,a=new Object;a.left=Math.round((n.left+i.x)*o),a.right=Math.round((n.right+i.x)*o),a.top=Math.round((n.top+i.y)*o),a.bottom=Math.round((n.bottom+i.y)*o),e.tabVisible&&e.elementVisible&&!e.switchToLocal||(a.left=0,a.right=0,a.top=0,a.bottom=0);var c=t.title,d=window.devicePixelRatio;s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::setRect[BEGIN] - scaledRect: "+JSON.stringify(a)+", windowTitle: "+c+", displayScaleFactor: "+d+", elementVisible: "+e.elementVisible),e.remoteObjectManager.invokeMethod(e.localObjectId,"setRect",{rect:a,windowTitle:c,displayScaleFactor:d,checkForDuplicateTitles:!0},(function(e,t){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::setRect[END] - result: 0x"+e.toString(16)+", hasDuplicateWindows: "+t.hasDuplicateWindows),1==t.hasDuplicateWindows&&r.rootWindowInfoTracker.setTitleModificationEnabled(!0)}));var l=new Array;if(e.occlusionTracker){var u=new DOMRect(n.left+i.x,n.top+i.y,n.width,n.height);l=e.occlusionTracker.getClipRects(u)}if(window!=window.parent){if(n.left<0){var h=(0-n.left)*o,p=new DOMRect(a.left,a.top,h,a.bottom-a.top);l.push(p)}if(n.top<0){var m=(0-n.top)*o,f=new DOMRect(a.left,a.top,a.right-a.left,m);l.push(f)}}var M=[].concat(l,this.parentElementClipRects);s.MMR_LOG("VideoElementRedirect["+e.localObjectId+"]::setClipRects[BEGIN] - clipRects: "+JSON.stringify(M)),e.remoteObjectManager.invokeMethod(e.localObjectId,"setClipRects",{rects:M},(function(t,i){s.MMR_LOG("VideoElementRedirect["+e.localObjectId+"]::setClipRects[END] - result: 0x"+t.toString(16))}))},e.prototype.onLoad=function(){var e=a.getShimObject(this.originalElement);e.networkState!=e.NETWORK_EMPTY||null!=e.src&&""!=e.src||0!=e.sourceNodes.length||(s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::onLoad - no source so setting networkState to NETWORK_NO_SOURCE"),e.networkState=e.NETWORK_NO_SOURCE)},e.prototype.setNewMediaStream=function(e){var t,i,n,o;if(e!=this.mediaStream&&(this.mediaStream&&(this.mediaStream.removeEventListener("addtrack",this.addTrackRef),this.mediaStream.removeEventListener("removetrack",this.removeTrackRef)),this.mediaStream=e,this.mediaStream)){var r=this;this.mediaStream.addEventListener("addtrack",this.addTrackRef=function(e){r.mediaStreamTrackUpdate(e)}),this.mediaStream.addEventListener("removetrack",this.removeTrackRef=function(e){r.mediaStreamTrackUpdate(e)});var a=void 0;(null===(t=this.mediaStream)||void 0===t?void 0:t.getAudioTracks().length)>0&&(a=null===(i=this.mediaStream)||void 0===i?void 0:i.getAudioTracks()[0]),this.setAudioTrack(a);var c=void 0;(null===(n=this.mediaStream)||void 0===n?void 0:n.getVideoTracks().length)>0&&(c=null===(o=this.mediaStream)||void 0===o?void 0:o.getVideoTracks()[0]),this.setVideoTrack(c)}},e.prototype.setAudioTrack=function(e){if(e!=this.audioTrack){this.audioTrack=e;var t="",i=!1;if(this.audioTrack)t=this.audioTrack.id,i=a.getShimObject(this.audioTrack).isCaptureTrack;var n=this;s.MMR_LOG("VideoElementRedirect["+n.localObjectId+"]::setAudioTrack[BEGIN] - track: "+t),this.remoteObjectManager.invokeMethod(this.localObjectId,"setAudioTrack",{track:t,isCapture:i},(function(e,t){s.MMR_LOG("VideoElementRedirect["+n.localObjectId+"]::setAudioTrack[END] - result: 0x"+e.toString(16))}))}},e.prototype.setVideoTrack=function(e){if(e!=this.videoTrack){this.videoTrack=e;var t="",i=!1;if(this.videoTrack)t=this.videoTrack.id,i=a.getShimObject(this.videoTrack).isCaptureTrack;var n=this;s.MMR_LOG("VideoElementRedirect["+n.localObjectId+"]::setVideoTrack[BEGIN] - track: "+t+" isCapture: "+i),this.remoteObjectManager.invokeMethod(this.localObjectId,"setVideoTrack",{track:t,isCapture:i},(function(e,t){s.MMR_LOG("VideoElementRedirect["+n.localObjectId+"]::setVideoTrack[END] - result: 0x"+e.toString(16))}))}},e.prototype.mediaStreamTrackUpdate=function(e){var t,i,n,o,r=e.track.kind;if(s.MMR_LOG("VideoElementRedirect[]::mediaStreamTrackUpdate - kind: "+r),"audio"==r){var a=void 0;this.mediaStream&&(null===(t=this.mediaStream)||void 0===t?void 0:t.getAudioTracks().length)>0&&(a=null===(i=this.mediaStream)||void 0===i?void 0:i.getAudioTracks()[0]),this.setAudioTrack(a)}else if("video"==r){a=void 0;this.mediaStream&&(null===(n=this.mediaStream)||void 0===n?void 0:n.getVideoTracks().length)>0&&(a=null===(o=this.mediaStream)||void 0===o?void 0:o.getVideoTracks()[0]),this.setVideoTrack(a)}},e.prototype.cancelRemote=function(e){var t=this.localObjectId;s.MMR_LOG("VideoElementRedirect["+t+"]::cancelRemote[BEGIN]"),this.switchToLocal=!0,this.sendElementRect(this),this.remoteObjectManager.invokeMethod(t,"fallback",{message:e},(function(e,i){console.log("VideoElementRedirect["+t+"]::cancelRemote[END] - result: 0x"+e.toString(16))})),this.mutationObserver.disconnect(),this.intersectionObserver.disconnect(),this.occlusionTracker&&this.occlusionTracker.stopMonitoring(),document.removeEventListener("scroll",this.callSendElementRect),window.removeEventListener("resize",this.callSendElementRect),this.cancelElementRectUpdate()},e.prototype.setOpacityOnOriginalElement=function(e){var t=a.getShimObject(this.originalElement);if(null!=t&&null!=t.get_style_original){var i=t.get_style_original.apply(this.originalElement);console.log("VideoElementRedirect["+this.localObjectId+"]::setOpacityOnOriginalElement - "+e),i.opacity=e}},e.prototype.getVideoPlaybackQuality=function(){return new d(this.creationTime,0,0,0,0)},e.prototype.pause=function(){var e=this,t=this.localObjectId;s.MMR_LOG("VideoElementRedirect["+t+"]::pause[BEGIN]"),this.remoteObjectManager.invokeMethod(t,"pause",{type:"video"},(function(i,o){e.redirectionPlaying=n.Paused,s.MMR_LOG("VideoElementRedirect["+t+"]::pause[END] - result: 0x"+i.toString(16))}))},e.prototype.play=function(){var e=this;return s.MMR_LOG("VideoElementRedirect["+e.localObjectId+"]::play[BEGIN]"),new Promise((function(t,i){var o=function(o,r){(e.redirectionPlaying=n.NotRendering,s.MMR_LOG("VideoElementRedirect["+e.localObjectId+"]::play[END] - result: 0x"+o.toString(16)),o>=0)?(a.getShimObject(e.originalElement).paused=!1,e.videoStatusOverlayEnabled&&setTimeout((function(){e.redirectionPlaying==n.NotRendering&&e.addRedirectionFailedMessageElement()}),5e3),t()):i()};if(e.checkLocalPlaySuppressed){var r=document.createElement_original("video");r.src="invalid.mp4",r.play().then((function(){s.MMR_LOG("VideoElementRedirect["+e.localObjectId+"]::play - UNEXPECTED: local test play succeeded"),e.remoteObjectManager.invokeMethod(e.localObjectId,"play",{type:"video"},o),e.checkLocalPlaySuppressed=!1}),(function(t){"NotAllowedError"==t.name?(s.MMR_LOG("VideoElementRedirect["+e.localObjectId+"]::play - local VideoElement returned NotAllowedError, suppressing play"),i(t)):(s.MMR_LOG("VideoElementRedirect["+e.localObjectId+"]::play - sending play invoke event err="+t.name),e.remoteObjectManager.invokeMethod(e.localObjectId,"play",{type:"video"},o),e.checkLocalPlaySuppressed=!1)}))}else e.remoteObjectManager.invokeMethod(e.localObjectId,"play",{type:"video"},o)}))},e.prototype.load=function(){this.onLoad();var e=this.localObjectId,t=a.getShimObject(this.originalElement).src;s.MMR_LOG("VideoElementRedirect["+e+"]::load[BEGIN] - src:"+t),this.remoteObjectManager.invokeMethod(e,"load",{src:t},(function(t,i){s.MMR_LOG("VideoElementRedirect["+e+"]::load[END] - result: 0x"+t.toString(16))}))},e.prototype.setSinkId=function(e){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::setSinkId[BEGIN] - sinkId: "+e);var t=this;return new Promise((function(i,n){t.remoteObjectManager.invokeMethod(t.localObjectId,"setSinkId",{sinkId:e},(function(e,t){s.MMR_LOG("VideoElementRedirect["+this.localObjectId+"]::setSinkId[END] - result: 0x"+e.toString(16)),e>=0?i():n()}))}))},e.redirectionMessageElementId="redirectMessage",e.boolRedirectAttributes=["autoplay","defaultMuted","loop","muted"],e.redirectAttributes=["autoplay","audioTracks","buffered","currentTime","defaultMuted","defaultPlaybackRate","disablePictureInPicture","duration","ended","error","loop","muted","networkState","playbackRate","paused","playsinline","poster","preload","readyState","seekable","seeking","src","srcObject","textTracks","tracks","videoPlaybackQuality","videoTracks","videoWidth","videoHeight","volume"],e}();t.VideoElementRedirect=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HardcodedOcclusionTracker=t.createOcclusionTrackerForSite=t.hardcodedOcclusionDefinitions=void 0;var n=i(0),o=i(6);t.hardcodedOcclusionDefinitions={".*youtube.com.*":[{occlusionActiveElementSelector:".ytp-gradient-bottom",clippingElementSelector:".ytp-chrome-bottom"},{occlusionActiveElementSelector:".ytp-ad-skip-button-container",clippingElementSelector:".ytp-ad-skip-button-container"},{occlusionActiveElementSelector:".ytp-contextmenu",clippingElementSelector:".ytp-contextmenu"},{occlusionActiveElementSelector:".ytp-settings-menu",clippingElementSelector:".ytp-settings-menu"},{occlusionActiveElementSelector:".ytp-popup.ytp-big-mode",clippingElementSelector:".ytp-popup.ytp-big-mode"},{occlusionActiveElementSelector:".ytd-masthead",clippingElementSelector:".ytd-masthead"},{occlusionActiveElementSelector:".ytp-caption-window-bottom",clippingElementSelector:".ytp-caption-window-bottom"},{occlusionActiveElementSelector:".ytp-miniplayer-close-button",clippingElementSelector:".ytp-miniplayer-close-button"},{occlusionActiveElementSelector:".ytp-miniplayer-expand-watch-page-button",clippingElementSelector:".ytp-miniplayer-expand-watch-page-button"},{occlusionActiveElementSelector:"#contentContainer.tp-yt-app-drawer",clippingElementSelector:"#contentContainer.tp-yt-app-drawer"}]},t.createOcclusionTrackerForSite=function(e,i){for(var o=0,a=Object.entries(t.hardcodedOcclusionDefinitions);o<a.length;o++){var c=a[o],s=c[0],d=c[1],l=new RegExp(s);if(e.match(l))return n.MMR_LOG("createOcclusionTrackerForSite - url: "+e+" matched pattern: "+s+", applying hard-coded occlusion tracking"),new r(i,d)}return n.MMR_LOG("createOcclusionTrackerForSite - url: "+e+", not applicable for occlusions"),new r(i,[])};var r=function(){function e(e,t){this.occludingItemDefinitions=new Array,this.activeOcclusionTrackers=new Map,this.monitoringInterval=null,this.client=e,this.occludingItemDefinitions=t}return e.prototype.startMonitoring=function(){if(n.MMR_LOG("HardcodedOcclusionTracker::startMonitoring"),this.monitoringInterval)n.MMR_LOG("HardcodedOcclusionTracker::startMonitoring - monitoring already active");else if(this.occludingItemDefinitions.length>0){n.MMR_LOG("HardcodedOcclusionTracker::startMonitoring - starting monitoring");var e=this;this.monitoringInterval=setInterval((function(){e.tryActivatingNewOcclusionTrackers()}),1e3)}},e.prototype.stopMonitoring=function(){n.MMR_LOG("HardcodedOcclusionTracker::stopMonitoring"),this.monitoringInterval?(clearInterval(this.monitoringInterval),this.monitoringInterval=null):n.MMR_LOG("HardcodedOcclusionTracker::stopMonitoring - monitoring already stopped")},e.prototype.tryActivatingNewOcclusionTrackers=function(){var e=this,t=this;this.occludingItemDefinitions.forEach((function(i){document.querySelectorAll(i.occlusionActiveElementSelector).forEach((function(o){var r=o;t.activeOcclusionTrackers.has(r)||(n.MMR_LOG("HardcodedOcclusionTracker::tryActivatePendingOccludingTrackers - creating occlusion tracker for new element - selector: "+i.occlusionActiveElementSelector),t.activeOcclusionTrackers.set(r,new a(e,i,r)))}))}))},e.prototype.onOcclusionUpdate=function(){n.MMR_LOG("HardcodedOcclusionTracker::onOcclusionUpdate"),this.client.onOcclusionUpdate()},e.prototype.getClipRects=function(e){var t=o.rootWindowInfoTracker.getRootWindowInfo().rootOffset,i=new Array;return this.activeOcclusionTrackers.forEach((function(o){if(o.isVisible){var r=o.getClipRect();if(r.width>0&&r.height>0&&r.bottom>0&&r.right>0){var a=new DOMRect(r.left+t.x,r.top+t.y,r.width,r.height);s=e,d=(c=a).left>=s.left&&c.left<=s.right||c.right>=s.left&&c.right<=s.right||s.left>=c.left&&s.left<=c.right||s.right>=c.left&&s.right<=c.right,l=c.top>=s.top&&c.top<=s.bottom||c.bottom>=s.top&&c.bottom<=s.bottom||s.top>=c.top&&s.top<=c.bottom||s.bottom>=c.top&&s.bottom<=c.bottom,d&&l?(n.MMR_LOG("HardcodedOcclusionTracker::getClipRects("+o.definition.occlusionActiveElementSelector+") - adding clip rect: "+JSON.stringify(a)),i.push(new DOMRect(a.left,a.top,a.width,a.height))):n.MMR_LOG("HardcodedOcclusionTracker::getClipRects("+o.definition.occlusionActiveElementSelector+") - Rejecting non-intersecting clip rect:"+JSON.stringify(a)+" - video rect: "+JSON.stringify(e))}else n.MMR_LOG("HardcodedOcclusionTracker::getClipRects("+o.definition.occlusionActiveElementSelector+") - ignoring clip rect with 0 width/height/bottom/right: "+JSON.stringify(r))}var c,s,d,l})),i},e}();t.HardcodedOcclusionTracker=r;var a=function(){function e(e,t,i){this.target=i,this.client=e,this.definition=t,this.isVisible=!1;var o=this;this.intersectionObserver=new IntersectionObserver((function(e,t){e.forEach((function(e){n.MMR_LOG("OcclusionTracker("+o.definition.occlusionActiveElementSelector+"): isIntersecting: "+e.isIntersecting+", rect: "+JSON.stringify(e.boundingClientRect)),o.updateVisibilityState(e.isIntersecting)}))}),{root:null,rootMargin:"0px",threshold:0}),this.intersectionObserver.observe(this.target)}return e.prototype.getClipRect=function(){var e=this.target;return this.definition.occlusionActiveElementSelector!=this.definition.clippingElementSelector&&(e=document.querySelector(this.definition.clippingElementSelector)),null==e?(n.MMR_ERR("OcclusionTracker::getClipRect - missing clipping element for selector: "+this.definition.clippingElementSelector),new DOMRect(0,0,0,0)):e.getBoundingClientRect()},e.prototype.updateVisibilityState=function(e){this.isVisible=e,this.client.onOcclusionUpdate()},e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupMediaSourceShims=t.MediaSourceShim=void 0;var n,o=i(21),r=i(1),a=i(4),c=i(10),s=i(1),d=i(0),l=null,u=null,h=MediaSource,p=URL.createObjectURL;!function(e){e[e.unknown=0]="unknown",e[e.support=1]="support",e[e.unsupport=2]="unsupport"}(n||(n={}));var m=function(){function e(){var t=this;this.duration=NaN,this.readyState="closed",this.isMSRDCObject=!0,this.originalMediaSource=null,this.mimeTypeMap=new Map,this.playbackPathMode=r.ShimCommon.initialPlaybackPathMode,d.MMR_LOG("MediaSourceShim::MediaSourceShim"),this.originalMediaSource=new h,this.blobURL=p(this.originalMediaSource),this.mediaSourceRedirect=new o.MediaSourceRedirect(l,this,this.blobURL),u.addFallbackMediaSource(this,this.blobURL),this.postSourceOpenFallbackQueue=new Array,this.sourceBufferShims=new Array;var i=this;e.shimmedProperties.forEach((function(e){i.mediaSourceRedirect[e]=i.originalMediaSource[e],Object.defineProperty(i,e,{get:function(){var t;return t=i.playbackPathMode==r.PlaybackPathMode.LOCAL?i.originalMediaSource[e]:i.mediaSourceRedirect[e],d.MMR_LOG("MediaSourceShim["+i.fallbackObjectId+"]::get - "+e+"="+t),t},set:function(t){d.MMR_LOG("MediaSourceShim["+i.fallbackObjectId+"]::set - "+e+"="+t);var n=function(){i.originalMediaSource[e]=t},o=function(){i.mediaSourceRedirect.setAttribute(e,t)};switch(i.playbackPathMode){case r.PlaybackPathMode.REMOTE:o();break;case r.PlaybackPathMode.UNKNOWN:i.postSourceOpenFallbackQueue.push(n),o();break;case r.PlaybackPathMode.LOCAL:n()}return!0}})})),e.eventHandlers.forEach((function(e){var i="_on"+e+"eventHandler";Object.defineProperty(t,"on"+e,{get:function(){return this[i]||null},set:function(t){this[i]&&(this.removeEventListener(e,this[i],null),delete this[i]),t&&(this[i]=t,this.addEventListener(e,this[i],null))}})}))}return e.prototype.localOrRemoteExecute=function(t,i){var n=this,o=void 0,c=function(){return n.originalMediaSource[t].apply(n.originalMediaSource,i)};switch(this.playbackPathMode){case r.PlaybackPathMode.REMOTE:o=this.mediaSourceRedirect[t].apply(this.mediaSourceRedirect,i);break;case r.PlaybackPathMode.UNKNOWN:o=this.mediaSourceRedirect[t].apply(this.mediaSourceRedirect,i),e.postFallbackQueueMethods.includes(t)?u.queueFallbackFunction(this.fallbackObjectId,c,a.QueueType.POSTFALLBACK):u.queueFallbackFunction(this.fallbackObjectId,c);break;case r.PlaybackPathMode.LOCAL:o=c()}return d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::localOrRemoteExecute - functionName="+t+" args="+i+" return="+o),o},e.prototype.localOrRemoteExecuteFunctions=function(e,t,i){switch(void 0===i&&(i=a.QueueType.FALLBACK),this.playbackPathMode){case r.PlaybackPathMode.REMOTE:return t();case r.PlaybackPathMode.UNKNOWN:return u.queueFallbackFunction(this.fallbackObjectId,e,i),t();case r.PlaybackPathMode.LOCAL:return e()}},e.prototype.setFallbackObjectId=function(e){this.fallbackObjectId=e},e.prototype.switchToLocal=function(){d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::switchToLocal - playbackPathMode="+this.playbackPathMode),d.MMR_ASSERT(this.playbackPathMode==r.PlaybackPathMode.UNKNOWN),this.playbackPathMode=r.PlaybackPathMode.LOCAL;var e=this,t=function(){d.MMR_LOG("MediaSourceShim["+e.fallbackObjectId+"]::switchToLocal - executing postSourceOpenFallbackQueue"),e.postSourceOpenFallbackQueue.forEach((function(e){e()})),e.postSourceOpenFallbackQueue=void 0};if("open"==this.originalMediaSource.readyState)t();else{var i=function(){t(),e.originalMediaSource.removeEventListener("sourceopen",i)};this.originalMediaSource.addEventListener("sourceopen",i)}},e.prototype.switchToRemote=function(){d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::switchToRemote"),d.MMR_ASSERT(this.playbackPathMode==r.PlaybackPathMode.UNKNOWN),this.postSourceOpenFallbackQueue=void 0,this.playbackPathMode=r.PlaybackPathMode.REMOTE,this.sourceBufferShims.forEach((function(e){e.switchToRemote()}))},e.prototype.addSourceBuffer=function(e){if(d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::addSourceBuffer: "+e),r.ShimCommon.initialPlaybackPathMode==r.PlaybackPathMode.LOCAL)return c.setupPassthroughSourceBufferShim(this.originalMediaSource.addSourceBuffer(e));if(this.playbackPathMode==r.PlaybackPathMode.LOCAL)return this.originalMediaSource.addSourceBuffer(e);var t=this.mediaSourceRedirect.addSourceBuffer(e);if(t.setFallbackPathMode(this.playbackPathMode),this.sourceBufferShims.push(t),this.playbackPathMode==r.PlaybackPathMode.UNKNOWN){var i=this.originalMediaSource;this.postSourceOpenFallbackQueue.push((function(){var n=i.addSourceBuffer(e);t.switchToLocal(n)}))}return t},e.prototype.clearLiveSeekableRange=function(){d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::clearLiveSeekableRange[BEGIN]"),this.localOrRemoteExecute("clearLiveSeekableRange",[])},e.prototype.endOfStream=function(e){d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::endOfStream[BEGIN] - endOfStreamError: "+e),this.localOrRemoteExecute("endOfStream",[e])},e.prototype.removeSourceBuffer=function(e){d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::removeSourceBuffer[BEGIN] - sourceBuffer: "+s.tryJsonStringify(e)),this.localOrRemoteExecute("removeSourceBuffer",[e])},e.prototype.setLiveSeekableRange=function(e,t){d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::setLiveSeekableRange[BEGIN] - start: "+e+", end: "+t),this.localOrRemoteExecute("setLiveSeekableRange",[e,t])},e.prototype.addEventListener=function(e,t,i){if(d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::addEventListener - type: "+e),r.ShimCommon.initialPlaybackPathMode==r.PlaybackPathMode.LOCAL){var n=this;this.originalMediaSource.addEventListener(e,(function(){d.MMR_LOG("MediaSourceShim["+n.fallbackObjectId+"]::addEventListener[LOCAL]::addEventListener - type: "+e+" fired!")}),i)}this.localOrRemoteExecute("addEventListener",[e,t,i])},e.prototype.removeEventListener=function(e,t,i){d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::removeEventListener - type: "+e),this.localOrRemoteExecute("removeEventListener",[e,t,i])},e.prototype.dispatchEvent=function(e){return d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::dispatchEvent - type: "+e.type),this.localOrRemoteExecute("dispatchEvent",[e])},Object.defineProperty(e.prototype,"sourceBuffers",{get:function(){return d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::get sourceBuffers"),this.playbackPathMode==r.PlaybackPathMode.LOCAL?this.originalMediaSource.sourceBuffers:this.applyShimToSourceBufferList(this.mediaSourceRedirect.sourceBuffers,this.originalMediaSource.sourceBuffers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeSourceBuffers",{get:function(){return d.MMR_LOG("MediaSourceShim["+this.fallbackObjectId+"]::get activeSourceBuffers"),this.playbackPathMode==r.PlaybackPathMode.LOCAL?this.originalMediaSource.activeSourceBuffers:this.applyShimToSourceBufferList(this.mediaSourceRedirect.activeSourceBuffers,this.originalMediaSource.activeSourceBuffers)},enumerable:!1,configurable:!0}),e.prototype.applyShimToSourceBufferList=function(e,t){var i=this,n=e.addEventListener;e.addEventListener=function(o,r,c){d.MMR_LOG("SourceBufferListShim::addEventListener - type: "+o);return i.localOrRemoteExecuteFunctions((function(){return t.addEventListener(o,r,c)}),(function(){return n.apply(e,[o,r,c])}),a.QueueType.POSTFALLBACK)};var o=e.removeEventListener;return e.removeEventListener=function(n,r,c){d.MMR_LOG("SourceBufferListShim::removeEventListener - type: "+n);return i.localOrRemoteExecuteFunctions((function(){return t.removeEventListener(n,r,c)}),(function(){return o.apply(e,[n,r,c])}),a.QueueType.POSTFALLBACK)},e},e.prototype.checkIsTypeSupported=function(e){if(-1!=e.indexOf("av01")||-1!=e.indexOf("av99")||-1!=e.indexOf("hev1")||-1!=e.indexOf("hevc")||-1!=e.indexOf("opus"))return d.MMR_WARN("MediaSourceShim::isTypeSupported - reporting unsupported for mimeType: "+e),!1;var t=h.isTypeSupported(e);if(this.mimeTypeMap.has(e))this.mimeTypeMap.get(e)==n.support?t=!0:this.mimeTypeMap.get(e)==n.unsupport?t=!1:d.MMR_LOG("MediaSourceShim::checkIsTypeSupported mimeType: "+e+" waiting for result");else{this.mimeTypeMap.set(e,n.unknown);var i=this;this.mediaSourceRedirect.isTypeSupported(e).then((function(t){var o=n.unknown;o=t?n.support:n.unsupport,i.mimeTypeMap.set(e,o)}))}return t||d.MMR_WARN("MediaSourceShim::checkIsTypeSupported - reporting unsupported for mimeType: "+e),t},e.eventHandlers=["sourceopen","sourceclose","sourceended"],e.shimmedProperties=o.MediaSourceRedirect.redirectAttributes,e.postFallbackQueueMethods=["addEventListener","remoteEventListener"],e}();t.MediaSourceShim=m,t.setupMediaSourceShims=function(e,t){l=e,u=t;var i=new m;window.MediaSource=m,window.MediaSource.isTypeSupported=function(e){var t=i.checkIsTypeSupported(e);return d.MMR_LOG("setupMediaSourceShims::checkIsTypeSupported mimeType: "+e+" "+t),t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaSourceRedirect=void 0;var n=i(10),o=i(1),r=i(0),a=function(){function e(e,t,i){this.remoteObjectManager=e,this.parentShim=t,this.blobURL=i,this.duration=NaN,this.readyState="closed",this.localObjectId=0,r.MMR_LOG("MediaSourceRedirect::MediaSourceRedirect"),this.pendingSourceBufferShims=new Array,this.sourceBufferShims=new Array,this.remoteObjectManager.createObject(this,"MediaSource",{blobURL:this.blobURL}),this.sourceBuffers=new o.SourceBufferListProxy(this),this.activeSourceBuffers=new o.SourceBufferListProxy(this)}return e.prototype.setBlobURL=function(e){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::setBlobURL[BEGIN] - blobURL: "+e),this.remoteObjectManager.invokeMethod(this.localObjectId,"setBlobURL",{blobURL:e},(function(e,t){r.MMR_LOG("MediaSourceRedirect::setBlobURL[END] - result: 0x"+e.toString(16))}))},e.prototype.setLocalObjectId=function(e){this.localObjectId=e,r.MMR_ASSERT(null!=this.pendingSourceBufferShims);var t=this;this.pendingSourceBufferShims.forEach((function(i,n,o){i.setMediaSourceOwner(e),t.sourceBufferShims.push(i)})),this.pendingSourceBufferShims=null},e.prototype.getLocalObjectId=function(){return this.localObjectId},e.prototype.onRemoteObjectCreated=function(){this.sourceBufferShims.forEach((function(e,t,i){e.setMediaSourceOwner(this.localObjectId)}))},e.prototype.invokeEvent=function(e){},e.prototype.invokeEventListener=function(e,t){if(r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::invokeEventListener - type: "+e.type),null!=t.handleEvent)t.handleEvent();else{var i=this.parentShim;Object.defineProperty(e,"target",{value:i}),Object.defineProperty(e,"currentTarget",{value:i}),t.apply(i,[e])}},e.prototype.onAttributeUpdate=function(t,i){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::onAttributeUpdate - name: "+t+", value: "+o.tryJsonStringify(i)),"activeSourceBuffers"!=t?"sourceBuffers"!=t&&(e.redirectAttributes.includes(t)?this[t]="duration"==t&&null==i?1/0:i:this.parentShim[t]=i):this.onSourceBufferListUpdate(t,i)},e.prototype.onSourceBufferListUpdate=function(e,t){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::onSourceBufferListUpdate - sourceBufferRemoteObjectIdArray: "+t);var i=new Array,n=this;null!=t&&null!=t.forEach&&t.forEach((function(e,t,o){var a=e.id;r.MMR_LOG("MediaSourceRedirect::onSourceBufferListUpdate - sourceBufferRemoteObjectIdArray["+t+"]: "+e+" value[id]="+a);var c=n.sourceBuffers.sourceBuffers.find((function(e){return e.sourceBufferRedirect.localObjectId==a}));null!=c&&i.push(c)})),"activeSourceBuffers"==e&&this.activeSourceBuffers.setSourceBuffers(i)},e.prototype.onConnectionEvent=function(e){},e.prototype.isTypeSupported=function(e){var t=this;r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::isTypeSupported: "+e);var i=this;return new Promise((function(n,o){t.remoteObjectManager.invokeMethod(t.localObjectId,"isTypeSupported",{mimeType:e},(function(t,a){r.MMR_LOG("MediaSourceRedirect["+i.localObjectId+"]::isTypeSupported[END] - result: 0x"+t.toString(16)+" mimeType: "+e+a.supported),t>=0?n(a.supported):o(t)}))}))},e.prototype.addSourceBuffer=function(e){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::addSourceBuffer: "+e);var t=this.localObjectId,i=n.setupSourceBufferShim(this.remoteObjectManager,e,t);return null!=t?(this.sourceBufferShims.push(i),i.setMediaSourceOwner(t)):this.pendingSourceBufferShims.push(i),this.sourceBuffers.addSourceBuffer(i),i},e.prototype.clearLiveSeekableRange=function(){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::clearLiveSeekableRange[BEGIN]"),this.remoteObjectManager.invokeMethod(this.localObjectId,"clearLiveSeekableRange",{},(function(e,t){r.MMR_LOG("MediaSourceRedirect::clearLiveSeekableRange[END] - result: 0x"+e.toString(16))}))},e.prototype.endOfStream=function(e){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::endOfStream[BEGIN] - endOfStreamError: "+e),this.remoteObjectManager.invokeMethod(this.localObjectId,"endOfStream",{endOfStreamError:e},(function(e,t){r.MMR_LOG("MediaSourceRedirect::endOfStream[END] - result: 0x"+e.toString(16))}))},e.prototype.removeSourceBuffer=function(e){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::removeSourceBuffer[BEGIN] - sourceBuffer: "+o.tryJsonStringify(e));var t=e.getLocalObjectId();r.MMR_ASSERT(t);var i=this.remoteObjectManager.localToRemoteIdMap.get(t);r.MMR_ASSERT(i),this.remoteObjectManager.invokeMethod(this.localObjectId,"removeSourceBuffer",{sourceBufferLocalObjectId:i},(function(e,t){r.MMR_LOG("MediaSourceRedirect::removeSourceBuffer[END] - result: 0x"+e.toString(16))})),this.sourceBuffers.removeSourceBuffer(e)},e.prototype.setLiveSeekableRange=function(e,t){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::setLiveSeekableRange[BEGIN] - start: "+e+", end: "+t),this.remoteObjectManager.invokeMethod(this.localObjectId,"setLiveSeekableRange",{start:e,end:t},(function(e,t){r.MMR_LOG("MediaSourceRedirect::setLiveSeekableRange[END] - result: 0x"+e.toString(16))}))},e.prototype.setAttribute=function(e,t){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::setAttribute[BEGIN] - name: "+e+", value: "+t),this[e]=t,this.remoteObjectManager.invokeMethod(this.localObjectId,"setAttribute",{name:e,value:t},(function(e,t){r.MMR_LOG("MediaSourceRedirect::setAttribute[END] - result: 0x"+e.toString(16))}))},e.prototype.addEventListener=function(e,t,i){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::addEventListener - type: "+e),this.remoteObjectManager.addEventListener(this.localObjectId,e,t,i)},e.prototype.removeEventListener=function(e,t,i){r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::removeEventListener - type: "+e),this.remoteObjectManager.removeEventListener(this.localObjectId,e,t,i)},e.prototype.dispatchEvent=function(e){var t=null!=e.target?e.target.BufferListType:"";return r.MMR_LOG("MediaSourceRedirect["+this.localObjectId+"]::dispatchEvent - type: "+e.type+" bufferListType="+t),"sourceBuffers"==t?this.sourceBuffers.dispatchEvent(e):"activeSourceBuffers"==t?this.activeSourceBuffers.dispatchEvent(e):this.remoteObjectManager.dispatchEvent(this.localObjectId,e)},e.redirectAttributes=["duration","readyState"],e}();t.MediaSourceRedirect=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceBufferRedirect=void 0;var n=i(1),o=i(0),r=function(){function e(e,t,i,r){if(this.remoteObjectManager=e,this.parentShim=t,this.localObjectId=0,this.mediaSourceRemoteObjectId=-1,this.appendWindowEnd=Number.POSITIVE_INFINITY,this.appendWindowStart=0,this.buffered=n.createTimeRanges(new Array),this.timestampOffset=0,this.updating=!1,null!=r){var a=e.localToRemoteIdMap.get(r);o.MMR_ASSERT(null!=a),e.createObject(this,"SourceBuffer",{mimeType:i,mediaSourceRemoteObjectId:r,mediaSourceLocalObjectId:a})}else e.createObject(this,"SourceBuffer",{mimeType:i});o.MMR_LOG("SourceBufferRedirect["+this.localObjectId+"]::SourceBufferRedirect - mimeType: "+i)}return e.prototype.setLocalObjectId=function(e){this.localObjectId=e},e.prototype.getLocalObjectId=function(){return this.localObjectId},e.prototype.onRemoteObjectCreated=function(){},e.prototype.invokeEvent=function(e){},e.prototype.invokeEventListener=function(e,t){if(o.MMR_LOG("SourceBufferRedirect["+this.localObjectId+"]::invokeEventListener - type: "+e.type),null!=t.handleEvent)t.handleEvent();else{var i=this.parentShim[n.shimProxyPropertyName];Object.defineProperty(e,"target",{value:i}),Object.defineProperty(e,"currentTarget",{value:i}),t.apply(i,[e])}},e.prototype.onAttributeUpdate=function(e,t){o.MMR_LOG("SourceBufferRedirect["+this.localObjectId+"]::onAttributeUpdate - name: "+e+", value: "+n.tryJsonStringify(t)),"buffered"!=e&&"seekable"!=e||(t=n.createTimeRanges(t)),this[e]=t},e.prototype.onConnectionEvent=function(e){},e.prototype.setAttribute=function(e,t){if(o.MMR_LOG("SourceBufferRedirect["+this.localObjectId+"]::setAttribute[BEGIN] - name: "+e+", value: "+t),this[e]=t,"updating"!=e){var i=this.localObjectId;this.remoteObjectManager.invokeMethod(this.localObjectId,"setAttribute",{name:e,value:t},(function(e,t){o.MMR_LOG("SourceBufferRedirect["+i+"]::setAttribute[END] - result: 0x"+e.toString(16))}))}},e.prototype.setMediaSourceOwner=function(e){var t=this.localObjectId,i=this.remoteObjectManager.localToRemoteIdMap.get(e);o.MMR_LOG("SourceBufferRedirect["+t+"]:setMediaSourceOwner[BEGIN] - this.mediaSourceRemoteObjectId="+this.mediaSourceRemoteObjectId+", new mediaSourceRemoteObjectId="+i),o.MMR_ASSERT(null!=i),this.mediaSourceRemoteObjectId!=i&&this.remoteObjectManager.invokeMethod(t,"setMediaSourceOwner",{mediaSourceLocalObjectId:i,mediaSourceRemoteObjectId:e},(function(e,i){o.MMR_LOG("SourceBufferRedirect["+t+"]::setMediaSourceOwner[END] - result: 0x"+e.toString(16))})),this.mediaSourceRemoteObjectId=i},e.prototype.abort=function(){var e=this.localObjectId;o.MMR_LOG("SourceBufferRedirect["+e+"]::abort"),this.updating=!1,this.remoteObjectManager.invokeMethod(e,"abort",{},(function(t,i){o.MMR_LOG("SourceBufferRedirect["+e+"]::abort[END] - result: 0x"+t.toString(16))}))},e.prototype.appendBuffer=function(e){var t=this.localObjectId;o.MMR_LOG("SourceBufferRedirect["+t+"]::appendBuffer[BEGIN]:"),this.updating=!0,this.remoteObjectManager.invokeMethod(t,"appendBuffer",{dataB64Size:e.byteLength,dataB64:function(e){for(var t="",i=new Uint8Array(e),n=i.byteLength,o=0;o<n;o++)t+=String.fromCharCode(i[o]);return window.btoa(t)}(e)},(function(e,i){o.MMR_LOG("SourceBufferRedirect["+t+"]::appendBuffer[END] - result: 0x"+e.toString(16))}))},e.prototype.remove=function(e,t){var i=this.localObjectId;o.MMR_LOG("SourceBufferRedirect["+i+"]::remove - start: "+e+", end: "+t),this.updating=!0,this.remoteObjectManager.invokeMethod(i,"remove",{start:e,end:t},(function(e,t){o.MMR_LOG("SourceBufferRedirect["+i+"]::remove[END] - result: 0x"+e.toString(16))}))},e.prototype.changeType=function(e){o.MMR_LOG("SourceBufferRedirect["+this.localObjectId+"]::changeType - type: "+e),console.warn("SourceBufferRedirect::changeType: Unimplemented MSRDC shim method")},e.prototype.addEventListener=function(e,t,i){o.MMR_LOG("SourceBufferRedirect["+this.localObjectId+"]::addEventListener - type: "+e),this.remoteObjectManager.addEventListener(this.localObjectId,e,t,i)},e.prototype.removeEventListener=function(e,t,i){o.MMR_LOG("SourceBufferRedirect["+this.localObjectId+"]::removeEventListener - type: "+e),this.remoteObjectManager.removeEventListener(this.localObjectId,e,t,i)},e.prototype.dispatchEvent=function(e){return o.MMR_LOG("SourceBufferRedirect["+this.localObjectId+"]::dispatchEvent - type: "+e.type),this.remoteObjectManager.dispatchEvent(this.localObjectId,e)},e.sourceBufferRedirectAttributes=["appendWindowEnd","appendWindowStart","buffered","timestampOffset","updating"],e}();t.SourceBufferRedirect=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NativeMessagingPageProxy=void 0;var n=i(2),o=i(1),r=i(0),a=function(){function e(e){this.contentPortId=e,this.client=null,this.mmrEngaged=!1;var t=this;this.nativePortId=e,document.addEventListener(n.ProxyCommon.PROXY_RECEIVE_MESSAGE_EVENT,(function(e){t.onReceivedMessage(t.client,e.detail)})),r.MMR_LOG("NativeMessagingPageProxy::constructor")}return e.prototype.setClient=function(e){this.client=e},e.prototype.sendMessage=function(e){r.MMR_LOG("NativeMessagingPageProxy: Sending message: "+o.tryJsonStringify(e)),document.dispatchEvent(new CustomEvent(n.ProxyCommon.PROXY_SEND_MESSAGE_EVENT,{detail:e}))},e.prototype.onReceivedMessage=function(e,t){r.MMR_LOG("NativeMessagingPageProxy: Received remote message: "+o.tryJsonStringify(t)),r.MMR_ASSERT(null!=e),e.onReceivedMessage(t)},e.prototype.sendMMREngagedMessage=function(){this.mmrEngaged||(document.dispatchEvent(new CustomEvent(n.ProxyCommon.PROXY_SEND_MMR_ENGAGED,{})),this.mmrEngaged=!0)},e.prototype.sendSameOriginParentId=function(e){if(e!=this.nativePortId){r.MMR_LOG("NativeMessagingPageProxy: send message for Same Origin Parent, parentNativePortId="+e),this.nativePortId=e;var t={parentNativePortId:e};document.dispatchEvent(new CustomEvent(n.ProxyCommon.PROXY_SEND_SAME_ORIGIN_PARENT_ID,{detail:t}));var i=new Object;i.messageType=n.ProxyCommon.CONTENT_BG_SAME_ORIGIN_PARENT_MESSAGE_TYPE,r.MMR_ASSERT(null!=this.client),null!=this.client&&this.client.onReceivedMessage(i)}},e}();t.NativeMessagingPageProxy=a},function(e,t,i){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],a=0,c=r.length;a<c;a++,o++)n[o]=r[a];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteObjectManager=t.RemoteMessageTypes=void 0;var o,r=i(0),a=i(1),c=i(2);!function(e){e.CREATE_OBJECT="createObject",e.CREATE_OBJECT_RESPONSE="createObject",e.INVOKE_METHOD="invokeMethod",e.INVOKE_METHOD_RESPONSE="invokeMethodResponse",e.ON_EVENT="onEvent",e.ON_ATTRIBUTE_UPDATE="onAttributeUpdate",e.ON_CONNECTION_EVENT="onConnectionEvent"}(o=t.RemoteMessageTypes||(t.RemoteMessageTypes={}));var s=function(e,t){this.callback=e,this.messageObject=t},d=function(){function e(e,t){this.proxy=e,this.nextLocalObjectId=0,this.nextMethodCallId=0,this.isConnected=!0,this.webRtcSupportVersion=0,this.proxy=e,this.proxy.setClient(this),this.localObjectMap=new Map,this.localToRemoteIdMap=new Map,this.remoteToLocalObjectMap=new Map,this.queuedMethodCalls=new Map,this.pendingMethodCalls=new Map,this.eventListeners=new Map,this.webRtcSupportVersion=t,this.messageHistoryQueue=new Array,this.resendMessageQueue=new Array;var i=this;setTimeout((function(){r.MMR_LOG("RemoteObjectManager:: historyMessages 2 sec timeout, contentPortID: "+i.proxy.contentPortId),delete i.messageHistoryQueue}),2e3)}return e.prototype.checkForResendMessages=function(){var e=new Array,t=!1,i=this;this.resendMessageQueue.forEach((function(n,c,s){var d=n.messageType;r.MMR_ASSERT(null!=d);var l=n.remoteObjectId;if(r.MMR_ASSERT(null!=l),d==o.CREATE_OBJECT){if("SourceBuffer"==n.objectType&&delete n.args.mediaSourceLocalObjectId,i.proxy.sendMessage(n),r.MMR_LOG("MsRdcMmr::RemoteObjectManager::checkForResendMessages resend: "+a.tryJsonStringify(n)),i.localToRemoteIdMap.has(l)){var u=i.localToRemoteIdMap.get(l);i.localToRemoteIdMap.delete(l),i.remoteToLocalObjectMap.has(u)&&i.remoteToLocalObjectMap.delete(u)}}else if(d!=o.INVOKE_METHOD||t)e.push(n),r.MMR_LOG("MsRdcMmr::RemoteObjectManager::checkForResendMessages save: "+a.tryJsonStringify(n));else if(i.localToRemoteIdMap.has(l)){var h=!0;if("setMediaSourceOwner"==n.methodName){var p=n.args;if(null!=p.mediaSourceLocalObjectId&&null!=p.mediaSourceRemoteObjectId){var m=p.mediaSourceRemoteObjectId;i.localToRemoteIdMap.has(m)?(p.mediaSourceLocalObjectId=i.localToRemoteIdMap.get(m),n.args=p):(h=!1,t=!0,e.push(n),r.MMR_LOG("MsRdcMmr::RemoteObjectManager::checkForResendMessages save: "+a.tryJsonStringify(n)))}else h=!1,r.MMR_LOG("MsRdcMmr::RemoteObjectManager::checkForResendMessages drop: "+a.tryJsonStringify(n))}h&&(r.MMR_LOG("MsRdcMmr::RemoteObjectManager::checkForResendMessages resend: "+a.tryJsonStringify(n)),i.proxy.sendMessage(n))}else t=!0,e.push(n),r.MMR_LOG("MsRdcMmr::RemoteObjectManager::checkForResendMessages save: "+a.tryJsonStringify(n))})),this.resendMessageQueue=n(e),0!=this.resendMessageQueue.length&&r.MMR_LOG("MsRdcMmr::RemoteObjectManager::checkForResendMessages messages left: "+this.resendMessageQueue.length+" contentPortID: "+this.proxy.contentPortId)},e.prototype.onConnectionEvent=function(e){r.MMR_LOG("RemoteObjectManager::onConnectionEvent - eventType: "+e),"clientConnected"==e?this.isConnected=!0:"clientDisconnected"==e&&(this.isConnected=!1)},e.prototype.createObject=function(e,t,i){var n=new Object;n.messageType=o.CREATE_OBJECT,n.objectType=t,n.remoteObjectId=this.nextLocalObjectId,n.contentPortId=this.proxy.contentPortId,i.webrtcSupportVersion=this.webRtcSupportVersion,n.args=i,this.localObjectMap.set(this.nextLocalObjectId,e),e.setLocalObjectId(this.nextLocalObjectId),this.nextLocalObjectId=this.nextLocalObjectId+1,this.proxy.sendMessage(n),null!=this.messageHistoryQueue&&this.messageHistoryQueue.push(n)},e.prototype.invokeMethod=function(e,t,i,n){if(!this.isConnected)return r.MMR_WARN("RemoteObjectManager::invokeMethod - dropping method call while disconnected"),void n(-9,{});var a=new Object;a.messageType=o.INVOKE_METHOD,a.methodName=t,a.remoteObjectId=e,a.methodCallId=this.nextMethodCallId,a.args=i,this.nextMethodCallId=this.nextMethodCallId+1,this.checkForResendMessages(),0==this.resendMessageQueue.length&&this.localToRemoteIdMap.has(e)?this.invokeMethodInternal(n,a):(r.MMR_LOG("MsRdcMmr::RemoteObjectManager: Queueing method call on local object: "+e+" contentPortID: "+this.proxy.contentPortId),this.queuedMethodCalls.has(e)||this.queuedMethodCalls.set(e,new Array),this.queuedMethodCalls.get(e).push(new s(n,a)))},e.prototype.invokeMethodInternal=function(e,t){if("setMediaSourceOwner"==t.methodName){var i=t.args;if(null!=i.mediaSourceLocalObjectId&&null!=i.mediaSourceRemoteObjectId){var n=i.mediaSourceRemoteObjectId;this.localToRemoteIdMap.has(n)?(i.mediaSourceLocalObjectId=this.localToRemoteIdMap.get(n),t.args=i):r.MMR_WARN("MsRdcMmr::RemoteObjectManager: Invoking method id: "+t.methodCallId+" contentPortID: "+this.proxy.contentPortId+" setMediaSourceOwner fails because mediaSource was not created")}else r.MMR_WARN("MsRdcMmr::RemoteObjectManager: Invoking method id: "+t.methodCallId+" contentPortID: "+this.proxy.contentPortId+" invalid setMediaSourceOwner message")}var o=t.methodCallId;r.MMR_ASSERT(null!=o),r.MMR_ASSERT(null!=t.remoteObjectId);var a=this.localToRemoteIdMap.get(t.remoteObjectId);r.MMR_ASSERT(null!=a),t.localObjectId=a,r.MMR_LOG("MsRdcMmr::RemoteObjectManager: Invoking method id: "+o+", localObjectId: "+a+" contentPortID: "+this.proxy.contentPortId),this.proxy.sendMessage(t),this.pendingMethodCalls.set(o,new s(e,t)),null!=this.messageHistoryQueue&&this.messageHistoryQueue.push(t)},e.prototype.onReceivedMessage=function(e){var t=e.messageType;if(r.MMR_ASSERT(null!=t),r.MMR_LOG("MsRdcMmr::RemoteObjectManager: Received message type: "+t),t==o.CREATE_OBJECT_RESPONSE){var i=e.remoteObjectId;r.MMR_ASSERT(null!=i);var a=e.localObjectId;r.MMR_ASSERT(null!=a);var s=this.localObjectMap.get(a);if(r.MMR_ASSERT(null!=s),this.localToRemoteIdMap.set(a,i),this.remoteToLocalObjectMap.set(i,s),r.MMR_LOG("MsRdcMmr::RemoteObjectManager: Object created (localObjectId: "+a+", remoteObjectId: "+i+")"),s.onRemoteObjectCreated(),this.proxy.sendMMREngagedMessage(),this.checkForResendMessages(),0==this.resendMessageQueue.length){var d=this;this.queuedMethodCalls.forEach((function(e,t){d.localToRemoteIdMap.has(t)&&(r.MMR_LOG("MsRdcMmr::RemoteObjectManager: Invoking queued method calls (count: "+e.length+")"),e.forEach((function(e,t,i){d.invokeMethodInternal(e.callback,e.messageObject)})),d.queuedMethodCalls.delete(t))}))}}else if(t==o.INVOKE_METHOD_RESPONSE){var l=e.methodCallId;r.MMR_ASSERT(null!=l);i=e.remoteObjectId;r.MMR_ASSERT(null!=i);s=this.remoteToLocalObjectMap.get(i);r.MMR_ASSERT(null!=s);var u=e.result;r.MMR_ASSERT(null!=u);var h=e.args;r.MMR_ASSERT(null!=h);var p=this.pendingMethodCalls.get(l);if(null==p)return void r.MMR_WARN("MsRdcMmr::RemoteObjectManager: (invokeMethodResponse) missing pendingMethodCall for methodCallId="+l+" remoteObjectId="+i);p.callback(u,h),this.pendingMethodCalls.delete(l)}else if(t==o.ON_EVENT){i=e.remoteObjectId;r.MMR_ASSERT(null!=i);s=this.remoteToLocalObjectMap.get(i);r.MMR_ASSERT(null!=s);var m=e.type;r.MMR_ASSERT(null!=m);var f=e.args;r.MMR_ASSERT(null!=f);var M=new CustomEvent(m,f);this.dispatchEvent(s.getLocalObjectId(),M)}else if(t==o.ON_ATTRIBUTE_UPDATE){i=e.remoteObjectId;r.MMR_ASSERT(null!=i);s=this.remoteToLocalObjectMap.get(i);r.MMR_ASSERT(null!=s);var b=e.name;r.MMR_ASSERT(null!=b);var g=e.value;r.MMR_ASSERT(null!=g||"duration"==b),s.onAttributeUpdate(b,g)}else if(t==o.ON_CONNECTION_EVENT){var O=e.event;if(r.MMR_ASSERT(null!=O),this.onConnectionEvent(O),null!=(i=e.remoteObjectId)){s=this.remoteToLocalObjectMap.get(i);r.MMR_ASSERT(null!=s),s.onConnectionEvent(O)}else this.localObjectMap.forEach((function(e,t,i){e.onConnectionEvent(O)}))}else t==c.ProxyCommon.CONTENT_BG_SAME_ORIGIN_PARENT_MESSAGE_TYPE&&(r.MMR_LOG("MsRdcMmr::RemoteObjectManager::onReceivedMessage - CONTENT_BG_SAME_ORIGIN_PARENT_MESSAGE_TYPE, resend messages: "+this.messageHistoryQueue.length+" contentPortID: "+this.proxy.contentPortId),this.resendMessageQueue.splice(0),this.resendMessageQueue=n(this.messageHistoryQueue),this.checkForResendMessages())},e.prototype.addEventListener=function(e,t,i,n,o){r.MMR_LOG("MsRdcMmr::RemoteObjectManager::addEventListener - type: "+t+", localObjectId: "+e),this.eventListeners.has(e)||this.eventListeners.set(e,new Map),this.eventListeners.get(e).has(t)||this.eventListeners.get(e).set(t,new Array),this.eventListeners.get(e).get(t).push(i)},e.prototype.removeEventListener=function(e,t,i,n){if(r.MMR_LOG("MsRdcMmr::RemoteObjectManager::removeEventListener"),this.eventListeners.has(e)){var o=this.eventListeners.get(e);if(o.has(t)){var a=o.get(t),c=a.indexOf(i);null!=c?(r.MMR_LOG("MsRdcMmr::RemoteObjectManager::removeEventListener - removing listener for localObjectId: "+e+", type: "+t),a.splice(c,1)):r.MMR_WARN("MsRdcMmr::RemoteObjectManager::removeEventListener - specified listener not found for localObjectId: "+e+", type: "+t)}else r.MMR_WARN("MsRdcMmr::RemoteObjectManager::removeEventListener - no event listeners registered for localObjectId: "+e+", type: "+t)}else r.MMR_WARN("MsRdcMmr::RemoteObjectManager::removeEventListener - localObjectId: "+e+" not registered")},e.prototype.dispatchEvent=function(e,t){if(r.MMR_LOG("MsRdcMmr::RemoteObjectManager::dispatchEvent - targetObjectId: "+e+", event.type: "+t.type),null==t.type)throw"UNSPECIFIED_EVENT_TYPE_ERR";var i=this.localObjectMap.get(e);if(i.invokeEvent(t),this.eventListeners.has(e)){var n=this.eventListeners.get(e);if(n.has(t.type)){var o=!1;return n.get(t.type).forEach((function(e,n,a){r.MMR_ASSERT(null!=i),o=!i.invokeEventListener(t,e)})),!(o=o&&t.cancelable)}r.MMR_LOG("MsRdcMmr::RemoteObjectManager::dispatchEvent - no listeners registered for type: "+t.type+", targetLocalObjectId: "+e)}else r.MMR_WARN("MsRdcMmr::RemoteObjectManager::dispatchEvent - no listeners registered for targetLocalObjectId: "+e)},e.prototype.cancelPendingCalls=function(e){this.pendingMethodCalls.forEach((function(t,i){t.messageObject.remoteObjectId==e&&(r.MMR_LOG("Aborting call: "+a.tryJsonStringify(t.messageObject)),t.callback(-9,{}),this.pendingMethodCalls.delete(i))}))},e}();t.RemoteObjectManager=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterPageLogger=void 0;var n=i(0),o=function(){function e(){this.cachedLogs=new Array,this.flushLogsInterval=null,this.scheduleLogFlushTimer()}return e.prototype.scheduleLogFlushTimer=function(){var t=this;t.flushLogsInterval?console.log("PageLogger::scheduleLogFlush - timer already scheduled"):(console.log("PageLogger::scheduleLogFlush - scheduling timer"),t.flushLogsInterval=setInterval((function(){t.flushLogs()}),e.LOG_FLUSH_INTERVAL_MS))},e.prototype.cancelLogFlushTimer=function(){this.flushLogsInterval?(console.log("PageLogger::scheduleLogFlush - clearing existing timer"),clearInterval(this.flushLogsInterval),this.flushLogsInterval=null):console.log("PageLogger::scheduleLogFlush - timer already cleared")},e.prototype.Log=function(e){console.log(e),this.addToLogCache(n.CachedLogEntryType.INFO,e)},e.prototype.Error=function(e){console.error(e),this.addToLogCache(n.CachedLogEntryType.ERROR,e)},e.prototype.Warn=function(e){console.warn(e),this.addToLogCache(n.CachedLogEntryType.WARNING,e)},e.prototype.Assert=function(e){if(!n.LoggingCommon.Assert(e)){var t=n.LoggingCommon.GetAssertLog();document.dispatchEvent(new CustomEvent(n.LoggingCommon.LOGGING_PAGE_TO_CONTENT_EVENT,{detail:t}))}},e.prototype.addToLogCache=function(t,i){this.cachedLogs.push(new n.CachedLogEntry(t,i)),this.cachedLogs.length>=e.MAX_CACHE_ENTRIES&&this.flushLogs()},e.prototype.flushLogs=function(){var e={};e.type=n.LoggingCommon.FLUSH_LOGS_MESSAGE_TYPE,e.entries=this.cachedLogs,document.dispatchEvent(new CustomEvent(n.LoggingCommon.LOGGING_PAGE_TO_CONTENT_EVENT,{detail:e})),this.cachedLogs=new Array},e.MAX_CACHE_ENTRIES=100,e.LOG_FLUSH_INTERVAL_MS=5e3,e}();t.RegisterPageLogger=function(){n.InitializeLogger(new o)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootWindowInfoTracker=void 0;var n=i(0);var o=function(){function e(e){this.nativeMessagingPageProxy=e,this.rootWindowOffset=new DOMRect(0,0,0,0),this.rootWindowTitle=void 0,this.titleModificationEnabled=!1,this.uniqueId=null,this.listenForSetInfo();var t=this;new MutationObserver((function(e,t){for(var i=0,n=e;i<n.length;i++){var o=n[i];if("childList"===o.type)for(var r=0,a=o.addedNodes;r<a.length;r++){var c=a[r];"iframe"==c.nodeName&&this.setParentInfoOnChild(c)}}})).observe(window.document,{childList:!0,subtree:!0}),setInterval((function(){t.setParentInfoOnChildren()}),1e3)}return e.prototype.getRootWindowTitle=function(){return null!=this.rootWindowTitle?(n.MMR_LOG("rootWindowInfoTracker title:"+this.rootWindowTitle),this.rootWindowTitle):(""==window.document.title&&(n.MMR_LOG("rootWindowInfoTracker no title, setTitleModificationEnabled"),this.setTitleModificationEnabled(!0)),!this.titleModificationEnabled&&window.document.title.includes("Microsoft Teams")&&(n.MMR_LOG("listenForSetInfo - setting titleModifcationEnabled to true for special case title="+window.document.title),this.setTitleModificationEnabled(!0)),n.MMR_LOG("rootWindowInfoTracker title:"+window.document.title),window.document.title)},e.prototype.getRootWindowInfo=function(){var e=new Object;return e.rootOffset=this.rootWindowOffset,e.title=this.getRootWindowTitle(),e},e.prototype.setParentInfoOnChildren=function(){for(var e=window.document.getElementsByTagName("iframe"),t=0;t<e.length;t++)this.setParentInfoOnChild(e[t])},e.prototype.setParentInfoOnChild=function(e){var t=new DOMRect(0,0,0,0);t.x=this.rootWindowOffset.x,t.y=this.rootWindowOffset.y;var i=e.getBoundingClientRect();t.x+=i.x,t.y+=i.y;var n=this.getRootWindowTitle(),o=this.nativeMessagingPageProxy.nativePortId,r=self.origin;e.contentWindow.postMessage({rootOffset:t,rootTitle:n,rootNativePortId:o,rootOrigin:r},"*")},e.prototype.listenForSetInfo=function(){var e=this;window.addEventListener("message",(function(t){null!=t.data&&null!=t.data.rootOffset&&null!=t.data.rootTitle?(e.rootWindowOffset=t.data.rootOffset,e.rootWindowTitle=t.data.rootTitle,n.MMR_ASSERT(null!=t.data.rootNativePortId),n.MMR_ASSERT(null!=t.data.rootOrigin),e.updateParentSameOrigin(t.data.rootNativePortId,t.data.rootOrigin)):null!=t.data&&null!=t.data.titleModificationEnabled&&(n.MMR_LOG("listenForSetInfo - updating titleModificationEnabled: "+t.data.titleModificationEnabled),e.setTitleModificationEnabled(t.data.titleModificationEnabled))}))},e.prototype.updateParentSameOrigin=function(e,t){console.log("updateParentSameOrigin - this.origin="+self.origin+" parentOrigin="+t+" currentPortId="+this.nativeMessagingPageProxy.nativePortId+" parentContentPortId="+e),self.origin==t&&this.nativeMessagingPageProxy.nativePortId!=e&&this.nativeMessagingPageProxy.sendSameOriginParentId(e)},e.prototype.setTitleModificationEnabled=function(e){this.titleModificationEnabled=e,window.parent!=window?this.setTitleModInfoOnParent():this.updateTitleModLocal()},e.prototype.updateTitleModLocal=function(){this.titleModificationEnabled&&null==this.uniqueId&&(this.uniqueId="xxxx-xxxx-xxx-xxxx".replace(/[x]/g,(function(e){return Math.floor(16*Math.random()).toString(16)})));var e=" ["+this.uniqueId+"]",t=-1!=window.document.title.indexOf(e);this.titleModificationEnabled&&!t?window.document.title+=e:!this.titleModificationEnabled&&t&&(window.document.title=window.document.title.replace(e,"")),n.MMR_LOG("updateTitleModLocal: titleModificationEnabled: "+this.titleModificationEnabled+" window.document.title: "+window.document.title)},e.prototype.setTitleModInfoOnParent=function(){n.MMR_LOG("setTitleModInfoOnParent: titleModificationEnabled: "+this.titleModificationEnabled),n.MMR_ASSERT(null!=window.parent),window.parent.postMessage({titleModificationEnabled:this.titleModificationEnabled},"*")},e}();t.RootWindowInfoTracker=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupMediaDevicesShims=t.MediaDevicesRedirect=void 0;var n=i(1),o=i(7),r=function(){function e(e){switch(this.deviceId=e.deviceId,this.groupId=e.groupId,this.label=e.label,e.kind){case 0:this.kind="audioinput";break;case 1:this.kind="audiooutput";break;case 2:this.kind="videoinput"}}return e.prototype.toJSON=function(){return this},e}(),a=function(){function e(e,t){this.remoteObjectManager=e,this.localObjectId=0,this.createdRemoteObject=!1,this.remoteObjectActive=!1,this._ondevicechange=null,this.disconnected=!1,console.log("MediaDevicesRedirect constructor"),this.originalMediaDevices=navigator.mediaDevices,this.occlusionSupportVersion=t}return e.prototype.ensureObjectCreated=function(){this.createdRemoteObject||(this.createdRemoteObject=!0,this.remoteObjectManager.createObject(this,"MediaDevices",{occlusionSupportVersion:this.occlusionSupportVersion}))},e.prototype.setLocalObjectId=function(e){this.localObjectId=e},e.prototype.getLocalObjectId=function(){return this.localObjectId},e.prototype.onRemoteObjectCreated=function(){this.remoteObjectActive=!0},e.prototype.invokeEvent=function(e){},e.prototype.invokeEventListener=function(e,t){console.log("MediaDevicesRedirect::invokeEventListener - type: "+e.type),null!=t.handleEvent?t.handleEvent():(Object.defineProperty(e,"target",{value:this}),Object.defineProperty(e,"currentTarget",{value:this}),t(e))},e.prototype.onAttributeUpdate=function(e,t){console.log("MediaDevicesRedirect::onAttributeUpdate - name: "+e+", value: "+n.tryJsonStringify(t))},e.prototype.onConnectionEvent=function(e){"clientConnected"==e?(console.log("MediaDevicesRedirect::onConnectionEvent - clientConnected"),this.disconnected&&(this.disconnected=!1,this.SendConnectionStateChangedEvent("connected"),this.createdRemoteObject=!1)):"clientDisconnected"==e&&(this.disconnected=!0,this.remoteObjectManager.cancelPendingCalls(this.localObjectId),this.remoteObjectActive=!1,this.SendConnectionStateChangedEvent("disconnected"))},Object.defineProperty(e.prototype,"ondevicechange",{get:function(){return this._ondevicechange},set:function(e){this._ondevicechange&&(this.removeEventListener("devicechange",this._ondevicechange,null),delete this._ondevicechange),e&&this.addEventListener("devicechange",this._ondevicechange=e,null)},enumerable:!1,configurable:!0}),e.prototype.enumerateDevices=function(){var e=n.getShimObject(this)?n.getShimObject(this):this;return console.log("MediaDevicesRedirect::enumerateDevices[BEGIN] - Local object id: "+JSON.stringify(e.localObjectId)),new Promise((function(t,i){e.ensureObjectCreated(),e.remoteObjectManager.invokeMethod(e.localObjectId,"enumerateDevices",{},(function(e,o){if(console.log("MediaDevicesRedirect::enumerateDevices[END] - result: 0x"+e.toString(16)+" args: "+n.tryJsonStringify(o)),e>=0){var a=[];if(o)o.forEach((function(e){a.push(new r(e))}));t(a)}else i(n.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.getSupportedConstraints=function(){return{deviceId:!0}},e.prototype.getUserMedia=function(e){var t=n.getShimObject(this)?n.getShimObject(this):this;return console.log("MediaDevicesRedirect::getUserMedia[BEGIN] - constraints: "+JSON.stringify(e)+" - Local object id: "+JSON.stringify(t.localObjectId)),new Promise((function(i,r){t.ensureObjectCreated(),t.remoteObjectManager.invokeMethod(t.localObjectId,"getUserMedia",{constraints:e},(function(e,a){if(console.log("MediaDevicesRedirect::getUserMedia[END] - result: 0x"+e.toString(16)+" - args: "+JSON.stringify(a)),e>=0){var c=new MediaStream;if(null!=a.streamId){var s=o.createMediaStreamShim(c,a.streamId);a.tracks.forEach((function(e){o.createTrackRedirectOnMediaStream(t.remoteObjectManager,c,e.trackId,e.trackLabel,e.settings,e.kind)})),i(s)}else{s=o.createMediaStreamShim(c,a.streamIds[0]);o.createTrackRedirectOnMediaStream(t.remoteObjectManager,c,a.trackId,a.trackLabel,a.settings,a.kind),i(s)}}else r(n.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.addEventListener=function(e,t,i){console.log("MediaDevicesRedirect::addEventListener - type: "+e);var o=n.getShimObject(this)?n.getShimObject(this):this;o.ensureObjectCreated(),o.remoteObjectManager.addEventListener(o.localObjectId,e,t,i)},e.prototype.removeEventListener=function(e,t,i){console.log("MediaDevicesRedirect::removeEventListener - type: "+e);var o=n.getShimObject(this)?n.getShimObject(this):this;o.ensureObjectCreated(),o.remoteObjectManager.removeEventListener(o.localObjectId,e,t,i)},e.prototype.dispatchEvent=function(e){console.log("MediaDevicesRedirect::dispatchEvent - type: "+e.type);var t=n.getShimObject(this)?n.getShimObject(this):this;return t.ensureObjectCreated(),t.remoteObjectManager.dispatchEvent(t.localObjectId,e)},e.prototype.SendConnectionStateChangedEvent=function(e){console.log("MediaDevicesRedirect Sending connection state changed event - state: "+e);var t=new CustomEvent("rdpClientConnectionStateChanged",{detail:{state:e}});this.dispatchEvent(t)},e}();t.MediaDevicesRedirect=a,t.setupMediaDevicesShims=function(e,t,i){console.log("Shimming media devices");var o=new a(e,i);window.navigator.mediaDevices[n.shimPropertyName]=o,["enumerateDevices","getSupportedConstraints","getUserMedia","addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){window.navigator.mediaDevices[e]=o[e]})),window.navigator.mediaDevices.isRemote=!0}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shimAudioClass=t.setupAudioElementShims=t.AudioElementShim=void 0;var n=i(1),o=i(29),r=i(4),a=i(0),c=function(){function e(t){var i=new e.originalAudioClass;return d(e.remoteObjectManager,e.fallbackObjectManager,e.occlusionSupportVersion,i),null!=t&&(i.src=t),i}return e.originalAudioClass=Audio,e}(),s=function(){function e(t,i,r,c){this.remoteObjectManager=t,this.fallbackObjectManager=i,this.originalElement=c,this.duration=NaN,this.readyState=0,this.seeking=!1,this.nodeType=Node.ELEMENT_NODE,this.tagName="audio",this.originalSetters={},this.playbackPathMode=n.ShimCommon.initialPlaybackPathMode,a.MMR_LOG("AudioElementShim::AudioElementShim"),this.playbackPathMode!=n.PlaybackPathMode.LOCAL&&(this.audioElementRedirect=new o.AudioElementRedirect(t,c,r)),this.ownerDocument=window.document,this.fallbackObjectManager.addFallbackVideoElement(this),this.originalElement[n.shimPropertyName]=this,this.textTracks=new n.TextTrackListProxy,this.buffered=n.createTimeRanges(new Object),this.seekable=n.createTimeRanges(new Object);var s=this;e.shimmedMethods.forEach((function(e){s[e+"_original"]=c[e],c[e]=s[e]})),this.setIdlAttribute_original=function(e,t){return null!=s.originalSetters["set_"+e+"_original"]?s.originalSetters["set_"+e+"_original"].apply(c,[t]):(c[e+"_noshim_"]=t,!0)},e.shimmedProperties.forEach((function(t){var i=c[t],o=c.__lookupGetter__(t);null==o&&(o=function(){return c[t+"_noshim_"]}),s.originalSetters["set_"+t+"_original"]=c.__lookupSetter__(t);var r=e.boolShimmedProperties.includes(t)?function(e){s.setIdlAttribute(t,!!e)}:function(e){s.setIdlAttribute(t,e)};Object.defineProperty(c,t,{get:function(){return s.playbackPathMode==n.PlaybackPathMode.LOCAL?o.apply(c):(a.MMR_LOG("AudioElementShim["+s.fallbackObjectId+"]::get - "+t+"="+s[t]),s[t])},set:function(e){return a.MMR_LOG("AudioElementShim["+s.fallbackObjectId+"]::set - "+t+"="+e),r(e),!0}});var d=e.boolShimmedProperties.includes(t)?!!i:i;s[t]=d,"src"==t&&null!=d&&""!=d&&s.switchToLocal(),s.playbackPathMode!=n.PlaybackPathMode.LOCAL&&s.audioElementRedirect.setIdlAttribute.apply(s.audioElementRedirect,[t,d])})),e.eventHandlers.forEach((function(e){var t="_on"+e+"eventHandler";Object.defineProperty(c,"on"+e,{get:function(){return s[t]||null},set:function(i){return null!=s[t]&&(s.removeEventListener(e,s[t],null),delete s[t]),null!=i&&(s[t]=i,s.addEventListener(e,s[t],null)),!0}})}))}return e.prototype.setFallbackObjectId=function(e){a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::fallbackObjectId"),this.fallbackObjectId=e},e.prototype.switchToLocal=function(){a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::switchToLocal"),this.playbackPathMode==n.PlaybackPathMode.UNKNOWN&&(this.audioElementRedirect.cancelRemote(),this.playbackPathMode=n.PlaybackPathMode.LOCAL,this.fallbackObjectManager.switchToLocal(this.fallbackObjectId))},e.prototype.switchToRemote=function(){a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::switchToRemote"),this.playbackPathMode==n.PlaybackPathMode.UNKNOWN&&(this.playbackPathMode=n.PlaybackPathMode.REMOTE,this.fallbackObjectManager.switchToRemote(this.fallbackObjectId))},e.prototype.appendChild=function(e){a.MMR_LOG("AudioElementShim::appendChild: "+e.nodeName);var t=n.getShimObject(this)?n.getShimObject(this):this;t.appendChild_original.apply(t.originalElement,[e]),"SOURCE"==e.nodeName&&t.switchToLocal()},e.prototype.localOrRemoteExecute=function(t,i){var o=this;a.MMR_ASSERT(e.shimmedMethods.includes(t)||"setIdlAttribute"==t);var c=void 0,s=function(){return o[t+"_original"].apply(o.originalElement,i)};switch(this.playbackPathMode){case n.PlaybackPathMode.REMOTE:c=this.audioElementRedirect[t].apply(this.audioElementRedirect,i);break;case n.PlaybackPathMode.UNKNOWN:c=this.audioElementRedirect[t].apply(this.audioElementRedirect,i),e.postFallbackQueueMethods.includes(t)?this.fallbackObjectManager.queueFallbackFunction(this.fallbackObjectId,s,r.QueueType.POSTFALLBACK):this.fallbackObjectManager.queueFallbackFunction(this.fallbackObjectId,s);break;case n.PlaybackPathMode.LOCAL:c=s()}return a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::localOrRemoteExecute - functionName="+t+" args="+i+" return="+c),c},e.prototype.localOrRemoteExecuteFunctions=function(e,t){switch(this.playbackPathMode){case n.PlaybackPathMode.REMOTE:return t();case n.PlaybackPathMode.UNKNOWN:return this.fallbackObjectManager.queueFallbackFunction(this.fallbackObjectId,e),t();case n.PlaybackPathMode.LOCAL:return e()}},e.prototype.setContentAttribute=function(e,t){a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::setContentAttribute - name: "+e+", value: "+t),this.playbackPathMode==n.PlaybackPathMode.UNKNOWN&&"src"==e&&null!=t&&""!=t&&this.switchToLocal(),this.playbackPathMode!=n.PlaybackPathMode.LOCAL&&this.audioElementRedirect.onContentAttributeUpdated(e,t)},e.prototype.setIdlAttribute=function(e,t){a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::setIdlAttribute - name: "+e+", value: "+t),this[e]=t,"srcObject"==e?null!=t&&(!0===t.isMSRDCObject?this.switchToRemote():(a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::setIdlAttribute - srcObject being set to non-WebRTC object"),this.switchToLocal())):"src"==e&&null!=t&&""!=t&&this.switchToLocal(),this.localOrRemoteExecute("setIdlAttribute",[e,t])},e.prototype.setAttribute=function(e,t){a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::setAttribute - name: "+e+", value: "+t);var i=n.getShimObject(this)?n.getShimObject(this):this;i.setAttribute_original.apply(i.originalElement,[e,t]),i.setContentAttribute(e,t)},e.prototype.removeAttribute=function(e){a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::removeAttribute - name: "+e);var t=n.getShimObject(this)?n.getShimObject(this):this;t.removeAttribute_original.apply(t.originalElement,[e]),t.setContentAttribute(e,void 0)},e.prototype.pause=function(){a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::pause");var e=n.getShimObject(this)?n.getShimObject(this):this;e.playbackPathMode!=n.PlaybackPathMode.LOCAL&&(n.getShimObject(this).paused=!0),e.localOrRemoteExecute("pause",[])},e.prototype.play=function(){a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::play");var e=n.getShimObject(this)?n.getShimObject(this):this;return e.playbackPathMode!=n.PlaybackPathMode.LOCAL&&(n.getShimObject(this).paused=!1),new Promise((function(t,i){e.localOrRemoteExecuteFunctions((function(){e.play_original.apply(e.originalElement).then((function(e){t()})).catch((function(e){i(e)}))}),(function(){e.audioElementRedirect.play().then((function(e){t()})).catch((function(e){i(e)}))}))}))},e.prototype.setSinkId=function(e){var t=n.getShimObject(this)?n.getShimObject(this):this;return a.MMR_LOG("AudioElementShim["+this.fallbackObjectId+"]::setSinkId: elementId: "+t.originalElement.id),new Promise((function(i,n){t.localOrRemoteExecuteFunctions((function(){a.MMR_LOG("Accepting the requested device id when executing setSinkId on local element"),i()}),(function(){t.audioElementRedirect.setSinkId(e).then((function(e){i()})).catch((function(e){n(e)}))}))}))},e.prototype.addEventListener=function(t,i,o){a.MMR_LOG("AudioElementShim::addEventListener - type: "+t);var r=n.getShimObject(this)?n.getShimObject(this):this;if(!e.eventHandlers.includes(t))return r.addEventListener_original.apply(r.originalElement,[t,i,o]);r.localOrRemoteExecute("addEventListener",[t,i,o])},e.prototype.removeEventListener=function(t,i,o){a.MMR_LOG("AudioElementShim::removeEventListener - type: "+t);var r=n.getShimObject(this)?n.getShimObject(this):this,c=r.removeEventListener_original.apply(r.originalElement,[t,i,o]);return e.eventHandlers.includes(t)&&(c=r.localOrRemoteExecute("removeEventListener",[t,i,o])),c},e.prototype.dispatchEvent=function(e){return a.MMR_LOG("AudioElementShim::dispatchEvent - type: "+e.type),(n.getShimObject(this)?n.getShimObject(this):this).localOrRemoteExecute("dispatchEvent",[e])},e.eventHandlers=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],e.shimmedMethods=["appendChild","setAttribute","removeAttribute","play","pause","setSinkId","addEventListener","removeEventListener","dispatchEvent"],e.shimmedProperties=o.AudioElementRedirect.redirectAttributes,e.boolShimmedProperties=o.AudioElementRedirect.boolRedirectAttributes,e.postFallbackQueueMethods=["addEventListener","removeEventListener"],e}();function d(e,t,i,n){a.MMR_LOG("Shimming audio element: "+n.outerHTML);new s(e,t,i,n);return n}t.AudioElementShim=s,t.setupAudioElementShims=d,t.shimAudioClass=function(e,t,i){a.MMR_LOG("Shimming JavaScript Audio class"),c.remoteObjectManager=e,c.fallbackObjectManager=t,c.occlusionSupportVersion=i,window.Audio=c}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioElementRedirect=void 0;var n=i(1),o=i(0),r=function(){function e(e,t,i){this.remoteObjectManager=e,this.originalElement=t,this.occlusionSupportVersion=i,this.localObjectId=0,this.mutationObserver=null,this.switchToLocal=!1,this.remoteObjectActive=!1,this.remoteObjectManager.createObject(this,"AudioElement",{occlusionSupportVersion:i});var n=this,o=t;this.mutationObserver=new MutationObserver((function(e,t){for(var i=0,r=e;i<r.length;i++){var a=r[i];n.onContentAttributeUpdated(a.attributeName,o.hasAttribute(a.attributeName)?o.getAttribute(a.attributeName):void 0)}})),this.mutationObserver.observe(o,{attributes:!0})}return e.prototype.onContentAttributeUpdated=function(t,i){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::onContentAttributeUpdated - name: "+t+", value: "+i);var r=n.getShimObject(this.originalElement);if("muted"!=t&&r.playbackPathMode!=n.PlaybackPathMode.LOCAL&&e.redirectAttributes.includes(t))if(e.boolRedirectAttributes.includes(t)){var a=void 0!==i;r[t]!=a&&(r[t]=a,this.setIdlAttribute(t,a))}else r[t]!=i&&(r[t]=i,this.setIdlAttribute(t,i))},e.prototype.setIdlAttribute=function(t,i){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::setIdlAttribute[BEGIN] - name: "+t+", value: "+i);var r=i;if("srcObject"!=t){if(e.boolRedirectAttributes.includes(t)&&(r=!1===i||void 0===i?"false":"true"),e.redirectAttributes.includes(t)){var a=this;this.remoteObjectManager.invokeMethod(this.localObjectId,"setAttribute",{name:t,value:r},(function(e,r){(o.MMR_LOG("AudioElementRedirect["+a.localObjectId+"]::setIdlAttribute[END] - result: 0x"+e.toString(16)),0==e)&&("srcObject"==t&&null!=i?(a.dispatchEvent(new CustomEvent("loadeddata",{})),a.dispatchEvent(new CustomEvent("canplay",{})),a.dispatchEvent(new CustomEvent("canplaythrough",{})),1==n.getShimObject(a.originalElement).autoplay&&(a.dispatchEvent(new CustomEvent("play",{})),a.dispatchEvent(new CustomEvent("playing",{})))):"volume"!=t&&"muted"!=t||a.dispatchEvent(new CustomEvent("volumechange",{})))}))}}else this.setNewMediaStream(i)},e.prototype.setNewMediaStream=function(e){var t,i;if(e!=this.mediaStream){this.mediaStream&&(this.mediaStream.removeEventListener("addtrack",this.addTrackRef),this.mediaStream.removeEventListener("removetrack",this.removeTrackRef)),this.mediaStream=e;var n=void 0;if(this.mediaStream){var o=this;this.mediaStream.addEventListener("addtrack",this.addTrackRef=function(e){o.mediaStreamTrackUpdate(e)}),this.mediaStream.addEventListener("removetrack",this.removeTrackRef=function(e){o.mediaStreamTrackUpdate(e)}),(null===(t=this.mediaStream)||void 0===t?void 0:t.getAudioTracks().length)>0&&(n=null===(i=this.mediaStream)||void 0===i?void 0:i.getAudioTracks()[0])}this.setAudioTrack(n)}},e.prototype.mediaStreamTrackUpdate=function(e){var t,i,n=void 0;"audio"==e.track.kind&&(this.mediaStream&&(null===(t=this.mediaStream)||void 0===t?void 0:t.getAudioTracks().length)>0&&(n=null===(i=this.mediaStream)||void 0===i?void 0:i.getAudioTracks()[0]),this.setAudioTrack(n,e.type))},e.prototype.setAudioTrack=function(e,t){if(e!=this.audioTrack){this.audioTrack=e;var i=null;this.audioTrack&&(i=this.audioTrack.id);var r=this;o.MMR_LOG("AudioElementRedirect["+r.localObjectId+"]::setAudioTrack[BEGIN] - track: "+i),this.remoteObjectManager.invokeMethod(this.localObjectId,"setAttribute",{name:"srcObject",value:i},(function(e,i){(o.MMR_LOG("AudioElementRedirect["+r.localObjectId+"]::setAudioTrack[END] - result: 0x"+e.toString(16)),0==e&&"removetrack"!=t)&&(r.dispatchEvent(new CustomEvent("loadeddata",{})),r.dispatchEvent(new CustomEvent("canplay",{})),r.dispatchEvent(new CustomEvent("canplaythrough",{})),1==n.getShimObject(r.originalElement).autoplay&&(r.dispatchEvent(new CustomEvent("play",{})),r.dispatchEvent(new CustomEvent("playing",{}))))}))}},e.prototype.setLocalObjectId=function(e){this.localObjectId=e},e.prototype.getLocalObjectId=function(){return this.localObjectId},e.prototype.cancelRemote=function(){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::cancelRemote[BEGIN]"),this.switchToLocal=!0,this.mutationObserver.disconnect()},e.prototype.onRemoteObjectCreated=function(){this.remoteObjectActive=!0},e.prototype.invokeEvent=function(e){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::invokeEvent - type: "+e.type),n.getShimObject(this.originalElement).dispatchEvent_original.apply(this.originalElement,[e])},e.prototype.invokeEventListener=function(e,t){if(o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::invokeEventListener - type: "+e.type),"error"!=e.type)if(null!=t.handleEvent)t.handleEvent();else{var i=this.originalElement;Object.defineProperty(e,"target",{value:i}),Object.defineProperty(e,"currentTarget",{value:i}),t.apply(i,[e])}else n.getShimObject(this.originalElement).switchToLocal("AudioElementRedirect received an error event.")},e.prototype.onAttributeUpdate=function(e,t){o.MMR_LOG("AudioElement["+this.localObjectId+"]::onAttributeUpdate - name: "+e+", value: "+n.tryJsonStringify(t));var i=n.getShimObject(this.originalElement);"buffered"!=e&&"seekable"!=e||(t=n.createTimeRanges(t)),i[e]=t},e.prototype.onConnectionEvent=function(e){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::onConnectionEvent - eventType: "+e),"clientDisconnected"==e?this.remoteObjectActive=!1:"switchToRemote"==e&&n.getShimObject(this.originalElement).switchToRemote()},e.prototype.pause=function(){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::pause[BEGIN]");var e=this;this.remoteObjectManager.invokeMethod(this.localObjectId,"pause",{type:"audio"},(function(t,i){o.MMR_LOG("AudioElementRedirect["+e.localObjectId+"]::pause[END] - result: 0x"+t.toString(16)),0==t&&e.dispatchEvent(new CustomEvent("pause",{}))}))},e.prototype.play=function(){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::play[BEGIN]");var e=this;return new Promise((function(t,i){e.remoteObjectManager.invokeMethod(e.localObjectId,"play",{type:"audio"},(function(r,a){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::play[END] - result: 0x"+r.toString(16)),r>=0?(n.getShimObject(e.originalElement).paused=!1,t(),0==r?(e.dispatchEvent(new CustomEvent("play",{})),e.dispatchEvent(new CustomEvent("playing",{}))):e.dispatchEvent(new CustomEvent("waiting",{}))):i()}))}))},e.prototype.setSinkId=function(e){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::setSinkId[BEGIN] - sinkId: "+e);var t=this;return new Promise((function(i,r){t.remoteObjectManager.invokeMethod(t.localObjectId,"setSinkId",{sinkId:e},(function(e,t){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::setSinkId[END] - result: 0x"+e.toString(16)),e>=0?i():r(n.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.load=function(){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::load[BEGIN] - src:")},e.prototype.addEventListener=function(e,t,i){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::addEventListener - type: "+e),this.remoteObjectManager.addEventListener(this.localObjectId,e,t,i)},e.prototype.removeEventListener=function(e,t,i){o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::removeEventListener - type: "+e),this.remoteObjectManager.removeEventListener(this.localObjectId,e,t,i)},e.prototype.dispatchEvent=function(e){return o.MMR_LOG("AudioElementRedirect["+this.localObjectId+"]::dispatchEvent - type: "+e.type),this.remoteObjectManager.dispatchEvent(this.localObjectId,e)},e.redirectAttributes=["autoplay","volume","src","srcObject","muted","paused"],e.boolRedirectAttributes=["autoplay","muted","paused"],e}();t.AudioElementRedirect=r},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.setupRTCPeerConnectionShims=t.RTCPeerConnectionRedirect=void 0;var a=i(1),c=i(7),s=i(11),d=i(0),l=i(31);function u(e){var t=new Map;return e.stats.forEach((function(e){var i={};Object.keys(e).forEach((function(t){if("stats_map"===t){var n=e[t];for(var o in n)Object.defineProperty(i,o,{value:n[o],writable:!1,enumerable:!0})}else Object.defineProperty(i,t,{value:e[t],writable:!1,enumerable:!0})})),t.set(e.id,i)})),t}var h=function(e,t){this.type=e,this.sdp=t},p=function(e){function t(t,i){var n=e.call(this)||this;return n.canInsertDTMF=!1,n.toneBuffer="",n.parentLocalObjectId=t,n.id=i,n.eventTarget=n,n.shimEventHandlers(n,["tonechange"]),n}return o(t,e),t.prototype.insertDTMF=function(e,t,i){if(new RegExp("[^a-dA-D0-9#*,]").test(e))throw new DOMException("Invalid DTMF tone character","InvalidCharacterError");this.toneBuffer=e,b.remoteObjectManager.invokeMethod(this.parentLocalObjectId,"insertDTMF",{trackId:this.id,tones:e,duration:null!=t?t:100,interToneGap:null!=i?i:70},(function(e,t){d.MMR_LOG("MmrRTCRtpSender::insertDTMF[END] - result: 0x"+e.toString(16)),e<0&&(this.toneBuffer="")}))},t.prototype.processToneChange=function(e){var t=e.tone;this.toneBuffer=e.toneBuffer,this.dispatchEvent(new RTCDTMFToneChangeEvent("tonechange",{tone:t}))},t}(c.MmrEventTarget),m=function(){function e(e,t,i){this.transport=null,this.rtcpTransport=null,this.parentLocalObjectId=e,this.track=t,this.id=i,this.dtmf=new p(e,i),this.parameters={encodings:[],transactionId:"",codecs:[],headerExtensions:[],rtcp:{}}}return e.prototype.getParameters=function(){return r({},this.parameters)},e.prototype.getStats=function(){d.MMR_LOG("MmrRTCRtpSender::getStats[BEGIN]");var e=this;return new Promise((function(t,i){b.remoteObjectManager.invokeMethod(e.parentLocalObjectId,"getStats",{trackId:e.track.id},(function(e,n){if(d.MMR_LOG("MmrRTCRtpSender::getStats[END] - result: 0x"+e.toString(16)),e>=0){var o=u(n);t(o)}else i(a.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.replaceTrack=function(e){var t=e?e.id:"";d.MMR_LOG("MmrRTCRtpSender::replaceTrack[BEGIN] - sender: "+this.id+" - track: "+t);var i=this;return new Promise((function(n,o){b.remoteObjectManager.invokeMethod(i.parentLocalObjectId,"replaceTrack",{senderId:i.id,trackId:t},(function(t,r){d.MMR_LOG("MmrRTCRtpSender::replaceTrack[END] - result: 0x"+t.toString(16)),t>=0?(i.track=e,n()):o(a.mmrWebRtcStatusToDOMError(t))}))}))},e.prototype.setParameters=function(e){d.MMR_LOG("MmrRTCRtpSender::setParameters[BEGIN]");var t=this;return new Promise((function(i,n){b.remoteObjectManager.invokeMethod(t.parentLocalObjectId,"setParameters",{trackId:t.track.id,parameters:e},(function(e,o){d.MMR_LOG("MmrRTCRtpSender::setParameters[END] - result: 0x"+e.toString(16)),e>=0?(t.initialize(o),i()):n(a.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.setStreams=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];d.MMR_LOG("MmrRTCRtpSender::setStreams[BEGIN]");var i=this;e.forEach((function(e){e.addTrack(i.track)}));var n=Array.from(e,(function(e){return e.id}));b.remoteObjectManager.invokeMethod(this.parentLocalObjectId,"setStreams",{trackId:this.track.id,streamIds:n},(function(e,t){d.MMR_LOG("MmrRTCRtpSender::setStreams[END] - result: 0x"+e.toString(16))}))},e.prototype.initialize=function(e){var t=e.encodings,i=e.codecs,n=e.headerExtensions,o=e.rtcp;this.parameters={encodings:t,transactionId:e.transactionId,codecs:i,headerExtensions:n,rtcp:o},this.dtmf.canInsertDTMF=e.canInsertDTMF},e.prototype.setId=function(e){this.id=e},e}(),f=function(){function e(e,t,i){this.csrcs=[],this.ssrcs=[],this.rtcpTransport=null,this.transport=null,this.parentLocalObjectId=e,this.track=t,i&&this.initialize(i)}return e.prototype.getContributingSources=function(){d.MMR_LOG("MmrRTCRtpReceiver::getContributingSources[BEGIN]");var e=this;return b.remoteObjectManager.invokeMethod(e.parentLocalObjectId,"getContributingSources",{trackId:e.track.id},(function(t,i){d.MMR_LOG("MmrRTCRtpReceiver::getContributingSources[END] - result: 0x"+t.toString(16)),t>=0&&(e.csrcs=i.csrcs)})),this.csrcs},e.prototype.getParameters=function(){return this.parameters},e.prototype.getStats=function(){d.MMR_LOG("MmrRTCRtpReceiver::getStats[START]");var e=this;return new Promise((function(t,i){b.remoteObjectManager.invokeMethod(e.parentLocalObjectId,"getStats",{trackId:e.track.id},(function(e,n){if(d.MMR_LOG("MmrRTCRtpReceiver::getStats[END] - result: 0x"+e.toString(16)),e>=0){var o=u(n);t(o)}else i(a.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.getSynchronizationSources=function(){console.log("MmrRTCRtpReceiver::getSynchronizationSources[BEGIN]");var e=this;return b.remoteObjectManager.invokeMethod(e.parentLocalObjectId,"getSynchronizationSources",{trackId:e.track.id},(function(t,i){d.MMR_LOG("MmrRTCRtpReceiver::getSynchronizationSources[END] - result: 0x"+t.toString(16)),t>=0&&(e.ssrcs=i.ssrcs)})),this.ssrcs},e.prototype.initialize=function(e){var t=e.codecs,i=e.headerExtensions,n=e.rtcp;this.parameters={encodings:null,codecs:t,headerExtensions:i,rtcp:n}},e}(),M=function(){function e(e,t,i,n){this.mid=e,this.parentPeerConnection=t,this.sender=i,this.receiver=n}return Object.defineProperty(e.prototype,"direction",{get:function(){return this.internalDirection},set:function(e){if(d.MMR_LOG("MmrRTCRtpTransceiver::setDirection[BEGIN] - "+e),this.parentPeerConnection.isClosed)throw new DOMException("The RTCPeerConnection is closed","InvalidStateError");this.internalDirection=e;b.remoteObjectManager.invokeMethod(this.parentPeerConnection.localObjectId,"setTransceiverDirection",{mid:this.mid,direction:e},(function(e,t){console.log("MmrRTCRtpTransceiver::setDirection[END] - result: 0x"+e.toString(16))}))},enumerable:!1,configurable:!0}),e.prototype.setCodecPreferences=function(e){d.MMR_LOG("MmrRTCRtpTransceiver::setCodecPreferences - not implemented")},e.prototype.stop=function(){d.MMR_LOG("MmrRTCRtpTransceiver::stop - not implemented")},e}(),b=function(){function e(t){var i=this;this.localObjectId=0,this.remoteObjectActive=!1,this.isClosed=!1,this.connectionState_shim="new",this.originalRTCPeerConnection=null,this.configuration=null,this.senderMap=new Map,this.receiverMap=new Map,this.transceivers=new Array,this.channelMap=new Map,this.streamMap=new Map,this.nextChannelId=0,this.canTrickleIceCandidates=null,this.currentLocalDescription=null,this.currentRemoteDescription=null,this.iceConnectionState="new",this.iceGatheringState="new",this.idpErrorInfo=null,this.idpLoginUrl=null,this.peerIdentity=new Promise((function(e,t){e(null)})),this.pendingLocalDescription=null,this.pendingRemoteDescription=null,this.signalingState="stable",d.MMR_LOG("RTCPeerConnectionRedirect constructor, configuration: "+a.tryJsonStringify(t)),this.originalRTCPeerConnection=new e.originalRTCPeerConnectionClass(t),null!=t?(this.configuration=t,null==this.configuration.sdpSemantics&&(this.configuration.sdpSemantics="unified-plan")):this.configuration={sdpSemantics:"unified-plan"},e.eventHandlers.forEach((function(e){var t="_on"+e+"eventHandler";Object.defineProperty(i,"on"+e,{get:function(){return this[t]||null},set:function(i){this[t]&&(this.removeEventListener(e,this[t],null),delete this[t]),i&&(this[t]=i,this.addEventListener(e,this[t],null))}})})),e.remoteObjectManager.createObject(this,"RTCPeerConnection",{configuration:t,occlusionSupportVersion:e.occlusionSupportVersion})}return e.prototype.setAttribute=function(e,t){d.MMR_LOG("RTCPeerConnectionRedirect setAttribute "+e+"="+t),"connectionState"==e?this.connectionState_shim=t:this[e]=t},e.prototype.processIceCandidateEvent=function(e){var t=e,i=null;return null!=t.detail.candidate?(d.MMR_LOG("Received new ICE candidate: "+a.tryJsonStringify(t.detail.candidate)),i=new RTCIceCandidate({candidate:t.detail.candidate,sdpMLineIndex:t.detail.sdp_mline_index,sdpMid:t.detail.sdp_mid})):d.MMR_LOG("Null ICE candidate"),new RTCPeerConnectionIceEvent("icecandidate",{candidate:i})},e.prototype.processIceCandidateErrorEvent=function(e){var t=e,i={address:null!=t.detail.address?t.detail.address:null,errorCode:t.detail.error_code,errorText:t.detail.error_text,port:null!=t.detail.port?t.detail.port:null,url:t.detail.url};return new RTCPeerConnectionIceErrorEvent("icecandidateerror",i)},e.prototype.processTrackEvent=function(t){var i=this,n=t;d.MMR_LOG("RTCPeerConnectionRedirect::processTrackEvent - track: "+n.detail.trackId),d.MMR_LOG("RTCPeerConnectionRedirect::processTrackEvent - event: "+a.tryJsonStringify(n.detail));var o=s.createTrackRedirect(e.remoteObjectManager,n.detail.trackId,n.detail.trackLabel,null!=n.detail.settings?n.detail.settings:null,n.detail.kind);d.MMR_LOG("RTCPeerConnectionRedirect::processTrackEvent - stream0: "+n.detail.streamIds[0]);var r=n.detail.streamIds,l=new Array;r.forEach((function(e){var t=i.streamMap.get(e);if(null!=t)d.MMR_LOG("RTCPeerConnectionRedirect::processTrackEvent - using existing stream: "+e);else{d.MMR_LOG("RTCPeerConnectionRedirect::processTrackEvent - creating new stream: "+e);var n=new MediaStream;t=c.createMediaStreamShim(n,e),i.streamMap.set(e,t)}t.addTrack(o),l.push(t)}));var u=new f(this.localObjectId,o,n.detail);this.receiverMap.set(o.id,u);var h=n.detail.localTrackId,p=new m(this.localObjectId,null,h);this.senderMap.set(h,p);var b=new M(n.detail.transceiverMid,this,p,u);this.transceivers.push(b);var g=new CustomEvent("track",{});return Object.defineProperty(g,"receiver",{value:u,writable:!1,enumerable:!0}),Object.defineProperty(g,"streams",{value:l,writable:!1,enumerable:!0}),Object.defineProperty(g,"track",{value:o,writable:!1,enumerable:!0}),Object.defineProperty(g,"transceiver",{value:b,writable:!1,enumerable:!0}),g},e.prototype.processDataChannelEvent=function(t){var i=t,n=new l.RTCDataChannelRedirect(e.remoteObjectManager,this.localObjectId,i.detail.id,i.detail.label,i.detail.parameters,i.detail.uuid);i.detail.id>=0?this.channelMap[i.detail.id]=n:d.MMR_LOG("processDataChannelEvent: channel id is not yet available");var o=new CustomEvent("datachannel",{});return Object.defineProperty(o,"channel",{value:n,writable:!1,enumerable:!0}),o},e.prototype.processLocalDescriptionUpdate=function(e){var t;t=null!=e.sdp&&null!=e.type?new RTCSessionDescription({type:e.type,sdp:e.sdp}):null,null!=this.pendingLocalDescription?this.setAttribute("pendingLocalDescription",t):this.setAttribute("currentLocalDescription",t)},e.prototype.processSendersUpdate=function(e){this.senderMap.forEach((function(t,i){null!=e[i]&&t.initialize(e[i])}))},e.prototype.processReceiversUpdate=function(e){this.receiverMap.forEach((function(t,i){null!=e[i]&&t.initialize(e[i])}))},e.prototype.processTransceiversUpdate=function(e){this.transceivers.forEach((function(t){null!=e[t.sender.id]&&(t.mid=e[t.sender.id])}))},e.prototype.processToneChange=function(e){var t=this.senderMap.get(e.trackId);null!=t&&t.dtmf.processToneChange(e)},e.prototype.setLocalObjectId=function(e){this.localObjectId=e},e.prototype.getLocalObjectId=function(){return this.localObjectId},e.prototype.onRemoteObjectCreated=function(){this.remoteObjectActive=!0},e.prototype.invokeEvent=function(e){},e.prototype.invokeEventListener=function(e,t){console.log("RTCPeerConnectionRedirect::invokeEventListener - type: "+e.type),this.isClosed?console.log("RTCPeerConnectionRedirect::invokeEventListener: Ignoring event when closed."):("icecandidate"==e.type?e=this.processIceCandidateEvent(e):"icecandidateerror"==e.type?e=this.processIceCandidateErrorEvent(e):"track"==e.type?e=this.processTrackEvent(e):"datachannel"==e.type&&(e=this.processDataChannelEvent(e)),null!=t.handleEvent?t.handleEvent():(Object.defineProperty(e,"target",{value:this}),Object.defineProperty(e,"currentTarget",{value:this}),t(e)))},e.prototype.onAttributeUpdate=function(e,t){console.log("RTCPeerConnectionRedirect::onAttributeUpdate - name: "+e+", value: "+a.tryJsonStringify(t)),this.isClosed?console.log("RTCPeerConnectionRedirect::onAttributeUpdate: Ignoring attribute update when closed."):"localDescription"==e?this.processLocalDescriptionUpdate(t):"senders"==e?this.processSendersUpdate(t):"receivers"==e?this.processReceiversUpdate(t):"transceivers"==e?this.processTransceiversUpdate(t):"tonechange"==e?this.processToneChange(t):this.setAttribute(e,t)},e.prototype.onConnectionEvent=function(e){"clientConnected"==e?console.log("RTCPeerConnectionRedirect::onConnectionEvent - clientConnected"):"clientDisconnected"==e&&(this.remoteObjectActive=!1)},Object.defineProperty(e.prototype,"connectionState",{get:function(){return this.connectionState_shim},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localDescription",{get:function(){return null!=this.pendingLocalDescription?this.pendingLocalDescription:this.currentLocalDescription},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteDescription",{get:function(){return null!=this.pendingRemoteDescription?this.pendingRemoteDescription:this.currentRemoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sctp",{get:function(){return d.MMR_LOG("RTCPeerConnectionRedirect: sctp: Not yet implemented"),null},enumerable:!1,configurable:!0}),e.prototype.addIceCandidate=function(t){console.log("RTCPeerConnectionRedirect::addIceCandidate[BEGIN] - candidate: "+t.candidate);var i=this;return new Promise((function(n,o){e.remoteObjectManager.invokeMethod(i.localObjectId,"addIceCandidate",{candidate:t.candidate,sdpMLineIndex:t.sdpMLineIndex,sdpMid:t.sdpMid},(function(e,t){if(console.log("RTCPeerConnectionRedirect::addIceCandidate[END] - result: 0x"+e.toString(16)),e>=0){if(null!=t.sdp){var r=new h(t.type,t.sdp);null!=i.pendingRemoteDescription?i.setAttribute("pendingRemoteDescription",r):i.setAttribute("currentRemoteDescription",r)}n()}else o(a.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.addTrack=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(console.log("RTCPeerConnectionRedirect::AddTrack[BEGIN] - track: "+t.id),null==t[a.shimPropertyName])throw new DOMException("The track is not a MSRDC track","NotSupportedError");if(this.isClosed)throw new DOMException("The RTCPeerConnection is closed","InvalidStateError");if(this.senderMap.has(t.id))throw new DOMException("The specified track is already part of the RTCPeerConnection","InvalidAccessError");i.forEach((function(e){e.addTrack(t)}));var o=new m(this.localObjectId,t,t.id);this.senderMap.set(t.id,o);var r=Array.from(i,(function(e){return e.id}));return e.remoteObjectManager.invokeMethod(this.localObjectId,"addTrack",{trackId:t.id,streamIds:r},(function(e,t){console.log("RTCPeerConnectionRedirect::AddTrack[END] - result: 0x"+e.toString(16)),e>=0&&o.initialize(t)})),o},e.prototype.addTransceiver=function(t,i){var n={};"string"==typeof t?n.kind=t:n.trackId=t.id,i&&(i.direction&&(n.direction=i.direction),i.streams&&(n.streamIds=Array.from(i.streams,(function(e){return e.id}))),i.sendEncodings&&(n.encodings=i.sendEncodings)),console.log("RTCPeerConnectionRedirect::addTransceiver[BEGIN] - Params: "+JSON.stringify(n));var o=new f(this.localObjectId,null,null),r=new m(this.localObjectId,null,""),a=new M("",this,r,o);a.internalDirection=n.direction?n.direction:"sendrecv",this.transceivers.push(a);var c=this;return e.remoteObjectManager.invokeMethod(this.localObjectId,"addTransceiver",n,(function(t,i){if(console.log("RTCPeerConnectionRedirect::addTransceiver[END] - result: 0x"+t.toString(16)),t>=0){a.internalDirection=i.direction,c.receiverMap.set(i.receiverId,o),r.setId(i.senderId),c.senderMap.set(i.senderId,r);var n=s.createTrackRedirect(e.remoteObjectManager,i.trackId,i.trackLabel,null!=i.settings?i.settings:null,i.kind);o.track=n}})),a},e.prototype.close=function(){if(d.MMR_LOG("RTCPeerConnectionRedirect::close[BEGIN]"),this.isClosed)d.MMR_LOG("RTCPeerConnectionRedirect::close[END] - was already closed.");else{var t=this;t.setAttribute("connectionState","closed"),t.setAttribute("iceConnectionState","closed"),t.setAttribute("iceGatheringState","closed"),t.setAttribute("signalingState","closed"),e.remoteObjectManager.invokeMethod(t.localObjectId,"close",{},(function(e,i){d.MMR_LOG("RTCPeerConnectionRedirect::close[END] - result: 0x"+e.toString(16)),t.isClosed=!0}))}},e.prototype.createAnswer=function(t){var i=this;return console.log("RTCPeerConnectionRedirect::createAnswer[BEGIN] - options: "+JSON.stringify(t)),new Promise((function(n,o){e.remoteObjectManager.invokeMethod(i.localObjectId,"createAnswer",{options:t},(function(e,t){console.log("RTCPeerConnectionRedirect::createAnswer[END] - result: 0x"+e.toString(16));var i=new h(t.type,t.sdp);e>=0?n(i):o(a.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.createDataChannel=function(t,i){if(d.MMR_LOG("RTCPeerConnectionRedirect: createDataChannel[BEGIN] - label: "+t+" params: "+JSON.stringify(i)),this.isClosed)throw new DOMException("The RTCPeerConnection is closed","InvalidStateError");if(t.length>65535)throw new TypeError("Label length is too long");if(null!=i){if(null!=i.protocol&&i.protocol.length>65535)throw new TypeError("Protocol length is too long");if(null!=i.maxPacketLifeTime&&null!=i.maxRetransmits)throw new TypeError("maxPacketLifeTime and maxRetransmits must not both be specified");if(null!=i.id){if(i.id<0||i.id>=65535)throw new TypeError("Invalid channel id value");if(this.channelMap.has(i.id))throw new DOMException("The data channel id is already in use","ResourceInUse")}}var n;if(null!=i&&null!=i.id)n=i.id;else{for(var o=0;o<65535;){if(this.nextChannelId=(this.nextChannelId+1)%65535,!this.channelMap.has(this.nextChannelId)){n=this.nextChannelId;break}++o}if(o>=65535)throw new DOMException("Too many data channels are already in use","OperationError")}var r=new l.RTCDataChannelRedirect(e.remoteObjectManager,this.localObjectId,n,t,i);return this.channelMap[n]=r,e.remoteObjectManager.invokeMethod(this.localObjectId,"createDataChannel",{label:t,id:n,uuid:r.uuid,parameters:i},(function(e,t){d.MMR_LOG("RTCPeerConnectionRedirect::createDataChannel[END] - result: 0x"+e.toString(16))})),r},e.prototype.createOffer=function(t){var i=this;return console.log("RTCPeerConnectionRedirect::createOffer[BEGIN] - options: "+JSON.stringify(t)),new Promise((function(n,o){e.remoteObjectManager.invokeMethod(i.localObjectId,"createOffer",{options:t},(function(e,t){console.log("RTCPeerConnectionRedirect::createOffer[END] - result: 0x"+e.toString(16));var i=new h("offer",t.sdp);e>=0?n(i):o(a.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.getConfiguration=function(){return this.configuration},e.prototype.getIdentityAssertion=function(){return new Promise((function(e,t){t(new DOMException("The operation is not supported","NotSupportedError"))}))},e.prototype.getReceivers=function(){return Array.from(this.receiverMap.values())},e.prototype.getSenders=function(){return Array.from(this.senderMap.values())},e.prototype.getStats=function(t){console.log("RTCPeerConnectionRedirect::getStats[START] selector: "+(null==t?void 0:t.id));var i=this;return new Promise((function(n,o){e.remoteObjectManager.invokeMethod(i.localObjectId,"getStats",{trackId:null==(null==t?void 0:t.id)?"":null==t?void 0:t.id},(function(e,t){if(console.log("RTCPeerConnectionRedirect::getStats[END] - result: 0x"+e.toString(16)),e>=0){var i=u(t);n(i)}else o(a.mmrWebRtcStatusToDOMError(e))}))}))},e.prototype.getTransceivers=function(){return this.transceivers},e.prototype.removeTrack=function(e){this.senderMap.delete(e.track.id)},e.prototype.setConfiguration=function(t){console.log("RTCPeerConnectionRedirect::setConfiguration[BEGIN] - configuration: "+JSON.stringify(t));var i=null!=this.configuration&&null!=this.configuration.bundlePolicy?this.configuration.bundlePolicy:"balanced",n=null!=t&&null!=t.bundlePolicy?t.bundlePolicy:"balanced",o=null!=this.configuration&&null!=this.configuration.rtcpMuxPolicy?this.configuration.rtcpMuxPolicy:"require",r=null!=t&&null!=t.rtcpMuxPolicy?t.rtcpMuxPolicy:"require";if(n!=i||r!=o)throw new DOMException("The object cannot be modified in this way","InvalidModificationError");this.configuration=t,e.remoteObjectManager.invokeMethod(this.localObjectId,"setConfiguration",{configuration:t},(function(e,t){console.log("RTCPeerConnectionRedirect::setConfiguration[END] - result: 0x"+e.toString(16))}))},e.prototype.setIdentityProvider=function(e,t){},e.prototype.setLocalDescription=function(t){console.log("RTCPeerConnectionRedirect::setLocalDescription[BEGIN] - description: "+JSON.stringify(t));var i=this;return i.setAttribute("pendingLocalDescription",t),new Promise((function(n,o){var r=JSON.parse(JSON.stringify(t));e.remoteObjectManager.invokeMethod(i.localObjectId,"setLocalDescription",{description:r},(function(e,t){console.log("RTCPeerConnectionRedirect::setLocalDescription[END] - result: 0x"+e.toString(16)),e>=0?(i.setAttribute("currentLocalDescription",i.pendingLocalDescription),i.setAttribute("pendingLocalDescription",null),n()):(i.setAttribute("pendingLocalDescription",null),o(a.mmrWebRtcStatusToDOMError(e)))}))}))},e.prototype.setRemoteDescription=function(t){console.log("RTCPeerConnectionRedirect::setRemoteDescription[BEGIN] - description: "+JSON.stringify(t));var i=this;return this.setAttribute("pendingRemoteDescription",t),this.setAttribute("canTrickleIceCandidates",!0),new Promise((function(n,o){var r=JSON.parse(JSON.stringify(t));e.remoteObjectManager.invokeMethod(i.localObjectId,"setRemoteDescription",{description:r},(function(e,t){console.log("RTCPeerConnectionRedirect::setRemoteDescription[END] - result: 0x"+e.toString(16)),e>=0?(i.setAttribute("currentRemoteDescription",i.pendingRemoteDescription),i.setAttribute("pendingRemoteDescription",null),n()):(i.setAttribute("pendingRemoteDescription",null),o(a.mmrWebRtcStatusToDOMError(e)))}))}))},e.prototype.addEventListener=function(t,i,n){console.log("RTCPeerConnectionRedirect::addEventListener - type: "+t),e.remoteObjectManager.addEventListener(this.localObjectId,t,i,n)},e.prototype.removeEventListener=function(t,i,n){console.log("RTCPeerConnectionRedirect::removeEventListener - type: "+t),e.remoteObjectManager.removeEventListener(this.localObjectId,t,i,n)},e.prototype.dispatchEvent=function(t){return console.log("RTCPeerConnectionRedirect::dispatchEvent - type: "+t.type),e.remoteObjectManager.dispatchEvent(this.localObjectId,t)},e.eventHandlers=["connectionstatechange","datachannel","icecandidate","icecandidateerror","iceconnectionstatechange","icegatheringstatechange","negotiationneeded","signalingstatechange","statsended","track"],e.remoteObjectManager=null,e.occlusionSupportVersion=0,e.originalRTCPeerConnectionClass=RTCPeerConnection,e}();t.RTCPeerConnectionRedirect=b,t.setupRTCPeerConnectionShims=function(e,t,i){console.log("Shimming RTCPeerConnection"),b.remoteObjectManager=e,b.occlusionSupportVersion=i,RTCPeerConnection=b}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTCDataChannelRedirect=void 0;var n=i(1),o=i(0),r=function(){function e(t,i,n,o,r,a){var c=this;this.remoteObjectManager=t,this.localObjectId=0,this.remoteObjectActive=!1,this.isClosed=!1,this._bufferedAmount=0,this._bufferedAmountLowThreshold=0,this.binaryType="blob",this.id=null,this.maxPacketLifeTime=null,this.maxRetransmits=null,this.negotiated=!1,this.ordered=!0,this.priority="medium",this.protocol="",this.readyState="connecting",this.parentLocalObjectId=i,this.label=o,this.id=n,this.uuid=null!=a?a:crypto.randomUUID(),null!=r&&(this.maxPacketLifeTime=r.maxPacketLifeTime,this.maxRetransmits=r.maxRetransmits,this.negotiated=r.negotiated,this.ordered=r.ordered,this.priority=r.priority,this.protocol=r.protocol),e.eventHandlers.forEach((function(e){var t="_on"+e+"eventHandler";Object.defineProperty(c,"on"+e,{get:function(){return this[t]||null},set:function(i){this[t]&&(this.removeEventListener(e,this[t],null),delete this[t]),i&&(this[t]=i,this.addEventListener(e,this[t],null))}})})),this.remoteObjectManager.createObject(this,"RTCDataChannel",{uuid:this.uuid})}return Object.defineProperty(e.prototype,"bufferedAmount",{get:function(){return this.remoteObjectManager.invokeMethod(this.localObjectId,"bufferedAmount",{value:this._bufferedAmount},(function(e,t){})),this._bufferedAmount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferedAmountLowThreshold",{get:function(){return this._bufferedAmountLowThreshold},set:function(e){o.MMR_LOG("RTCDataChannelRedirect::bufferedAmountLowThreshold="+e),this._bufferedAmountLowThreshold=e,this.remoteObjectManager.invokeMethod(this.localObjectId,"bufferedAmountLowThreshold",{value:e},(function(e,t){}))},enumerable:!1,configurable:!0}),e.prototype.close=function(){o.MMR_LOG("RTCDataChannelRedirect::close"),this.remoteObjectManager.invokeMethod(this.localObjectId,"close",{},(function(e,t){}))},e.prototype.send=function(e){function t(e){for(var t="",i=new Uint8Array(e),n=i.byteLength,o=0;o<n;o++)t+=String.fromCharCode(i[o]);return window.btoa(t)}if(o.MMR_LOG("RTCDataChannelRedirect::send"),null!=e.byteLength){var i=e;this.remoteObjectManager.invokeMethod(this.localObjectId,"send",{message:t(i),isBinary:!0},(function(e,t){}))}else if(null!=e.buffer){var n=e;this.remoteObjectManager.invokeMethod(this.localObjectId,"send",{message:t(n.buffer),isBinary:!0},(function(e,t){}))}else if(null!=e.type){var r=this;e.arrayBuffer().then((function(e){r.remoteObjectManager.invokeMethod(r.localObjectId,"send",{message:t(e),isBinary:!0},(function(e,t){}))})).catch((function(e){o.MMR_LOG("RTCDataChannelRedirect::send - error converting Blob to ArrayBuffer: "+e.toString())}))}else this.remoteObjectManager.invokeMethod(this.localObjectId,"send",{message:e,isBinary:!1},(function(e,t){}))},e.prototype.addEventListener=function(e,t,i){o.MMR_LOG("RTCDataChannelRedirect::addEventListener - type: "+e),this.remoteObjectManager.addEventListener(this.localObjectId,e,t,i)},e.prototype.removeEventListener=function(e,t,i){o.MMR_LOG("RTCDataChannelRedirect::removeEventListener - type: "+e),this.remoteObjectManager.removeEventListener(this.localObjectId,e,t,i)},e.prototype.dispatchEvent=function(e){return o.MMR_LOG("RTCDataChannelRedirect::dispatchEvent - type: "+e.type),this.remoteObjectManager.dispatchEvent(this.localObjectId,e)},e.prototype.setLocalObjectId=function(e){this.localObjectId=e},e.prototype.getLocalObjectId=function(){return this.localObjectId},e.prototype.onRemoteObjectCreated=function(){this.remoteObjectActive=!0},e.prototype.invokeEvent=function(e){},e.prototype.invokeEventListener=function(e,t){o.MMR_LOG("RTCDataChannelRedirect::invokeEventListener - type: "+e.type),this.isClosed&&"close"!=e.type?o.MMR_LOG("RTCDataChannelRedirect::invokeEventListener: Ignoring event when closed."):("message"==e.type?e=this.processMessageEvent(e):"error"==e.type&&(e=this.processErrorEvent(e)),null!=t.handleEvent?t.handleEvent():(Object.defineProperty(e,"target",{value:this}),Object.defineProperty(e,"currentTarget",{value:this}),t(e)))},e.prototype.onAttributeUpdate=function(e,t){o.MMR_LOG("RTCDataChannelRedirect::onAttributeUpdate - name: "+e+", value: "+n.tryJsonStringify(t)),this.isClosed?o.MMR_LOG("RTCDataChannelRedirect::onAttributeUpdate: Ignoring attribute update when closed."):this.setAttribute(e,t)},e.prototype.onConnectionEvent=function(e){"clientConnected"==e?o.MMR_LOG("RTCDataChannelRedirect::onConnectionEvent - clientConnected"):"clientDisconnected"==e&&(this.remoteObjectActive=!1)},e.prototype.setAttribute=function(e,t){"bufferedAmount"==e?this._bufferedAmount=t:"bufferedAmountLowThreshold"==e?this._bufferedAmountLowThreshold=t:this[e]=t,"readyState"==e&&"closed"==this.readyState&&(this.isClosed=!0)},e.prototype.processMessageEvent=function(e){var t,i=e;if(i.detail.isBinary){var n=Uint8Array.from(atob(i.detail.message),(function(e){return e.charCodeAt(0)}));t="blob"==this.binaryType?new MessageEvent("message",{data:new Blob([n.buffer])}):new MessageEvent("message",{data:n.buffer})}else{var o=i.detail.message;t=new MessageEvent("message",{data:o})}return t},e.prototype.processErrorEvent=function(e){var t=e,i=new RTCError({errorDetail:t.detail.errorDetail,receivedAlert:t.detail.receivedAlert,sctpCauseCode:t.detail.sctpCauseCode,sdpLineNumber:t.detail.sdpLineNumber,sentAlert:t.detail.sentAlert},t.detail.message);return new RTCErrorEvent("error",{error:i})},e.eventHandlers=["bufferedamountlow","close","closing","error","message","open"],e}();t.RTCDataChannelRedirect=r}]);', (document.head || document.documentElement).prepend(l), this.injectedMmrMain = !0, i.LocalizedStringHandler.dispatchLocalizedStrings() } }, e }(); t.NativeMessagingContentProxy = c }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.ElectronLogger = void 0; var o = n(2), r = n(15), i = n(16), s = n(0), a = n(9), c = n(8), u = function () { function e(e, t) { this.loggingChannel = e, this.mainChannel = t, this.port = new c.LoopbackConnectionPort({ name: s.LoggingCommon.LOGGING_CONTENT_BACKGROUND_PORT }) } return e.prototype.start = function () { this.backgroundLogger = new i.BackgroundLogger, this.backgroundLogger.onPortConnected(this.port), r.RegisterContentLogger(); var e = this; a.ipcRenderer.on(this.loggingChannel, (function (t, n) { console.log("Received msg on logging channel: " + JSON.stringify(n)); var r = n.messageType; "startFullTrace" == r ? (e.backgroundLogger.startFullTrace(), a.ipcRenderer.send(e.mainChannel, { type: "msg", payload: { messageType: o.ProxyCommon.BG_HOST_START_TRACING_MESSAGE_TYPE } })) : "stopFullTrace" == r && (e.backgroundLogger.stopFullTrace(), a.ipcRenderer.send(e.mainChannel, { type: "msg", payload: { messageType: o.ProxyCommon.BG_HOST_STOP_TRACING_MESSAGE_TYPE } })) })) }, e }(); t.ElectronLogger = u }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.RegisterContentLogger = void 0; var o = n(0), r = function () { function e() { this.port = null, this.cachedLogs = new Array; var e = this; document.addEventListener(o.LoggingCommon.LOGGING_PAGE_TO_CONTENT_EVENT, (function (t) { e.onReceivedMessage(t.detail) })), this.port = chrome.runtime.connect({ name: o.LoggingCommon.LOGGING_CONTENT_BACKGROUND_PORT }), this.port.onDisconnect.addListener((function () { e.port = null })) } return e.prototype.onReceivedMessage = function (e) { var t = e.type; if (t == o.LoggingCommon.ASSERT_FAILURE_MESSAGE_TYPE) this.sendAssertFailure(e); else if (t == o.LoggingCommon.FLUSH_LOGS_MESSAGE_TYPE) { var n = e.entries; this.cachedLogs = this.cachedLogs.concat(n), this.flushLogs() } else console.warn("Received invalid message type: " + t) }, e.prototype.flushLogs = function () { if (null != this.port) { var e = {}; e.type = o.LoggingCommon.FLUSH_LOGS_MESSAGE_TYPE, e.entries = this.cachedLogs, this.port.postMessage(e), this.cachedLogs = new Array } else console.warn("Skipping log flush - port to bg disconnected") }, e.prototype.sendAssertFailure = function (e) { null != this.port ? this.port.postMessage(e) : console.warn("Skipping assert failure - port to bg disconnected") }, e.prototype.Log = function (e) { console.log(e), this.addToLogCache(o.CachedLogEntryType.INFO, e) }, e.prototype.Error = function (e) { console.error(e), this.addToLogCache(o.CachedLogEntryType.ERROR, e) }, e.prototype.Warn = function (e) { console.warn(e), this.addToLogCache(o.CachedLogEntryType.WARNING, e) }, e.prototype.Assert = function (e) { if (!o.LoggingCommon.Assert(e)) { var t = o.LoggingCommon.GetAssertLog(); this.sendAssertFailure(t) } }, e.prototype.addToLogCache = function (t, n) { this.cachedLogs.push(new o.CachedLogEntry(t, n)), this.cachedLogs.length >= e.MAX_CACHE_ENTRIES && this.flushLogs() }, e.MAX_CACHE_ENTRIES = 100, e }(); t.RegisterContentLogger = function () { o.InitializeLogger(new r) } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.BackgroundLogger = void 0; var o = n(0), r = function () { function e() { this.port = null, this.cachedLogs = new Array, this.circularTraceMode = !0 } return e.prototype.onPortConnected = function (e) { console.log("BackgroundLogger::onPortConnected"), this.port = e; var t = this; e.onMessage.addListener((function (e) { t.onReceivedMessage(e) })), e.onDisconnect.addListener((function () { console.log("BackgroundLogger - port disconnected"), t.port = null })) }, e.prototype.startFullTrace = function () { this.pruneLogs(), this.circularTraceMode = !1, this.cachedLogs.push(new o.CachedLogEntry(o.CachedLogEntryType.INFO, "<Start full trace>")) }, e.prototype.stopFullTrace = function () { this.circularTraceMode = !0, this.cachedLogs.push(new o.CachedLogEntry(o.CachedLogEntryType.INFO, "<Stop full trace>")) }, e.prototype.onReceivedMessage = function (e) { var t = e.type; if (console.log("BackgroundLogger::onReceivedMessage - messageType: " + t), t == o.LoggingCommon.ASSERT_FAILURE_MESSAGE_TYPE) this.sendAssertFailure(e); else if (t == o.LoggingCommon.FLUSH_LOGS_MESSAGE_TYPE) { var n = e.entries; o.MMR_ASSERT(null != n), this.cachedLogs = this.cachedLogs.concat(n), this.pruneLogs() } else console.warn("Received invalid message type: " + t) }, e.prototype.pruneLogs = function () { if (this.circularTraceMode) for (; this.cachedLogs.length > e.CIRCULAR_TRACE_MAX_ENTRIES;)this.cachedLogs.shift() }, e.prototype.getLogs = function () { return this.cachedLogs }, e.prototype.sendAssertFailure = function (e) { e.type == o.LoggingCommon.ASSERT_FAILURE_MESSAGE_TYPE && (console.log("backgroundLogger: sendAssertFailure: " + e), document.dispatchEvent(new CustomEvent(o.LoggingCommon.ASSERT_FAILURE_BACKGROUND_PORT, { detail: e }))) }, e.prototype.Log = function (e) { console.log(e) }, e.prototype.Error = function (e) { console.error(e) }, e.prototype.Warn = function (e) { console.warn(e) }, e.prototype.Assert = function (e) { if (!o.LoggingCommon.Assert(e)) { var t = o.LoggingCommon.GetAssertLog(); this.sendAssertFailure(t) } }, e.CIRCULAR_TRACE_MAX_ENTRIES = 5e3, e }(); t.BackgroundLogger = r }]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbG9nZ2luZ0NvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9lbGVtZW50U2hpbUNvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9uYXRpdmVNZXNzYWdpbmdQcm94eUNvbW1vbi50cyIsIndlYnBhY2s6Ly8vLi9sb2NhbGl6ZWRTdHJpbmdIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL21tckluamVjdGlvblBhcmFtZXRlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vZWxlY3Ryb25faW5qZWN0b3IudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZWxlY3Ryb25cIiIsIndlYnBhY2s6Ly8vLi9uYXRpdmVNZXNzYWdpbmdDb250ZW50UHJveHkudHMiLCJ3ZWJwYWNrOi8vLy4vZWxlY3Ryb25Mb2dnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vY29udGVudExvZ2dlci50cyIsIndlYnBhY2s6Ly8vLi9iYWNrZ3JvdW5kTG9nZ2VyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiTG9nZ2luZ0NvbW1vbiIsIkNhY2hlZExvZ0VudHJ5IiwiQ2FjaGVkTG9nRW50cnlUeXBlIiwiSW5pdGlhbGl6ZUxvZ2dlciIsIk1NUl9BU1NFUlQiLCJNTVJfV0FSTiIsIk1NUl9FUlIiLCJNTVJfTE9HIiwibmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25fMSIsImdfbG9nZ2VyIiwibG9nU3RyaW5nIiwiTG9nIiwiZXJyb3JTdHJpbmciLCJFcnJvciIsIndhcm5pbmdTdHJpbmciLCJXYXJuIiwiYXNzZXJ0aW9uIiwiQXNzZXJ0IiwibG9nZ2VyIiwidHlwZSIsInRoaXMiLCJHZXRBc3NlcnRMb2ciLCJjYWxsZXJMb2ciLCJzdGFjayIsInNwbGl0IiwidG9TdHJpbmciLCJ0cmltIiwibWVzc2FnZSIsIkFTU0VSVF9GQUlMVVJFX01FU1NBR0VfVFlQRSIsIlByb3h5Q29tbW9uIiwiQkdfSE9TVF9BU1NFUlRfRkFJTFVSRV9NRVNTQUdFX1RZUEUiLCJsaW5lIiwibWF0Y2giLCJjb25zb2xlIiwibG9nIiwiTE9HR0lOR19QQUdFX1RPX0NPTlRFTlRfRVZFTlQiLCJMT0dHSU5HX0NPTlRFTlRfVE9fUEFHRV9FVkVOVCIsIkxPR0dJTkdfQ09OVEVOVF9CQUNLR1JPVU5EX1BPUlQiLCJBU1NFUlRfRkFJTFVSRV9CQUNLR1JPVU5EX1BPUlQiLCJGTFVTSF9MT0dTX01FU1NBR0VfVFlQRSIsIm1tcldlYlJ0Y1N0YXR1c1RvRE9NRXJyb3IiLCJ0cnlKc29uU3RyaW5naWZ5IiwiU2hpbUNvbW1vbiIsIlBsYXliYWNrUGF0aE1vZGUiLCJnZXRTaGltT2JqZWN0Iiwic2hpbVByb3h5UHJvcGVydHlOYW1lIiwic2hpbVByb3BlcnR5TmFtZSIsIlNvdXJjZUJ1ZmZlckxpc3RQcm94eSIsIlRleHRUcmFja0xpc3RQcm94eSIsImNyZWF0ZVRpbWVSYW5nZXMiLCJsb2dnaW5nQ29tbW9uXzEiLCJ0aW1lUmFuZ2VzQXJyYXkiLCJ0aW1lUmFuZ2VzIiwidW5kZWZpbmVkIiwiZm9yRWFjaCIsIkFycmF5IiwiaW5kZXgiLCJhcnJheSIsIkluZmluaXR5IiwicmV0IiwiVGltZVJhbmdlcyIsImxlbmd0aCIsInN0YXJ0IiwiZW5kIiwiZ2V0VHJhY2tCeUlkIiwiaWQiLCJpdGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxpc3RlbmVyIiwib3B0aW9ucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpdGVyYXRvciIsImRpc3BhdGNoRXZlbnQiLCJldmVudCIsInBhcmVudE1lZGlhU291cmNlIiwiX3RoaXMiLCJzb3VyY2VCdWZmZXJzIiwiZXZlbnRMaXN0ZW5lcnMiLCJNYXAiLCJldmVudEhhbmRsZXJzIiwiZXZlbnROYW1lIiwicHJvcE5hbWUiLCJzZXQiLCJuZXdWYWx1ZSIsImhhcyIsInB1c2giLCJldmVudExpc3RlbmVyTGlzdCIsImxpc3RlbmVySW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwidmFsdWVzIiwiZXZlbnRDYW5jZWxlZCIsInRoaXNCdWZmZXJMaXN0IiwiaGFuZGxlRXZlbnQiLCJhcHBseSIsImNhbmNlbGFibGUiLCJhZGRTb3VyY2VCdWZmZXIiLCJzb3VyY2VCdWZmZXIiLCJ1cGRhdGVTb3VyY2VCdWZmZXJzIiwiQ3VzdG9tRXZlbnQiLCJyZW1vdmVTb3VyY2VCdWZmZXIiLCJzb3VyY2VCdWZmZXJJbmRleCIsInNldFNvdXJjZUJ1ZmZlcnMiLCJvYmoiLCJpbml0aWFsUGxheWJhY2tQYXRoTW9kZSIsIlVOS05PV04iLCJKU09OIiwic3RyaW5naWZ5IiwiZSIsInN0YXR1c19jb2RlIiwiVHlwZUVycm9yIiwiRE9NRXhjZXB0aW9uIiwiSWNvblN0YXR1cyIsIlBST1hZX1JFQ0VJVkVfTUVTU0FHRV9FVkVOVCIsIlBST1hZX1NFTkRfTUVTU0FHRV9FVkVOVCIsIlBST1hZX1NFTkRfTU1SX0VOR0FHRUQiLCJQUk9YWV9TRU5EX1NBTUVfT1JJR0lOX1BBUkVOVF9JRCIsIkNPTlRFTlRfQkdfUFJPWFlfQ09OTkVDVElPTl9OQU1FIiwiQ09OVEVOVF9CR19DTElFTlRfQ09OTkVDVEVEX01FU1NBR0VfVFlQRSIsIkNPTlRFTlRfQkdfTU1SX0FDVElWRV9NRVNTQUdFX1RZUEUiLCJDT05URU5UX0JHX1NBTUVfT1JJR0lOX1BBUkVOVF9NRVNTQUdFX1RZUEUiLCJDT05URU5UX0JHX1JFQ09OTkVDVF9NRVNTQUdFX1RZUEUiLCJOQVRJVkVfTUVTU0FHSU5HX0FQUF9OQU1FIiwiQkdfUFJPWFlfQ09OVkVSVF9UQUJfVElUTEVfVE9fV0lORE9XIiwiUE9QVVBfQkdfUFJPWFlfQ09OTkVDVElPTl9OQU1FIiwiQkdfSE9TVF9TVEFSVF9UUkFDSU5HX01FU1NBR0VfVFlQRSIsIkJHX0hPU1RfU1RPUF9UUkFDSU5HX01FU1NBR0VfVFlQRSIsIkJHX0hPU1RfRkxVU0hfTE9HU19NRVNTQUdFX1RZUEUiLCJIT1NUX0JHX1RSQUNJTkdfU1RBUlRFRF9NRVNTQUdFX1RZUEUiLCJIT1NUX0JHX1RSQUNJTkdfU1RPUFBFRF9NRVNTQUdFX1RZUEUiLCJIT1NUX0JHX0xPR1NfRkxVU0hfTUVTU0FHRV9UWVBFIiwiTG9jYWxpemVkU3RyaW5nSGFuZGxlciIsImRlZmF1bHRTdHJpbmdzT2JqZWN0IiwibG9jYWxpemVkU3RyaW5nc09iamVjdCIsImdldE93blByb3BlcnR5TmFtZXMiLCJ2YWwiLCJkaXNwYXRjaExvY2FsaXplZFN0cmluZ3MiLCJjaHJvbWUiLCJpMThuIiwiZ2V0TWVzc2FnZSIsImRvY3VtZW50IiwiZGV0YWlsIiwibGlzdGVuRm9yTG9jYWxpemVkU3RyaW5ncyIsImdldExvY2FsaXplZFN0cmluZ3MiLCJNbXJJbmplY3Rpb25QYXJhbWV0ZXJIYW5kbGVyIiwic2V0UGFyYW1zIiwicGFyYW1zIiwiaW5wdXRQYXJhbWV0ZXJzRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lclRleHQiLCJlbmFibGVTaGltbWluZyIsIm9jY2x1c2lvblN1cHBvcnRWZXJzaW9uIiwiZW5hYmxlUGFzc3Rocm91Z2giLCJ3ZWJydGNTdXBwb3J0VmVyc2lvbiIsIm1tclN1cHBvcnRWZXJzaW9uIiwiY29udGVudFBvcnRJZCIsImVuYWJsZVZpZGVvU3RhdHVzT3ZlcmxheSIsImVuYWJsZVZpZGVvT3V0bGluZXMiLCJoZWFkIiwiZG9jdW1lbnRFbGVtZW50IiwicHJlcGVuZCIsInJlYWRQYXJhbXMiLCJpbnB1dFBhcmFtZXRlcnNFbGVtZW50cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5wdXRQYXJhbWV0ZXJUZXh0IiwiaW5wdXRQYXJhbVN0cmluZ3MiLCJwYXJzZUludCIsImV4dGVuZFN0YXRpY3MiLCJfX2V4dGVuZHMiLCJiIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfXyIsImNvbnN0cnVjdG9yIiwiTG9vcGJhY2tDb25uZWN0aW9uUG9ydCIsImdfZWxlY3Ryb25Mb2dnZXIiLCJuYXRpdmVNZXNzYWdpbmdDb250ZW50UHJveHlfMSIsImVsZWN0cm9uTG9nZ2VyXzEiLCJlbGVjdHJvbl8xIiwiZ19jaGFubmVsSW5zdGFuY2VJZCIsIkNocm9tZUV2ZW50IiwibGlzdGVuZXJMaXN0IiwiYWRkTGlzdGVuZXIiLCJjYWxsYmFjayIsInJlbW92ZUxpc3RlbmVyIiwiZ2V0UnVsZXMiLCJydWxlSWRlbnRpZmllcnMiLCJyZW1vdmVSdWxlcyIsImFkZFJ1bGVzIiwicnVsZXMiLCJoYXNMaXN0ZW5lciIsImhhc0xpc3RlbmVycyIsIlBvcnREaXNjb25uZWN0RXZlbnQiLCJfc3VwZXIiLCJhcmd1bWVudHMiLCJwb3J0IiwiUG9ydE1lc3NhZ2VFdmVudCIsIkNvbm5lY3Rpb25Qb3J0IiwiY29ubmVjdEluZm8iLCJvbkRpc2Nvbm5lY3QiLCJvbk1lc3NhZ2UiLCJpcGNSZW5kZXJlciIsIm9uIiwicG9zdE1lc3NhZ2UiLCJzZW5kIiwicGF5bG9hZCIsImRpc2Nvbm5lY3QiLCJOb09wTG9jU3VwcG9ydCIsImdldEFjY2VwdExhbmd1YWdlcyIsIm1lc3NhZ2VOYW1lIiwic3Vic3RpdHV0aW9ucyIsImdldFVJTGFuZ3VhZ2UiLCJkZXRlY3RMYW5ndWFnZSIsInRleHQiLCJydW50aW1lIiwicGFyYW0xIiwicGFyYW0yIiwicmVzdWx0Iiwic2VuZFN5bmMiLCJsb2dnaW5nQ2hhbm5lbCIsIm1haW5DaGFubmVsIiwiRWxlY3Ryb25Mb2dnZXIiLCJOYXRpdmVNZXNzYWdpbmdDb250ZW50UHJveHkiLCJtZXNzYWdlVHlwZSIsInJlcXVpcmUiLCJtbXJJbmplY3Rpb25QYXJhbWV0ZXJzXzEiLCJsb2NhbGl6ZWRTdHJpbmdIYW5kbGVyXzEiLCJlbGVtZW50U2hpbUNvbW1vbl8xIiwiaW5qZWN0ZWRNbXJNYWluIiwiY2xpZW50Q29ubmVjdGVkIiwiZGlzY29ubmVjdGVkIiwiY29ubmVjdCIsInByb3h5IiwiZW5hYmxlZFVSTHMiLCJjdXJyZW50VVJMXzEiLCJVUkwiLCJzaGltRW5hYmxlZEZvclVSTF8xIiwibWF0Y2hQYXR0ZXJuIiwicmVnRXhwIiwiUmVnRXhwIiwiZW5hYmxlZFdlYlJ0Y1VSTHMiLCJzaGltRW5hYmxlZEZvcldlYlJ0Y1VSTF8xIiwiZW5hYmxlRm9yQWxsU2l0ZXMiLCJlbmFibGVGb3JBbGxXZWJSdGNTaXRlcyIsImluamVjdE1tck1haW4iLCJtYW5pZmVzdERhdGEiLCJnZXRNYW5pZmVzdCIsInZlcnNpb24iLCJkb21haW4iLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJiYWNrZ3JvdW5kUG9ydCIsInBhcmVudE5hdGl2ZVBvcnRJZCIsInRlc3REaXJlY3RJbmplY3RTY3JpcHQiLCJpbm5lckhUTUwiLCJjb250ZW50TG9nZ2VyXzEiLCJiYWNrZ3JvdW5kTG9nZ2VyXzEiLCJlbGVjdHJvbl9pbmplY3Rvcl8xIiwiYmFja2dyb3VuZExvZ2dlciIsIkJhY2tncm91bmRMb2dnZXIiLCJvblBvcnRDb25uZWN0ZWQiLCJSZWdpc3RlckNvbnRlbnRMb2dnZXIiLCJtc2ciLCJzdGFydEZ1bGxUcmFjZSIsInN0b3BGdWxsVHJhY2UiLCJDb250ZW50TG9nZ2VyIiwiY2FjaGVkTG9ncyIsImNvbnRlbnRMb2dnZXIiLCJvblJlY2VpdmVkTWVzc2FnZSIsInNlbmRBc3NlcnRGYWlsdXJlIiwiY2FjaGVkRW50cmllcyIsImNvbmNhdCIsImZsdXNoTG9ncyIsIndhcm4iLCJhZGRUb0xvZ0NhY2hlIiwiSU5GTyIsImVycm9yIiwiRVJST1IiLCJXQVJOSU5HIiwiTUFYX0NBQ0hFX0VOVFJJRVMiLCJjaXJjdWxhclRyYWNlTW9kZSIsInBydW5lTG9ncyIs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Z0JsRCxjQUFjc0MsK0JBQWdDLENBQUV1RyxPQUFRbEgsT0FHdkh3TyxFQUFpQnZRLFVBQVVlLElBQU0sU0FBVUQsR0FDdkN1QixRQUFRQyxJQUFJeEIsSUFFaEJ5UCxFQUFpQnZRLFVBQVVpQixNQUFRLFNBQVVELEdBQ3pDcUIsUUFBUW1QLE1BQU14USxJQUVsQnVQLEVBQWlCdlEsVUFBVW1CLEtBQU8sU0FBVUQsR0FDeENtQixRQUFRZ1AsS0FBS25RLElBRWpCcVAsRUFBaUJ2USxVQUFVcUIsT0FBUyxTQUFVRCxHQUMxQyxJQUFLa0MsRUFBZ0JsRCxjQUFjaUIsT0FBT0QsR0FBWSxDQUNsRCxJQUFJVyxFQUFVdUIsRUFBZ0JsRCxjQUFjcUIsZUFDNUNELEtBQUt5UCxrQkFBa0JsUCxLQUcvQndPLEVBQWlCd0IsMkJBQTZCLElBQ3ZDeEIsRUE3RTBCLEdBK0VyQ3JTLEVBQVFxUyxpQkFBbUJBIiwiZmlsZSI6InByZWxvYWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gOCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTG9nZ2luZ0NvbW1vbiA9IGV4cG9ydHMuQ2FjaGVkTG9nRW50cnkgPSBleHBvcnRzLkNhY2hlZExvZ0VudHJ5VHlwZSA9IGV4cG9ydHMuSW5pdGlhbGl6ZUxvZ2dlciA9IGV4cG9ydHMuTU1SX0FTU0VSVCA9IGV4cG9ydHMuTU1SX1dBUk4gPSBleHBvcnRzLk1NUl9FUlIgPSBleHBvcnRzLk1NUl9MT0cgPSB2b2lkIDA7XG52YXIgbmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25fMSA9IHJlcXVpcmUoXCIuL25hdGl2ZU1lc3NhZ2luZ1Byb3h5Q29tbW9uXCIpO1xuO1xudmFyIGdfbG9nZ2VyID0gbnVsbDtcbmZ1bmN0aW9uIE1NUl9MT0cobG9nU3RyaW5nKSB7XG4gICAgZ19sb2dnZXIuTG9nKGxvZ1N0cmluZyk7XG59XG5leHBvcnRzLk1NUl9MT0cgPSBNTVJfTE9HO1xuZnVuY3Rpb24gTU1SX0VSUihlcnJvclN0cmluZykge1xuICAgIGdfbG9nZ2VyLkVycm9yKGVycm9yU3RyaW5nKTtcbn1cbmV4cG9ydHMuTU1SX0VSUiA9IE1NUl9FUlI7XG5mdW5jdGlvbiBNTVJfV0FSTih3YXJuaW5nU3RyaW5nKSB7XG4gICAgZ19sb2dnZXIuV2Fybih3YXJuaW5nU3RyaW5nKTtcbn1cbmV4cG9ydHMuTU1SX1dBUk4gPSBNTVJfV0FSTjtcbmZ1bmN0aW9uIE1NUl9BU1NFUlQoYXNzZXJ0aW9uKSB7XG4gICAgZ19sb2dnZXIuQXNzZXJ0KGFzc2VydGlvbik7XG59XG5leHBvcnRzLk1NUl9BU1NFUlQgPSBNTVJfQVNTRVJUO1xuZnVuY3Rpb24gSW5pdGlhbGl6ZUxvZ2dlcihsb2dnZXIpIHtcbiAgICBnX2xvZ2dlciA9IGxvZ2dlcjtcbn1cbmV4cG9ydHMuSW5pdGlhbGl6ZUxvZ2dlciA9IEluaXRpYWxpemVMb2dnZXI7XG52YXIgQ2FjaGVkTG9nRW50cnlUeXBlO1xuKGZ1bmN0aW9uIChDYWNoZWRMb2dFbnRyeVR5cGUpIHtcbiAgICBDYWNoZWRMb2dFbnRyeVR5cGVbQ2FjaGVkTG9nRW50cnlUeXBlW1wiRVJST1JcIl0gPSAxXSA9IFwiRVJST1JcIjtcbiAgICBDYWNoZWRMb2dFbnRyeVR5cGVbQ2FjaGVkTG9nRW50cnlUeXBlW1wiV0FSTklOR1wiXSA9IDJdID0gXCJXQVJOSU5HXCI7XG4gICAgQ2FjaGVkTG9nRW50cnlUeXBlW0NhY2hlZExvZ0VudHJ5VHlwZVtcIklORk9cIl0gPSAzXSA9IFwiSU5GT1wiO1xufSkoQ2FjaGVkTG9nRW50cnlUeXBlID0gZXhwb3J0cy5DYWNoZWRMb2dFbnRyeVR5cGUgfHwgKGV4cG9ydHMuQ2FjaGVkTG9nRW50cnlUeXBlID0ge30pKTtcbjtcbnZhciBDYWNoZWRMb2dFbnRyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYWNoZWRMb2dFbnRyeSh0eXBlLCBsb2dTdHJpbmcpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5sb2dTdHJpbmcgPSBsb2dTdHJpbmc7XG4gICAgfVxuICAgIHJldHVybiBDYWNoZWRMb2dFbnRyeTtcbn0oKSk7XG5leHBvcnRzLkNhY2hlZExvZ0VudHJ5ID0gQ2FjaGVkTG9nRW50cnk7XG52YXIgTG9nZ2luZ0NvbW1vbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb2dnaW5nQ29tbW9uKCkge1xuICAgIH1cbiAgICBMb2dnaW5nQ29tbW9uLkFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24pIHtcbiAgICAgICAgLy8gREVCVUcgZGVmaW5lZCBieSBEZWZpbmVQbHVnaW4gaW4gd2VicGFjay5jb25maWcuanNcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBpZiAoREVCVUcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KGFzc2VydGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICghIWFzc2VydGlvbik7XG4gICAgfTtcbiAgICBMb2dnaW5nQ29tbW9uLkdldEFzc2VydExvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gR2VuZXJhdGVzIGFuIGVycm9yIHN0YWNrIGFuZCBleHRyYWN0IHRoZSBjYWxsZXIncyBmdW5jdGlvbiBsb2NhdGlvbi5cbiAgICAgICAgLy8gTm90ZTogZHVlIHRvIFR5cGVTY3JpcHQgY29tcGlsYXRpb24sIHRoaXMgZGF0YSBkb2VzIG5vdCBjb3JyZXNwb25kIHdpdGggc291cmNlIGNvZGUuXG4gICAgICAgIC8vIFdlIGluc3RlYWQgcmVwb3J0IHRoZSBlcnJvciBtZXNzYWdlIGluIGl0cyBlbnRpcmV0eSBhbG9uZyB3aXRoIHRoZSBjb2x1bW4gbnVtYmVyLFxuICAgICAgICAvLyBzaW5jZSBsaW5lIG51bWJlciBpcyBhbHdheXMgMSBpbiB0aGUgY29tcGlsZWQganMgY29kZS5cbiAgICAgICAgdmFyIGUgPSAobmV3IEVycm9yKCkpLnN0YWNrLnNwbGl0KCdhdCAnKTtcbiAgICAgICAgdmFyIGNhbGxlckxvZyA9IGVbNF0udG9TdHJpbmcoKS50cmltKCk7IC8vIDR0aCBpbmRleCBpcyB0aGUgY2FsbGVyIG9mIE1NUl9BU1NFUlQgKEVycm9yIG1lc3NhZ2UsIEdldEFzc2VydExvZywgSUxvZ2dlcjo6QXNzZXJ0LCBNTVJfQVNTRVJULCA8Y2FsbGVyPilcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgT2JqZWN0KCk7XG4gICAgICAgIG1lc3NhZ2VbJ3R5cGUnXSA9IExvZ2dpbmdDb21tb24uQVNTRVJUX0ZBSUxVUkVfTUVTU0FHRV9UWVBFOyAvLyBGb3IgYmV0d2VlbiBleHRlbnNpb24gY29tcG9uZW50c1xuICAgICAgICBtZXNzYWdlWydtZXNzYWdlVHlwZSddID0gbmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25fMS5Qcm94eUNvbW1vbi5CR19IT1NUX0FTU0VSVF9GQUlMVVJFX01FU1NBR0VfVFlQRTsgLy8gRm9yIGhvc3RcbiAgICAgICAgbWVzc2FnZVsnZmlsZU5hbWUnXSA9IGNhbGxlckxvZztcbiAgICAgICAgdmFyIGxpbmUgPSBjYWxsZXJMb2cubWF0Y2goLzooPzpcXGQrKTooXFxkKylbXlxcZF0qJC8pOyAvLyBNYXRjaGVzIGNvbCBudW1iZXJcbiAgICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VbJ2xpbmUnXSA9IGxpbmVbMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlWydsaW5lJ10gPSAwOyAvLyBkZWZhdWx0IHRvIDAgaWYgcmVnZXggZmFpbHNcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhcIk1NUl9BU1NFUlQ6IFwiICsgY2FsbGVyTG9nICsgXCIgTGluZTogXCIgKyBtZXNzYWdlWydsaW5lJ10gKyBcIiBMaW5lIG9iamVjdDogXCIgKyBsaW5lKTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfTtcbiAgICBMb2dnaW5nQ29tbW9uLkxPR0dJTkdfUEFHRV9UT19DT05URU5UX0VWRU5UID0gXCJNc1JkY01tckxvZ2dpbmdQYWdlVG9Db250ZW50X01lc3NhZ2VcIjtcbiAgICBMb2dnaW5nQ29tbW9uLkxPR0dJTkdfQ09OVEVOVF9UT19QQUdFX0VWRU5UID0gXCJNc1JkY01tckxvZ2dpbmdDb250ZW50VG9QYWdlX01lc3NhZ2VcIjtcbiAgICBMb2dnaW5nQ29tbW9uLkxPR0dJTkdfQ09OVEVOVF9CQUNLR1JPVU5EX1BPUlQgPSBcIk1zUmRjTW1yTG9nZ2luZ0JhY2tncm91bmRDb21tXCI7XG4gICAgTG9nZ2luZ0NvbW1vbi5BU1NFUlRfRkFJTFVSRV9CQUNLR1JPVU5EX1BPUlQgPSBcIk1zUmRjTW1yQXNzZXJ0QmFja2dyb3VuZENvbW1cIjtcbiAgICBMb2dnaW5nQ29tbW9uLkFTU0VSVF9GQUlMVVJFX01FU1NBR0VfVFlQRSA9IFwicmVwb3J0QXNzZXJ0RmFpbHVyZVwiO1xuICAgIExvZ2dpbmdDb21tb24uRkxVU0hfTE9HU19NRVNTQUdFX1RZUEUgPSBcImZsdXNoTG9nRW50cmllc1wiO1xuICAgIHJldHVybiBMb2dnaW5nQ29tbW9uO1xufSgpKTtcbmV4cG9ydHMuTG9nZ2luZ0NvbW1vbiA9IExvZ2dpbmdDb21tb247XG47XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubW1yV2ViUnRjU3RhdHVzVG9ET01FcnJvciA9IGV4cG9ydHMudHJ5SnNvblN0cmluZ2lmeSA9IGV4cG9ydHMuU2hpbUNvbW1vbiA9IGV4cG9ydHMuUGxheWJhY2tQYXRoTW9kZSA9IGV4cG9ydHMuZ2V0U2hpbU9iamVjdCA9IGV4cG9ydHMuc2hpbVByb3h5UHJvcGVydHlOYW1lID0gZXhwb3J0cy5zaGltUHJvcGVydHlOYW1lID0gZXhwb3J0cy5Tb3VyY2VCdWZmZXJMaXN0UHJveHkgPSBleHBvcnRzLlRleHRUcmFja0xpc3RQcm94eSA9IGV4cG9ydHMuY3JlYXRlVGltZVJhbmdlcyA9IHZvaWQgMDtcbnZhciBsb2dnaW5nQ29tbW9uXzEgPSByZXF1aXJlKFwiLi9sb2dnaW5nQ29tbW9uXCIpO1xuZnVuY3Rpb24gY3JlYXRlVGltZVJhbmdlcyh0aW1lUmFuZ2VzQXJyYXkpIHtcbiAgICAvLyBDbGVhbiB1cCB0aGUgdGltZVJhbmdlc0FycmF5XG4gICAgdmFyIHRpbWVSYW5nZXMgPSB0aW1lUmFuZ2VzQXJyYXk7XG4gICAgaWYgKHRpbWVSYW5nZXMuZm9yRWFjaCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGltZVJhbmdlcyA9IG5ldyBBcnJheSgpO1xuICAgIH1cbiAgICB0aW1lUmFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgaWYgKHZhbHVlW1wic3RhcnRcIl0gPT0gbnVsbCkge1xuICAgICAgICAgICAgYXJyYXlbaW5kZXhdW1wic3RhcnRcIl0gPSBJbmZpbml0eTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWVbXCJlbmRcIl0gPT0gbnVsbCkge1xuICAgICAgICAgICAgYXJyYXlbaW5kZXhdW1wiZW5kXCJdID0gSW5maW5pdHk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShUaW1lUmFuZ2VzLnByb3RvdHlwZSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJldCwgJ2xlbmd0aCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aW1lUmFuZ2VzLmxlbmd0aDsgfVxuICAgIH0pO1xuICAgIHJldC5zdGFydCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGltZVJhbmdlc1tpbmRleF0uc3RhcnQ7XG4gICAgfTtcbiAgICByZXQuZW5kID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aW1lUmFuZ2VzW2luZGV4XS5lbmQ7XG4gICAgfTtcbiAgICByZXR1cm4gcmV0O1xufVxuZXhwb3J0cy5jcmVhdGVUaW1lUmFuZ2VzID0gY3JlYXRlVGltZVJhbmdlcztcbnZhciBUZXh0VHJhY2tMaXN0UHJveHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGV4dFRyYWNrTGlzdFByb3h5KCkge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIFRleHRUcmFja0xpc3RQcm94eS5wcm90b3R5cGUuZ2V0VHJhY2tCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIFRleHRUcmFja0xpc3RQcm94eS5wcm90b3R5cGUuaXRlbSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9O1xuICAgIFRleHRUcmFja0xpc3RQcm94eS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9O1xuICAgIFRleHRUcmFja0xpc3RQcm94eS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9O1xuICAgIFRleHRUcmFja0xpc3RQcm94eS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfTtcbiAgICBUZXh0VHJhY2tMaXN0UHJveHkucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfTtcbiAgICByZXR1cm4gVGV4dFRyYWNrTGlzdFByb3h5O1xufSgpKTtcbmV4cG9ydHMuVGV4dFRyYWNrTGlzdFByb3h5ID0gVGV4dFRyYWNrTGlzdFByb3h5O1xudmFyIFNvdXJjZUJ1ZmZlckxpc3RQcm94eSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTb3VyY2VCdWZmZXJMaXN0UHJveHkocGFyZW50TWVkaWFTb3VyY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zb3VyY2VCdWZmZXJzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5wYXJlbnRNZWRpYVNvdXJjZSA9IHBhcmVudE1lZGlhU291cmNlO1xuICAgICAgICBTb3VyY2VCdWZmZXJMaXN0UHJveHkuZXZlbnRIYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICAgICAgICAgIC8vIGltcGxlbWVudGF0aW9uIGJhc2VkIG9uIG9uY29ubmVjdGlvbnN0YXRlY2hhbmdlIGZyb20gaHR0cHM6Ly93ZWJydGMuZ2l0aHViLmlvL2FkYXB0ZXIvYWRhcHRlci1sYXRlc3QuanNcbiAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9ICdfb24nICsgZXZlbnROYW1lICsgJ2V2ZW50SGFuZGxlcic7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMsICdvbicgKyBldmVudE5hbWUsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbcHJvcE5hbWVdIHx8IG51bGw7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1twcm9wTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHRoaXNbcHJvcE5hbWVdLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzW3Byb3BOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcHJvcE5hbWVdID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB0aGlzW3Byb3BOYW1lXSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFNvdXJjZUJ1ZmZlckxpc3RQcm94eS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIlNvdXJjZUJ1ZmZlckxpc3RQcm94eTo6YWRkRXZlbnRMaXN0ZW5lciAtIHR5cGU6IFwiICsgdHlwZSk7XG4gICAgICAgIGlmICghdGhpcy5ldmVudExpc3RlbmVycy5oYXModHlwZSkpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KHR5cGUsIG5ldyBBcnJheSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmdldCh0eXBlKS5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5wYXJlbnRNZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIFNvdXJjZUJ1ZmZlckxpc3RQcm94eS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIlNvdXJjZUJ1ZmZlckxpc3RQcm94eTo6cmVtb3ZlRXZlbnRMaXN0ZW5lciAtIHR5cGU6IFwiICsgdHlwZSk7XG4gICAgICAgIHZhciBldmVudExpc3RlbmVyTGlzdCA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KHR5cGUpO1xuICAgICAgICBpZiAoZXZlbnRMaXN0ZW5lckxpc3QgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbGlzdGVuZXJJbmRleCA9IGV2ZW50TGlzdGVuZXJMaXN0LmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVySW5kZXggIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRMaXN0ZW5lckxpc3Quc3BsaWNlKGxpc3RlbmVySW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50TWVkaWFTb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBTb3VyY2VCdWZmZXJMaXN0UHJveHkucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfTE9HKFwiU291cmNlQnVmZmVyTGlzdFByb3h5OjppdGVyYXRvclwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlQnVmZmVycy52YWx1ZXMoKTtcbiAgICB9O1xuICAgIFNvdXJjZUJ1ZmZlckxpc3RQcm94eS5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIlNvdXJjZUJ1ZmZlckxpc3RQcm94eTo6ZGlzcGF0Y2hFdmVudCAtIGV2ZW50IHR5cGU6IFwiICsgZXZlbnQudHlwZSk7XG4gICAgICAgIHZhciBldmVudExpc3RlbmVyTGlzdCA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGV2ZW50LnR5cGUpO1xuICAgICAgICB2YXIgZXZlbnRDYW5jZWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgdGhpc0J1ZmZlckxpc3QgPSB0aGlzO1xuICAgICAgICBpZiAoZXZlbnRMaXN0ZW5lckxpc3QgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBldmVudExpc3RlbmVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lciwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyLmhhbmRsZUV2ZW50ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudENhbmNlbGVkID0gIWxpc3RlbmVyLmhhbmRsZUV2ZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnQsICd0YXJnZXQnLCB7IHZhbHVlOiB0aGlzQnVmZmVyTGlzdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV2ZW50LCAnY3VycmVudFRhcmdldCcsIHsgdmFsdWU6IHRoaXNCdWZmZXJMaXN0IH0pO1xuICAgICAgICAgICAgICAgICAgICBldmVudENhbmNlbGVkID0gIWxpc3RlbmVyLmFwcGx5KHRoaXNCdWZmZXJMaXN0LCBbZXZlbnRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBldmVudENhbmNlbGVkID0gZXZlbnRDYW5jZWxlZCAmJiBldmVudC5jYW5jZWxhYmxlO1xuICAgICAgICByZXR1cm4gIWV2ZW50Q2FuY2VsZWQ7XG4gICAgfTtcbiAgICBTb3VyY2VCdWZmZXJMaXN0UHJveHkucHJvdG90eXBlLmFkZFNvdXJjZUJ1ZmZlciA9IGZ1bmN0aW9uIChzb3VyY2VCdWZmZXIpIHtcbiAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9MT0coXCJTb3VyY2VCdWZmZXJMaXN0UHJveHk6OmFkZFNvdXJjZUJ1ZmZlclwiKTtcbiAgICAgICAgdGhpcy5zb3VyY2VCdWZmZXJzLnB1c2goc291cmNlQnVmZmVyKTtcbiAgICAgICAgdGhpcy51cGRhdGVTb3VyY2VCdWZmZXJzKCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2FkZHNvdXJjZWJ1ZmZlcicpKTtcbiAgICB9O1xuICAgIFNvdXJjZUJ1ZmZlckxpc3RQcm94eS5wcm90b3R5cGUucmVtb3ZlU291cmNlQnVmZmVyID0gZnVuY3Rpb24gKHNvdXJjZUJ1ZmZlcikge1xuICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIlNvdXJjZUJ1ZmZlckxpc3RQcm94eTo6cmVtb3ZlU291cmNlQnVmZmVyXCIpO1xuICAgICAgICB2YXIgc291cmNlQnVmZmVySW5kZXggPSB0aGlzLnNvdXJjZUJ1ZmZlcnMuaW5kZXhPZihzb3VyY2VCdWZmZXIpO1xuICAgICAgICBpZiAoc291cmNlQnVmZmVySW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VCdWZmZXJzLnNwbGljZShzb3VyY2VCdWZmZXJJbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNvdXJjZUJ1ZmZlcnMoKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3JlbW92ZXNvdXJjZWJ1ZmZlcicpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU291cmNlQnVmZmVyTGlzdFByb3h5LnByb3RvdHlwZS5zZXRTb3VyY2VCdWZmZXJzID0gZnVuY3Rpb24gKHNvdXJjZUJ1ZmZlcnMpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VCdWZmZXJzID0gc291cmNlQnVmZmVycztcbiAgICAgICAgdGhpcy51cGRhdGVTb3VyY2VCdWZmZXJzKCk7XG4gICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfTE9HKFwiU291cmNlQnVmZmVyTGlzdFByb3h5OjpzZXRTb3VyY2VCdWZmZXJzIC0gdGhpcy5sZW5ndGg9XCIgKyB0aGlzLmxlbmd0aCk7XG4gICAgfTtcbiAgICBTb3VyY2VCdWZmZXJMaXN0UHJveHkucHJvdG90eXBlLnVwZGF0ZVNvdXJjZUJ1ZmZlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc291cmNlQnVmZmVycy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICBfdGhpc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5zb3VyY2VCdWZmZXJzLmxlbmd0aDtcbiAgICB9O1xuICAgIFNvdXJjZUJ1ZmZlckxpc3RQcm94eS5ldmVudEhhbmRsZXJzID0gWydhZGRzb3VyY2VidWZmZXInLCAncmVtb3Zlc291cmNlYnVmZmVyJ107XG4gICAgcmV0dXJuIFNvdXJjZUJ1ZmZlckxpc3RQcm94eTtcbn0oKSk7XG5leHBvcnRzLlNvdXJjZUJ1ZmZlckxpc3RQcm94eSA9IFNvdXJjZUJ1ZmZlckxpc3RQcm94eTtcbmV4cG9ydHMuc2hpbVByb3BlcnR5TmFtZSA9ICdNU1JEQ19NTVJfU2hpbSc7XG5leHBvcnRzLnNoaW1Qcm94eVByb3BlcnR5TmFtZSA9IGV4cG9ydHMuc2hpbVByb3BlcnR5TmFtZSArIFwiX1Byb3h5XCI7XG5mdW5jdGlvbiBnZXRTaGltT2JqZWN0KG9iaikge1xuICAgIGlmIChvYmogIT0gdW5kZWZpbmVkICYmIG9ialtleHBvcnRzLnNoaW1Qcm9wZXJ0eU5hbWVdICE9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gb2JqW2V4cG9ydHMuc2hpbVByb3BlcnR5TmFtZV07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5leHBvcnRzLmdldFNoaW1PYmplY3QgPSBnZXRTaGltT2JqZWN0O1xudmFyIFBsYXliYWNrUGF0aE1vZGU7XG4oZnVuY3Rpb24gKFBsYXliYWNrUGF0aE1vZGUpIHtcbiAgICBQbGF5YmFja1BhdGhNb2RlW1BsYXliYWNrUGF0aE1vZGVbXCJVTktOT1dOXCJdID0gMF0gPSBcIlVOS05PV05cIjtcbiAgICBQbGF5YmFja1BhdGhNb2RlW1BsYXliYWNrUGF0aE1vZGVbXCJMT0NBTFwiXSA9IDFdID0gXCJMT0NBTFwiO1xuICAgIFBsYXliYWNrUGF0aE1vZGVbUGxheWJhY2tQYXRoTW9kZVtcIlJFTU9URVwiXSA9IDJdID0gXCJSRU1PVEVcIjtcbn0pKFBsYXliYWNrUGF0aE1vZGUgPSBleHBvcnRzLlBsYXliYWNrUGF0aE1vZGUgfHwgKGV4cG9ydHMuUGxheWJhY2tQYXRoTW9kZSA9IHt9KSk7XG52YXIgU2hpbUNvbW1vbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaGltQ29tbW9uKCkge1xuICAgIH1cbiAgICBTaGltQ29tbW9uLmluaXRpYWxQbGF5YmFja1BhdGhNb2RlID0gUGxheWJhY2tQYXRoTW9kZS5VTktOT1dOO1xuICAgIHJldHVybiBTaGltQ29tbW9uO1xufSgpKTtcbmV4cG9ydHMuU2hpbUNvbW1vbiA9IFNoaW1Db21tb247XG5mdW5jdGlvbiB0cnlKc29uU3RyaW5naWZ5KG9iaikge1xuICAgIHZhciByZXQgPSBcIjxmYWlsZWQgSlNPTi5zdHJpbmdpZnkgcGFyc2U+XCI7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0ID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9MT0coXCJ0cnlKc29uU3RyaW5naWZ5IGZhaWxlZCBmb3Igb2JqPVwiICsgb2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cbmV4cG9ydHMudHJ5SnNvblN0cmluZ2lmeSA9IHRyeUpzb25TdHJpbmdpZnk7XG4vLyBUaGlzIGZ1bmN0aW9uIG1hcHMgYW4gZXJyb3IgY29kZSB0aGF0IHdhcyByZWNlaXZlZCBmcm9tIHRoZSBNc1JEQyBjbGllbnQgdG8gYSB3ZWxsLWtub3duXG4vLyBicm93c2VyIGVycm9yIGNvZGUuIFxuZnVuY3Rpb24gbW1yV2ViUnRjU3RhdHVzVG9ET01FcnJvcihzdGF0dXNfY29kZSkge1xuICAgIC8vIFRoZSAnbWVzc2FnZScgcGFyYW1ldGVyIGlzIGEgZnJlZS1mb3JtIHRleHQgc3RyaW5nIHRoYXQgd2UgY2FuIGNob29zZSBhcmJpdHJhcmlseS5cbiAgICB2YXIgbWVzc2FnZSA9IFwiVGhlIG9wZXJhdGlvbiBmYWlsZWQgZm9yIGFuIHVua25vd24gcmVhc29uXCI7XG4gICAgLy8gVGhlICduYW1lJyBwYXJhbWV0ZXIgaXMgYSB3ZWxsLWtub3duIHN0cmluZyB0aGF0IGlzIGRvY3VtZW50ZWQgYW5kIHRoZSBicm93c2VyIHdpbGxcbiAgICAvLyBtYXAgaXQgdG8gYSBudW1lcmljYWwgY29kZS4gXG4gICAgdmFyIG5hbWUgPSBcIlVua25vd25FcnJvclwiO1xuICAgIHN3aXRjaCAoc3RhdHVzX2NvZGUpIHtcbiAgICAgICAgY2FzZSAtMTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlRoZSBvYmplY3QgY2Fubm90IGJlIGZvdW5kXCI7XG4gICAgICAgICAgICBuYW1lID0gXCJOb3RGb3VuZEVycm9yXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAtMjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlRoZSBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZFwiO1xuICAgICAgICAgICAgbmFtZSA9IFwiTm90U3VwcG9ydGVkRXJyb3JcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC0zOlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiVGhlIG9iamVjdCBpcyBpbiBhbiBpbnZhbGlkIHN0YXRlXCI7XG4gICAgICAgICAgICBuYW1lID0gXCJJbnZhbGlkU3RhdGVFcnJvclwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLTQ6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJUaGUgc3RyaW5nIGRpZCBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHBhdHRlcm5cIjtcbiAgICAgICAgICAgIG5hbWUgPSBcIlN5bnRheEVycm9yXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAtNTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlRoZSBvYmplY3QgY2Fubm90IGJlIG1vZGlmaWVkIGluIHRoaXMgd2F5XCI7XG4gICAgICAgICAgICBuYW1lID0gXCJJbnZhbGlkTW9kaWZpY2F0aW9uRXJyb3JcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIC02OlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiVGhlIG9iamVjdCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBvcGVyYXRpb24gb3IgYXJndW1lbnRcIjtcbiAgICAgICAgICAgIG5hbWUgPSBcIkludmFsaWRBY2Nlc3NFcnJvclwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLTc6XG4gICAgICAgICAgICAvLyBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIFR5cGVNaXNNYXRjaEVycm9yIGlzIGRlcHJlY2F0ZWQgYW5kIHRoZSBnZW5lcmljIEpTIFR5cGVFcnJvciBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkLlxuICAgICAgICAgICAgcmV0dXJuIFR5cGVFcnJvcihcIlRoZSB0eXBlIG9mIHRoZSBvYmplY3QgZG9lcyBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHR5cGVcIik7XG4gICAgICAgIGNhc2UgLTg6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJBIG5ldHdvcmsgZXJyb3Igb2NjdXJyZWRcIjtcbiAgICAgICAgICAgIG5hbWUgPSBcIk5ldHdvcmtFcnJvclwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLTk6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkXCI7XG4gICAgICAgICAgICBuYW1lID0gXCJBYm9ydEVycm9yXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAtMTA6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJUaGUgb3BlcmF0aW9uIHRpbWVkIG91dFwiO1xuICAgICAgICAgICAgbmFtZSA9IFwiVGltZW91dEVycm9yXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAtMTE6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJUaGUgaW5wdXQvb3V0cHV0IHJlYWQgb3BlcmF0aW9uIGZhaWxlZFwiO1xuICAgICAgICAgICAgbmFtZSA9IFwiTm90UmVhZGFibGVFcnJvclwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIC0xMiAoVW5rb3duIEVycm9yKSBpcyB0aGUgZGVmYXVsdC5cbiAgICAgICAgY2FzZSAtMTM6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJUaGUgY29uc3RyYWludCB3YXMgbm90IHNhdGlzZmllZFwiO1xuICAgICAgICAgICAgbmFtZSA9IFwiQ29uc3RyYWludEVycm9yXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAtMTQ6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJQcm92aWRlZCBkYXRhIGlzIGluYWRlcXVhdGVcIjtcbiAgICAgICAgICAgIG5hbWUgPSBcIkRhdGFFcnJvclwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgLTE1OlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiVGhlIG9wZXJhdGlvbiBmYWlsZWQgZm9yIGFuIG9wZXJhdGlvbi1zcGVjaWZpYyByZWFzb25cIjtcbiAgICAgICAgICAgIG5hbWUgPSBcIk9wZXJhdGlvbkVycm9yXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAtMTY6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJOb3QgYWxsb3dlZCBieSB0aGUgdXNlciBhZ2VudFwiO1xuICAgICAgICAgICAgbmFtZSA9IFwiTm90QWxsb3dlZEVycm9yXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gRGVmYXVsdCBpcyB0byByZXR1cm4gVW5rbm93bkVycm9yXG4gICAgfVxuICAgIHJldHVybiBuZXcgRE9NRXhjZXB0aW9uKG1lc3NhZ2UsIG5hbWUpO1xufVxuZXhwb3J0cy5tbXJXZWJSdGNTdGF0dXNUb0RPTUVycm9yID0gbW1yV2ViUnRjU3RhdHVzVG9ET01FcnJvcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5JY29uU3RhdHVzID0gZXhwb3J0cy5Qcm94eUNvbW1vbiA9IHZvaWQgMDtcbnZhciBQcm94eUNvbW1vbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQcm94eUNvbW1vbigpIHtcbiAgICB9XG4gICAgUHJveHlDb21tb24uUFJPWFlfUkVDRUlWRV9NRVNTQUdFX0VWRU5UID0gXCJNc1JkY01tclByb3h5X01lc3NhZ2VSZWNlaXZlZFwiO1xuICAgIFByb3h5Q29tbW9uLlBST1hZX1NFTkRfTUVTU0FHRV9FVkVOVCA9IFwiTXNSZGNNbXJQcm94eV9TZW5kTWVzc2FnZVwiO1xuICAgIFByb3h5Q29tbW9uLlBST1hZX1NFTkRfTU1SX0VOR0FHRUQgPSBcIk1zUmRjTW1yUHJveHlfTW1yRW5nYWdlTWVzc2FnZVwiO1xuICAgIFByb3h5Q29tbW9uLlBST1hZX1NFTkRfU0FNRV9PUklHSU5fUEFSRU5UX0lEID0gXCJNc1JkY01tclByb3h5X1NhbWVPcmlnaW5QYXJlbnRcIjtcbiAgICBQcm94eUNvbW1vbi5DT05URU5UX0JHX1BST1hZX0NPTk5FQ1RJT05fTkFNRSA9IFwiTXNSZGNNbXJCYWNrZ3JvdW5kQ29tbVwiO1xuICAgIFByb3h5Q29tbW9uLkNPTlRFTlRfQkdfQ0xJRU5UX0NPTk5FQ1RFRF9NRVNTQUdFX1RZUEUgPSBcIk1zUmRjTW1yQmFja2dyb3VuZENsaWVudENvbm5lY3RlZFwiO1xuICAgIFByb3h5Q29tbW9uLkNPTlRFTlRfQkdfTU1SX0FDVElWRV9NRVNTQUdFX1RZUEUgPSBcIk1zUmRjTW1yQWN0aXZlXCI7XG4gICAgUHJveHlDb21tb24uQ09OVEVOVF9CR19TQU1FX09SSUdJTl9QQVJFTlRfTUVTU0FHRV9UWVBFID0gXCJNc1JkY01tclNhbWVPcmlnaW5QYXJlbnRcIjtcbiAgICBQcm94eUNvbW1vbi5DT05URU5UX0JHX1JFQ09OTkVDVF9NRVNTQUdFX1RZUEUgPSBcIk1zUmRjTW1yUmVjb25uZWN0XCI7XG4gICAgUHJveHlDb21tb24uTkFUSVZFX01FU1NBR0lOR19BUFBfTkFNRSA9IFwiY29tLm1pY3Jvc29mdC5tc3JkY21tcm5hdGl2ZWhvc3RcIjtcbiAgICBQcm94eUNvbW1vbi5CR19QUk9YWV9DT05WRVJUX1RBQl9USVRMRV9UT19XSU5ET1cgPSBcIl9fQkdfQ29udmVydFRhYlRpdGxlVG9XaW5kb3dGbGFnX19cIjtcbiAgICBQcm94eUNvbW1vbi5QT1BVUF9CR19QUk9YWV9DT05ORUNUSU9OX05BTUUgPSBcIk1zUmRjTW1yUHJveHlCZ0NvbW1cIjtcbiAgICBQcm94eUNvbW1vbi5CR19IT1NUX1NUQVJUX1RSQUNJTkdfTUVTU0FHRV9UWVBFID0gXCJzdGFydEZ1bGxUcmFjaW5nXCI7XG4gICAgUHJveHlDb21tb24uQkdfSE9TVF9TVE9QX1RSQUNJTkdfTUVTU0FHRV9UWVBFID0gXCJzdG9wRnVsbFRyYWNpbmdcIjtcbiAgICBQcm94eUNvbW1vbi5CR19IT1NUX0ZMVVNIX0xPR1NfTUVTU0FHRV9UWVBFID0gXCJmbHVzaExvZ3NcIjtcbiAgICBQcm94eUNvbW1vbi5CR19IT1NUX0FTU0VSVF9GQUlMVVJFX01FU1NBR0VfVFlQRSA9IFwicmVwb3J0QXNzZXJ0RmFpbHVyZVwiO1xuICAgIFByb3h5Q29tbW9uLkhPU1RfQkdfVFJBQ0lOR19TVEFSVEVEX01FU1NBR0VfVFlQRSA9IFwib25UcmFjaW5nU3RhcnRlZFwiO1xuICAgIFByb3h5Q29tbW9uLkhPU1RfQkdfVFJBQ0lOR19TVE9QUEVEX01FU1NBR0VfVFlQRSA9IFwib25UcmFjaW5nU3RvcHBlZFwiO1xuICAgIFByb3h5Q29tbW9uLkhPU1RfQkdfTE9HU19GTFVTSF9NRVNTQUdFX1RZUEUgPSBcIm9uRmx1c2hMb2dzXCI7XG4gICAgcmV0dXJuIFByb3h5Q29tbW9uO1xufSgpKTtcbmV4cG9ydHMuUHJveHlDb21tb24gPSBQcm94eUNvbW1vbjtcbjtcbnZhciBJY29uU3RhdHVzO1xuKGZ1bmN0aW9uIChJY29uU3RhdHVzKSB7XG4gICAgSWNvblN0YXR1c1tJY29uU3RhdHVzW1wiTm90TG9hZGVkXCJdID0gMF0gPSBcIk5vdExvYWRlZFwiO1xuICAgIEljb25TdGF0dXNbSWNvblN0YXR1c1tcIkxvYWRGYWlsZWRcIl0gPSAxXSA9IFwiTG9hZEZhaWxlZFwiO1xuICAgIEljb25TdGF0dXNbSWNvblN0YXR1c1tcIkxvYWRlZFwiXSA9IDJdID0gXCJMb2FkZWRcIjtcbiAgICBJY29uU3RhdHVzW0ljb25TdGF0dXNbXCJWaWRlb1JlZGlyZWN0aW5nXCJdID0gM10gPSBcIlZpZGVvUmVkaXJlY3RpbmdcIjtcbiAgICBJY29uU3RhdHVzW0ljb25TdGF0dXNbXCJDYWxsUmVkaXJlY3RpbmdcIl0gPSA0XSA9IFwiQ2FsbFJlZGlyZWN0aW5nXCI7XG59KShJY29uU3RhdHVzID0gZXhwb3J0cy5JY29uU3RhdHVzIHx8IChleHBvcnRzLkljb25TdGF0dXMgPSB7fSkpO1xuO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkxvY2FsaXplZFN0cmluZ0hhbmRsZXIgPSB2b2lkIDA7XG52YXIgbG9nZ2luZ0NvbW1vbl8xID0gcmVxdWlyZShcIi4vbG9nZ2luZ0NvbW1vblwiKTtcbnZhciBkZWZhdWx0U3RyaW5nc09iamVjdCA9IG5ldyBPYmplY3QoKTtcbmRlZmF1bHRTdHJpbmdzT2JqZWN0WydkaXNjb25uZWN0ZWRNZXNzYWdlJ10gPSBcIlBsZWFzZSByZWZyZXNoIHBhZ2UgdG8gcmVzdW1lIHZpZGVvIHBsYXliYWNrXCI7XG5kZWZhdWx0U3RyaW5nc09iamVjdFsncmVkaXJlY3RlZE1lc3NhZ2UnXSA9IFwiVmlkZW8gaXMgYmVpbmcgcmVkaXJlY3RlZC4uLlwiO1xuZGVmYXVsdFN0cmluZ3NPYmplY3RbJ3JlZGlyZWN0aW9uRmFpbGVkTWVzc2FnZSddID0gXCJWaWRlbyByZWRpcmVjdGlvbiBmYWlsZWRcIjtcbnZhciBsb2NhbGl6ZWRTdHJpbmdzT2JqZWN0ID0gbmV3IE9iamVjdCgpO1xuT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZGVmYXVsdFN0cmluZ3NPYmplY3QpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkge1xuICAgIGxvY2FsaXplZFN0cmluZ3NPYmplY3RbdmFsXSA9IGRlZmF1bHRTdHJpbmdzT2JqZWN0W3ZhbF07XG59KTtcbnZhciBQUk9YWV9MT0NBTElaRURfU1RSSU5HU19FVkVOVCA9IFwiTXNSZGNNbXJQcm94eV9Mb2NhbGl6ZWRTdHJpbmdzXCI7XG52YXIgTG9jYWxpemVkU3RyaW5nSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb2NhbGl6ZWRTdHJpbmdIYW5kbGVyKCkge1xuICAgIH1cbiAgICAvLyBUaGlzIHNob3VsZCBiZSBjYWxsZWQgZnJvbSB0aGUgY29udGVudCBwYWdlIHRoYXQgaGFzIGFjY2VzcyB0byBjaHJvbWUuaTE4blxuICAgIExvY2FsaXplZFN0cmluZ0hhbmRsZXIuZGlzcGF0Y2hMb2NhbGl6ZWRTdHJpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIkxvY2FsaXplZFN0cmluZ0hhbmRsZXI6OmRpc3BhdGNoTG9jYWxpemVkU3RyaW5nc1wiKTtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgT2JqZWN0KCk7XG4gICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGRlZmF1bHRTdHJpbmdzT2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VbdmFsXSA9IGNocm9tZS5pMThuLmdldE1lc3NhZ2UodmFsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFBST1hZX0xPQ0FMSVpFRF9TVFJJTkdTX0VWRU5ULCB7IGRldGFpbDogbWVzc2FnZSB9KSk7XG4gICAgfTtcbiAgICAvLyBUaGlzIHNob3VsZCBiZSBjYWxsZWQgZnJvbSB0aGUgaW5qZWN0ZWQgamF2YXNjcmlwdCwgdGhhdCBkb2VzIG5vdCBoYXZlIGFjY2VzcyB0byBjaHJvbWUuaTE4blxuICAgIExvY2FsaXplZFN0cmluZ0hhbmRsZXIubGlzdGVuRm9yTG9jYWxpemVkU3RyaW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9MT0coXCJMb2NhbGl6ZWRTdHJpbmdIYW5kbGVyOjpsaXN0ZW5Gb3JMb2NhbGl6ZWRTdHJpbmdzXCIpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFBST1hZX0xPQ0FMSVpFRF9TVFJJTkdTX0VWRU5ULCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBlLmRldGFpbDtcbiAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG1lc3NhZ2UpLmZvckVhY2goZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgIGxvY2FsaXplZFN0cmluZ3NPYmplY3RbdmFsXSA9IG1lc3NhZ2VbdmFsXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIExvY2FsaXplZFN0cmluZ0hhbmRsZXIuZ2V0TG9jYWxpemVkU3RyaW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsaXplZFN0cmluZ3NPYmplY3Q7XG4gICAgfTtcbiAgICByZXR1cm4gTG9jYWxpemVkU3RyaW5nSGFuZGxlcjtcbn0oKSk7XG5leHBvcnRzLkxvY2FsaXplZFN0cmluZ0hhbmRsZXIgPSBMb2NhbGl6ZWRTdHJpbmdIYW5kbGVyO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1tckluamVjdGlvblBhcmFtZXRlckhhbmRsZXIgPSB2b2lkIDA7XG52YXIgbG9nZ2luZ0NvbW1vbl8xID0gcmVxdWlyZShcIi4vbG9nZ2luZ0NvbW1vblwiKTtcbnZhciBJTkpFQ1RFRF9TSElNX0lOUFVUX1BBUkFNRVRFUlNfRUxFTUVOVCA9IFwibW1yLWVuYWJsZWRcIjtcbnZhciBNbXJJbmplY3Rpb25QYXJhbWV0ZXJIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1tckluamVjdGlvblBhcmFtZXRlckhhbmRsZXIoKSB7XG4gICAgfVxuICAgIE1tckluamVjdGlvblBhcmFtZXRlckhhbmRsZXIuc2V0UGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICB2YXIgaW5wdXRQYXJhbWV0ZXJzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoSU5KRUNURURfU0hJTV9JTlBVVF9QQVJBTUVURVJTX0VMRU1FTlQpO1xuICAgICAgICBpbnB1dFBhcmFtZXRlcnNFbGVtZW50LmlubmVyVGV4dCA9XG4gICAgICAgICAgICBwYXJhbXMuZW5hYmxlU2hpbW1pbmcudG9TdHJpbmcoKSArIFwiO1wiICtcbiAgICAgICAgICAgICAgICBwYXJhbXMub2NjbHVzaW9uU3VwcG9ydFZlcnNpb24udG9TdHJpbmcoKSArIFwiO1wiICtcbiAgICAgICAgICAgICAgICBwYXJhbXMuZW5hYmxlUGFzc3Rocm91Z2gudG9TdHJpbmcoKSArIFwiO1wiICtcbiAgICAgICAgICAgICAgICBwYXJhbXMud2VicnRjU3VwcG9ydFZlcnNpb24udG9TdHJpbmcoKSArIFwiO1wiICtcbiAgICAgICAgICAgICAgICBwYXJhbXMubW1yU3VwcG9ydFZlcnNpb24udG9TdHJpbmcoKSArIFwiO1wiICtcbiAgICAgICAgICAgICAgICBwYXJhbXMuY29udGVudFBvcnRJZC50b1N0cmluZygpICsgXCI7XCIgK1xuICAgICAgICAgICAgICAgIHBhcmFtcy5lbmFibGVWaWRlb1N0YXR1c092ZXJsYXkudG9TdHJpbmcoKSArIFwiO1wiICtcbiAgICAgICAgICAgICAgICBwYXJhbXMuZW5hYmxlVmlkZW9PdXRsaW5lcy50b1N0cmluZygpO1xuICAgICAgICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnByZXBlbmQoaW5wdXRQYXJhbWV0ZXJzRWxlbWVudCk7XG4gICAgfTtcbiAgICBNbXJJbmplY3Rpb25QYXJhbWV0ZXJIYW5kbGVyLnJlYWRQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXJhbXMgPSB7IGVuYWJsZVNoaW1taW5nOiBmYWxzZSwgb2NjbHVzaW9uU3VwcG9ydFZlcnNpb246IDAsIGVuYWJsZVBhc3N0aHJvdWdoOiBmYWxzZSwgd2VicnRjU3VwcG9ydFZlcnNpb246IDAsIG1tclN1cHBvcnRWZXJzaW9uOiAwLCBjb250ZW50UG9ydElkOiAtMSwgZW5hYmxlVmlkZW9TdGF0dXNPdmVybGF5OiBmYWxzZSwgZW5hYmxlVmlkZW9PdXRsaW5lczogZmFsc2UgfTtcbiAgICAgICAgdmFyIGlucHV0UGFyYW1ldGVyc0VsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoSU5KRUNURURfU0hJTV9JTlBVVF9QQVJBTUVURVJTX0VMRU1FTlQpO1xuICAgICAgICBpZiAoaW5wdXRQYXJhbWV0ZXJzRWxlbWVudHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfRVJSKFwiTU1SIHJlYWRJbmplY3Rpb25QYXJhbWV0ZXJzOiBpbnB1dCBwYXJhbWV0ZXIgZWxlbWVudCBtaXNzaW5nLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpbnB1dFBhcmFtZXRlclRleHQgPSBpbnB1dFBhcmFtZXRlcnNFbGVtZW50c1swXS5pbm5lclRleHQ7XG4gICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIk1NUiByZWFkSW5qZWN0aW9uUGFyYW1ldGVyczogaW5wdXQgcGFyYW1ldGVyczogXCIgKyBpbnB1dFBhcmFtZXRlclRleHQpO1xuICAgICAgICAgICAgdmFyIGlucHV0UGFyYW1TdHJpbmdzID0gaW5wdXRQYXJhbWV0ZXJUZXh0LnNwbGl0KCc7Jyk7XG4gICAgICAgICAgICBpZiAoaW5wdXRQYXJhbVN0cmluZ3NbMF0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmVuYWJsZVNoaW1taW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlucHV0UGFyYW1TdHJpbmdzWzBdID09PSBcImZhbHNlXCIpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuZW5hYmxlU2hpbW1pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfRVJSKFwiTU1SIHJlYWRJbmplY3Rpb25QYXJhbWV0ZXJzOiB1bmV4cGVjdGVkIGlucHV0IHBhcmFtZXRlciB0ZXh0OiBcIiArIGlucHV0UGFyYW1ldGVyVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJhbXMub2NjbHVzaW9uU3VwcG9ydFZlcnNpb24gPSBwYXJzZUludChpbnB1dFBhcmFtU3RyaW5nc1sxXSk7XG4gICAgICAgICAgICBpZiAoaW5wdXRQYXJhbVN0cmluZ3NbMl0gPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmVuYWJsZVBhc3N0aHJvdWdoID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlucHV0UGFyYW1TdHJpbmdzWzJdID09PSBcImZhbHNlXCIpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuZW5hYmxlUGFzc3Rocm91Z2ggPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfRVJSKFwiTU1SIHJlYWRJbmplY3Rpb25QYXJhbWV0ZXJzOiB1bmV4cGVjdGVkIGlucHV0IHBhcmFtZXRlciB0ZXh0OiBcIiArIGlucHV0UGFyYW1ldGVyVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJhbXMud2VicnRjU3VwcG9ydFZlcnNpb24gPSBwYXJzZUludChpbnB1dFBhcmFtU3RyaW5nc1szXSk7XG4gICAgICAgICAgICBwYXJhbXMubW1yU3VwcG9ydFZlcnNpb24gPSBwYXJzZUludChpbnB1dFBhcmFtU3RyaW5nc1s0XSk7XG4gICAgICAgICAgICBwYXJhbXMuY29udGVudFBvcnRJZCA9IHBhcnNlSW50KGlucHV0UGFyYW1TdHJpbmdzWzVdKTtcbiAgICAgICAgICAgIGlmIChpbnB1dFBhcmFtU3RyaW5nc1s2XSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuZW5hYmxlVmlkZW9TdGF0dXNPdmVybGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlucHV0UGFyYW1TdHJpbmdzWzZdID09PSBcImZhbHNlXCIpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuZW5hYmxlVmlkZW9TdGF0dXNPdmVybGF5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0VSUihcIk1NUiByZWFkSW5qZWN0aW9uUGFyYW1ldGVyczogdW5leHBlY3RlZCBpbnB1dCBwYXJhbWV0ZXIgdGV4dDogXCIgKyBpbnB1dFBhcmFtZXRlclRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlucHV0UGFyYW1TdHJpbmdzWzddID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgICAgIHBhcmFtcy5lbmFibGVWaWRlb091dGxpbmVzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlucHV0UGFyYW1TdHJpbmdzWzddID09PSBcImZhbHNlXCIpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuZW5hYmxlVmlkZW9PdXRsaW5lcyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9FUlIoXCJNTVIgcmVhZEluamVjdGlvblBhcmFtZXRlcnM6IHVuZXhwZWN0ZWQgaW5wdXQgcGFyYW1ldGVyIHRleHQ6IFwiICsgaW5wdXRQYXJhbWV0ZXJUZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH07XG4gICAgcmV0dXJuIE1tckluamVjdGlvblBhcmFtZXRlckhhbmRsZXI7XG59KCkpO1xuZXhwb3J0cy5NbXJJbmplY3Rpb25QYXJhbWV0ZXJIYW5kbGVyID0gTW1ySW5qZWN0aW9uUGFyYW1ldGVySGFuZGxlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkxvb3BiYWNrQ29ubmVjdGlvblBvcnQgPSB2b2lkIDA7XG52YXIgbmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25fMSA9IHJlcXVpcmUoXCIuL25hdGl2ZU1lc3NhZ2luZ1Byb3h5Q29tbW9uXCIpO1xudmFyIG5hdGl2ZU1lc3NhZ2luZ0NvbnRlbnRQcm94eV8xID0gcmVxdWlyZShcIi4vbmF0aXZlTWVzc2FnaW5nQ29udGVudFByb3h5XCIpO1xudmFyIGVsZWN0cm9uTG9nZ2VyXzEgPSByZXF1aXJlKFwiLi9lbGVjdHJvbkxvZ2dlclwiKTtcbnZhciBsb2dnaW5nQ29tbW9uXzEgPSByZXF1aXJlKFwiLi9sb2dnaW5nQ29tbW9uXCIpO1xudmFyIGVsZWN0cm9uXzEgPSByZXF1aXJlKFwiZWxlY3Ryb25cIik7XG4vLyBTdWZmaXggc3RyaW5nIHRoYXQgd2Ugd2lsbCBhZGQgdG8gdGhlIGNoYW5uZWwgbmFtZSB0byBlbnN1cmUgdGhhdCBlYWNoIGJyb3dzZXIgc2VuZHMgbWVzc2FnZXMgdG8gYSB1bnFpcXVlIGNoYW5uZWwuXG52YXIgZ19jaGFubmVsSW5zdGFuY2VJZCA9IFwiXCI7XG52YXIgZ19lbGVjdHJvbkxvZ2dlcjtcbi8vIE91ciB0ZW1wbGF0ZSBjbGFzcyBmb3IgQ2hyb21lIG1lc3NhZ2UgZXZlbnRzXG52YXIgQ2hyb21lRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2hyb21lRXZlbnQoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJMaXN0ID0gbmV3IEFycmF5KCk7XG4gICAgICAgIC8vIFByZXZlbnQgdGhlIG1lbWJlciB2YXJpYWJsZSBcImxpc3RlbmVyTGlzdFwiIGZyb20gYmVpbmcgZW51bWVyYXRlZC4gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZVxuICAgICAgICAvLyBvdGhlcndpc2UgaXQgZW5kcyB1cCBpbiB0aGUgbG9nIG1lc3NhZ2VzIGFuZCB0aGUgbWVzc2FnZSBmYWlscyB0byBiZSBzZW50IHRvIHRoZSBNYWluIHByb2Nlc3MuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbGlzdGVuZXJMaXN0JywgeyBlbnVtZXJhYmxlOiBmYWxzZSB9KTtcbiAgICB9XG4gICAgQ2hyb21lRXZlbnQucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJMaXN0LnB1c2goY2FsbGJhY2spO1xuICAgIH07XG4gICAgQ2hyb21lRXZlbnQucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lckluZGV4ID0gdGhpcy5saXN0ZW5lckxpc3QuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICAgIGlmIChsaXN0ZW5lckluZGV4ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lckxpc3Quc3BsaWNlKGxpc3RlbmVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDaHJvbWVFdmVudC5wcm90b3R5cGUuZ2V0UnVsZXMgPSBmdW5jdGlvbiAocnVsZUlkZW50aWZpZXJzLCBjYWxsYmFjaykge1xuICAgIH07XG4gICAgQ2hyb21lRXZlbnQucHJvdG90eXBlLnJlbW92ZVJ1bGVzID0gZnVuY3Rpb24gKHJ1bGVJZGVudGlmaWVycywgY2FsbGJhY2spIHtcbiAgICB9O1xuICAgIENocm9tZUV2ZW50LnByb3RvdHlwZS5hZGRSdWxlcyA9IGZ1bmN0aW9uIChydWxlcywgY2FsbGJhY2spIHtcbiAgICB9O1xuICAgIENocm9tZUV2ZW50LnByb3RvdHlwZS5oYXNMaXN0ZW5lciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgbGlzdGVuZXJJbmRleCA9IHRoaXMubGlzdGVuZXJMaXN0LmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gKGxpc3RlbmVySW5kZXggIT0gdW5kZWZpbmVkKTtcbiAgICB9O1xuICAgIENocm9tZUV2ZW50LnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5saXN0ZW5lckxpc3QubGVuZ3RoID4gMCk7XG4gICAgfTtcbiAgICByZXR1cm4gQ2hyb21lRXZlbnQ7XG59KCkpO1xuLy8gT3VyIGltcGxlbWVudGF0aW9uIG9mIHRoZSBDaHJvbWUgUG9ydERpc2Nvbm5lY3QgZXZlbnRcbnZhciBQb3J0RGlzY29ubmVjdEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb3J0RGlzY29ubmVjdEV2ZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFBvcnREaXNjb25uZWN0RXZlbnQoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgUG9ydERpc2Nvbm5lY3RFdmVudC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChwb3J0KSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhwb3J0KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9ydERpc2Nvbm5lY3RFdmVudDtcbn0oQ2hyb21lRXZlbnQpKTtcbi8vIE91ciBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQ2hyb21lIFBvcnRNZXNzYWdlIGV2ZW50XG52YXIgUG9ydE1lc3NhZ2VFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9ydE1lc3NhZ2VFdmVudCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQb3J0TWVzc2FnZUV2ZW50KCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFBvcnRNZXNzYWdlRXZlbnQucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiAocG9ydCwgbWVzc2FnZSkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2sobWVzc2FnZSwgcG9ydCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFBvcnRNZXNzYWdlRXZlbnQ7XG59KENocm9tZUV2ZW50KSk7XG4vLyBPdXIgaW1wbGVtZW50YXRpb24gb2YgdGhlIENocm9tZSBjb25uZWN0aW9uIHBvcnRcbnZhciBDb25uZWN0aW9uUG9ydCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb25uZWN0aW9uUG9ydChjb25uZWN0SW5mbykge1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xuICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCA9IG5ldyBQb3J0RGlzY29ubmVjdEV2ZW50O1xuICAgICAgICB0aGlzLm9uTWVzc2FnZSA9IG5ldyBQb3J0TWVzc2FnZUV2ZW50O1xuICAgICAgICBpZiAoY29ubmVjdEluZm8gIT0gdW5kZWZpbmVkICYmIGNvbm5lY3RJbmZvLm5hbWUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBjb25uZWN0SW5mby5uYW1lICsgZ19jaGFubmVsSW5zdGFuY2VJZDtcbiAgICAgICAgfVxuICAgICAgICAvLyBTdGFydCByZWNlaXZpbmcgbWVzc2FnZXMgZnJvbSB0aGUgRWxlY3Ryb24gTWFpbiBwcm9jZXNzIGFuZCBmb3J3YXJkIHRoZW0gdG8gdGhlIGFwcHJvcHJpYXRlIG1lc3NhZ2UgaGFuZGxlci5cbiAgICAgICAgdmFyIHBvcnQgPSB0aGlzO1xuICAgICAgICBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLm9uKHRoaXMubmFtZSwgZnVuY3Rpb24gKGV2ZW50LCBtZXNzYWdlKSB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZVsndHlwZSddID09IFwibXNnXCIpIHtcbiAgICAgICAgICAgICAgICBwb3J0Lm9uTWVzc2FnZS5kaXNwYXRjaEV2ZW50KHBvcnQsIG1lc3NhZ2VbJ3BheWxvYWQnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlWyd0eXBlJ10gPT0gXCJkaXNjb25uZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBwb3J0Lm9uRGlzY29ubmVjdC5kaXNwYXRjaEV2ZW50KHBvcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb25uZWN0aW9uUG9ydCBcIiArIHBvcnQubmFtZSArIFwiIHJlY2VpdmVkIHVua25vd24gbWVzc2FnZSBvZiB0eXBlIFwiICsgbWVzc2FnZVsndHlwZSddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBFbGVjdHJvbiBNYWluIHByb2Nlc3NcbiAgICBDb25uZWN0aW9uUG9ydC5wcm90b3R5cGUucG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZWxlY3Ryb25fMS5pcGNSZW5kZXJlci5zZW5kKHRoaXMubmFtZSwgeyB0eXBlOiBcIm1zZ1wiLCBwYXlsb2FkOiBtZXNzYWdlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBMb2dnaW5nIG1pZ2h0IG5vdCBoYXZlIGJlZW4gc2V0IHVwIHlldCBzbyB3ZSBjYW5ub3QgdXNlIE1NUl9MT0cgaGVyZS5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIHNlbmQgbWVzc2FnZSB0byBNYWluIHByb2Nlc3M6IFwiICsgSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBUZWxsIHRoZSBFbGVjdHJvbiBNYWluIHByb2Nlc3MgdGhhdCB3ZSBhcmUgZ29pbmcgYXdheVxuICAgIENvbm5lY3Rpb25Qb3J0LnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmQodGhpcy5uYW1lLCB7IHR5cGU6IFwiZGlzY29ubmVjdFwiIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIENvbm5lY3Rpb25Qb3J0O1xufSgpKTtcbi8vIEFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBDaHJvbWUgY29ubmVjdGlvbiBwb3J0IHdoZXJlIGFueXRoaW5nIHNlbnQgb24gdGhlIHBvcnQgaXMgaW1tZWRpYXRlbHlcbi8vIGZvcndhcmRlZCB0byBhbnlvbmUgbGlzdGVuaW5nIHRvIHRoZSBwb3J0LlxuLy8gVGhpcyBpcyB1c2VkIGJ5IHRoZSBDb250ZW50IFBhZ2UgTG9nZ2VyIGFuZCBCYWNrZ3JvdW5kIFBhZ2UgTG9nZ2VyIG9iamVjdHMsIHNpbmNlIGluXG4vLyBFbGVjdHJvbiBhcHBzIHRoYXQgYXJlIHJ1bm5pbmcgaW5zaWRlIHRoZSBzYW1lIHByb2Nlc3MuXG52YXIgTG9vcGJhY2tDb25uZWN0aW9uUG9ydCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb29wYmFja0Nvbm5lY3Rpb25Qb3J0KGNvbm5lY3RJbmZvKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiXCI7XG4gICAgICAgIHRoaXMub25EaXNjb25uZWN0ID0gbmV3IFBvcnREaXNjb25uZWN0RXZlbnQ7XG4gICAgICAgIHRoaXMub25NZXNzYWdlID0gbmV3IFBvcnRNZXNzYWdlRXZlbnQ7XG4gICAgICAgIGlmIChjb25uZWN0SW5mbyAhPSB1bmRlZmluZWQgJiYgY29ubmVjdEluZm8ubmFtZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IGNvbm5lY3RJbmZvLm5hbWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgTG9vcGJhY2tDb25uZWN0aW9uUG9ydC5wcm90b3R5cGUucG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB0aGlzLm9uTWVzc2FnZS5kaXNwYXRjaEV2ZW50KHRoaXMsIG1lc3NhZ2UpO1xuICAgIH07XG4gICAgTG9vcGJhY2tDb25uZWN0aW9uUG9ydC5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QuZGlzcGF0Y2hFdmVudCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBMb29wYmFja0Nvbm5lY3Rpb25Qb3J0O1xufSgpKTtcbmV4cG9ydHMuTG9vcGJhY2tDb25uZWN0aW9uUG9ydCA9IExvb3BiYWNrQ29ubmVjdGlvblBvcnQ7XG4vLyBFbGVjdHJvbiBkb2VzIG5vdCBzdXBwb3J0IHRoZSBDaHJvbWUgbG9jIHN1cHBvcnQgb2JqZWN0cy4gV2Ugc3RpbGwgbmVlZCB0byBoYXZlIHRoaXMgY2xhc3MuXG52YXIgTm9PcExvY1N1cHBvcnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTm9PcExvY1N1cHBvcnQoKSB7XG4gICAgfVxuICAgIE5vT3BMb2NTdXBwb3J0LnByb3RvdHlwZS5nZXRBY2NlcHRMYW5ndWFnZXMgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICB9O1xuICAgIE5vT3BMb2NTdXBwb3J0LnByb3RvdHlwZS5nZXRNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2VOYW1lLCBzdWJzdGl0dXRpb25zKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH07XG4gICAgTm9PcExvY1N1cHBvcnQucHJvdG90eXBlLmdldFVJTGFuZ3VhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH07XG4gICAgTm9PcExvY1N1cHBvcnQucHJvdG90eXBlLmRldGVjdExhbmd1YWdlID0gZnVuY3Rpb24gKHRleHQsIGNhbGxiYWNrKSB7XG4gICAgfTtcbiAgICByZXR1cm4gTm9PcExvY1N1cHBvcnQ7XG59KCkpO1xuLy8gQWRkIG91ciBkdW1teSBsb2Mgc3VwcG9ydCBvYmplY3QuXG5jaHJvbWVbJ2kxOG4nXSA9IG5ldyBOb09wTG9jU3VwcG9ydDtcbi8vIFdoZW4gcnVubmluZyBpbnNpZGUgdGhlIEVsZWN0cm9uIHByZWxvYWQgc2NyaXB0LCBjaHJvbWUucnVudGltZSBpcyBub3QgZGVmaW5lZCwgc28gd2UgbmVlZCB0byBkZWZpbmUgaXQgaGVyZS5cbmNocm9tZVsncnVudGltZSddID0gW107XG4vLyBOb3cgYWRkIGEgJ2Nvbm5lY3QnIG1ldGhvZCB0byB0aGUgQ2hyb21lIHJ1bnRpbWVcbmNocm9tZS5ydW50aW1lWydjb25uZWN0J10gPSBmdW5jdGlvbiAocGFyYW0xLCBwYXJhbTIpIHtcbiAgICB2YXIgY29ubmVjdEluZm8gPSB1bmRlZmluZWQ7XG4gICAgaWYgKFwibmFtZVwiIGluIHBhcmFtMSkge1xuICAgICAgICBjb25uZWN0SW5mbyA9IHBhcmFtMTtcbiAgICB9XG4gICAgZWxzZSBpZiAoXCJuYW1lXCIgaW4gcGFyYW0yKSB7XG4gICAgICAgIGNvbm5lY3RJbmZvID0gcGFyYW0yO1xuICAgIH1cbiAgICBpZiAoY29ubmVjdEluZm8gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChjb25uZWN0SW5mby5uYW1lID09IGxvZ2dpbmdDb21tb25fMS5Mb2dnaW5nQ29tbW9uLkxPR0dJTkdfQ09OVEVOVF9CQUNLR1JPVU5EX1BPUlQpIHtcbiAgICAgICAgICAgIHJldHVybiBnX2VsZWN0cm9uTG9nZ2VyLnBvcnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDb25uZWN0aW9uUG9ydChjb25uZWN0SW5mbyk7XG59O1xuLy8gU2VuZCBhIHN5bmNocm9ub3VzIFwiaW5pdFwiIG1lc3NhZ2UgdG8gdGhlIE1haW4gcHJvY2VzcyBvbiBhIHdlbGwta25vd24gY2hhbm5lbCBJRCB0aGF0IGlzIHVzZWQgYnkgYWxsIFJlbmRlcmVyIHByb2Nlc3Nlcy5cbi8vIFRoZSByZXNwb25zZSB0byB0aGUgc3RhcnQgbWVzc2FnZSBpcyB0aGUgY2hhbm5lbCBpbnN0YW5jZSBJRCB0aGF0IHdlIHdpbGwgdXNlIHRvIGNyZWF0ZSBhIHVuaXF1ZSBjaGFubmVsIGZvciBvdXIgcHJvY2Vzcy5cbi8vIFdlIHdpbGwgYmxvY2sgaGVyZSwgYW5kIG5vdCBjcmVhdGUgdGhlIE5hdGl2ZU1lc3NhZ2luZ0NvbnRlbnRQcm94eSB1bnRpbCB3ZSBoYXZlIHJlY2VpdmVkIHRoZSByZXNwb25zZS5cbnZhciByZXN1bHQgPSBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmRTeW5jKG5hdGl2ZU1lc3NhZ2luZ1Byb3h5Q29tbW9uXzEuUHJveHlDb21tb24uQ09OVEVOVF9CR19QUk9YWV9DT05ORUNUSU9OX05BTUUsIHsgdHlwZTogXCJpbml0XCIgfSk7XG4vLyBTYXZlIHRoZSBpbnN0YW5jZSBJRCB0byB1c2UgZm9yIGNoYW5uZWwgbmFtZXMuIFRoaXMgZW5zdXJlcyB0aGF0IGVhY2ggQnJvd3NlcldpbmRvdyB1c2VzIGEgdW5pcXVlIGNoYW5uZWwuXG5nX2NoYW5uZWxJbnN0YW5jZUlkID0gcmVzdWx0O1xuY29uc29sZS5sb2coXCJQcmVsb2FkIHNjcmlwdCB1c2luZyBjaGFubmVsSW5zdGFuY2VJZCA9IFwiICsgZ19jaGFubmVsSW5zdGFuY2VJZCk7XG4vLyBFbmFibGUgbG9nZ2luZyBhbmQgdGhlIE5hdGl2ZSBNZXNzYWdpbmcgQ29udGVudCBQcm94eVxudmFyIGxvZ2dpbmdDaGFubmVsID0gbG9nZ2luZ0NvbW1vbl8xLkxvZ2dpbmdDb21tb24uTE9HR0lOR19DT05URU5UX0JBQ0tHUk9VTkRfUE9SVCArIGdfY2hhbm5lbEluc3RhbmNlSWQ7XG52YXIgbWFpbkNoYW5uZWwgPSBuYXRpdmVNZXNzYWdpbmdQcm94eUNvbW1vbl8xLlByb3h5Q29tbW9uLkNPTlRFTlRfQkdfUFJPWFlfQ09OTkVDVElPTl9OQU1FICsgZ19jaGFubmVsSW5zdGFuY2VJZDtcbmdfZWxlY3Ryb25Mb2dnZXIgPSBuZXcgZWxlY3Ryb25Mb2dnZXJfMS5FbGVjdHJvbkxvZ2dlcihsb2dnaW5nQ2hhbm5lbCwgbWFpbkNoYW5uZWwpO1xuZ19lbGVjdHJvbkxvZ2dlci5zdGFydCgpO1xudmFyIG5hdGl2ZU1lc3NhZ2luZ0NvbnRlbnRQcm94eSA9IG5ldyBuYXRpdmVNZXNzYWdpbmdDb250ZW50UHJveHlfMS5OYXRpdmVNZXNzYWdpbmdDb250ZW50UHJveHkoKTtcbi8vIE5vdyB0aGF0IHRoZSBOYXRpdmVNZXNzYWdpbmdDb250ZW50UHJveHkgaXMgdXAgYW5kIHJ1bm5pbmcgYW5kIGxpc3RlbmluZyBvbiBvdXIgdW5pcXVlIGNoYW5uZWwsXG4vLyBzZW5kIGEgXCJzdGFydFwiIG1lc3NhZ2UgdG8gdGhlIE1haW4gcHJvY2Vzcy4gVGhpcyB0ZWxscyB0aGUgbWFpbiBwcm9jZXNzIHRoYXQgd2UgYXJlIHJlYWR5IHRvIHN0YXJ0XG4vLyByZWNlaXZpbmcgbWVzc2FnZXMuXG5lbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmQobWFpbkNoYW5uZWwsIHsgdHlwZTogXCJtc2dcIiwgcGF5bG9hZDogeyBtZXNzYWdlVHlwZTogXCJzdGFydFwiIH0gfSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJlbGVjdHJvblwiKTsiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTmF0aXZlTWVzc2FnaW5nQ29udGVudFByb3h5ID0gdm9pZCAwO1xudmFyIG5hdGl2ZU1lc3NhZ2luZ1Byb3h5Q29tbW9uXzEgPSByZXF1aXJlKFwiLi9uYXRpdmVNZXNzYWdpbmdQcm94eUNvbW1vblwiKTtcbnZhciBtbXJJbmplY3Rpb25QYXJhbWV0ZXJzXzEgPSByZXF1aXJlKFwiLi9tbXJJbmplY3Rpb25QYXJhbWV0ZXJzXCIpO1xudmFyIGxvY2FsaXplZFN0cmluZ0hhbmRsZXJfMSA9IHJlcXVpcmUoXCIuL2xvY2FsaXplZFN0cmluZ0hhbmRsZXJcIik7XG52YXIgZWxlbWVudFNoaW1Db21tb25fMSA9IHJlcXVpcmUoXCIuL2VsZW1lbnRTaGltQ29tbW9uXCIpO1xudmFyIGxvZ2dpbmdDb21tb25fMSA9IHJlcXVpcmUoXCIuL2xvZ2dpbmdDb21tb25cIik7XG52YXIgTmF0aXZlTWVzc2FnaW5nQ29udGVudFByb3h5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5hdGl2ZU1lc3NhZ2luZ0NvbnRlbnRQcm94eSgpIHtcbiAgICAgICAgdGhpcy5wb3J0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbmplY3RlZE1tck1haW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbGllbnRDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wb3J0ID0gY2hyb21lLnJ1bnRpbWUuY29ubmVjdCh7IG5hbWU6IG5hdGl2ZU1lc3NhZ2luZ1Byb3h5Q29tbW9uXzEuUHJveHlDb21tb24uQ09OVEVOVF9CR19QUk9YWV9DT05ORUNUSU9OX05BTUUgfSk7XG4gICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfTE9HKFwiTmF0aXZlTWVzc2FnaW5nQ29udGVudFByb3h5OiBwb3J0OlwiKTtcbiAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9MT0codGhpcy5wb3J0KTtcbiAgICAgICAgdmFyIHByb3h5ID0gdGhpcztcbiAgICAgICAgdGhpcy5wb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIk1zUmRjTW1yOk5hdGl2ZU1lc3NhZ2luZ0NvbnRlbnRQcm94eTogRGlzY29ubmVjdGVkXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wb3J0Lm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9MT0coXCJNc1JkY01tcjpOYXRpdmVNZXNzYWdpbmdDb250ZW50UHJveHk6IFJlY2VpdmVkOiBcIiArIGVsZW1lbnRTaGltQ29tbW9uXzEudHJ5SnNvblN0cmluZ2lmeShtZXNzYWdlKSk7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZVR5cGUgPSBtZXNzYWdlWydtZXNzYWdlVHlwZSddO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09IG5hdGl2ZU1lc3NhZ2luZ1Byb3h5Q29tbW9uXzEuUHJveHlDb21tb24uQ09OVEVOVF9CR19DTElFTlRfQ09OTkVDVEVEX01FU1NBR0VfVFlQRSkge1xuICAgICAgICAgICAgICAgIHZhciBlbmFibGVkVVJMcyA9IG1lc3NhZ2VbJ2VuYWJsZWRVUkxzJ107XG4gICAgICAgICAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9BU1NFUlQoZW5hYmxlZFVSTHMgIT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFVSTF8xID0gZG9jdW1lbnQuVVJMO1xuICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfTE9HKFwiTU1SOiBSZW1vdGUgY2xpZW50IGNvbm5lY3RlZCwgY2hlY2tpbmcgZW5hYmxlZCBmb3IgVVJMOiBcIiArIGN1cnJlbnRVUkxfMSArIFwiIChlbmFibGVkVVJMczogXCIgKyBlbGVtZW50U2hpbUNvbW1vbl8xLnRyeUpzb25TdHJpbmdpZnkoZW5hYmxlZFVSTHMpICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgIHZhciBzaGltRW5hYmxlZEZvclVSTF8xID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZW5hYmxlZFVSTHMuZm9yRWFjaChmdW5jdGlvbiAobWF0Y2hQYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWdFeHAgPSBuZXcgUmVnRXhwKG1hdGNoUGF0dGVybik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VVJMXzEubWF0Y2gocmVnRXhwKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIlVSTCBtYXRjaGVzIE1NUiBmaWx0ZXI6IFwiICsgbWF0Y2hQYXR0ZXJuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoaW1FbmFibGVkRm9yVVJMXzEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9MT0coXCJVUkwgZG9lc24ndCBtYXRjaCBNTVIgZmlsdGVyOiBcIiArIG1hdGNoUGF0dGVybik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgZW5hYmxlZFdlYlJ0Y1VSTHMgPSBtZXNzYWdlWydlbmFibGVkV2ViUnRjVVJMcyddO1xuICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfQVNTRVJUKGVuYWJsZWRXZWJSdGNVUkxzICE9IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgdmFyIHNoaW1FbmFibGVkRm9yV2ViUnRjVVJMXzEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBlbmFibGVkV2ViUnRjVVJMcy5mb3JFYWNoKGZ1bmN0aW9uIChtYXRjaFBhdHRlcm4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZ0V4cCA9IG5ldyBSZWdFeHAobWF0Y2hQYXR0ZXJuKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRVUkxfMS5tYXRjaChyZWdFeHApICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfTE9HKFwiVVJMIG1hdGNoZXMgV2ViUlRDIGZpbHRlcjogXCIgKyBtYXRjaFBhdHRlcm4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hpbUVuYWJsZWRGb3JXZWJSdGNVUkxfMSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIlVSTCBkb2Vzbid0IG1hdGNoIFdlYlJUQyBmaWx0ZXI6IFwiICsgbWF0Y2hQYXR0ZXJuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHByb3h5LmNsaWVudENvbm5lY3RlZCA9IG1lc3NhZ2VbJ2NsaWVudENvbm5lY3RlZCddO1xuICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfQVNTRVJUKHByb3h5LmNsaWVudENvbm5lY3RlZCAhPSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHZhciBvY2NsdXNpb25TdXBwb3J0VmVyc2lvbiA9IG1lc3NhZ2VbJ29jY2x1c2lvblN1cHBvcnRWZXJzaW9uJ107XG4gICAgICAgICAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9BU1NFUlQob2NjbHVzaW9uU3VwcG9ydFZlcnNpb24gIT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5hYmxlUGFzc3Rocm91Z2ggPSBtZXNzYWdlWydlbmFibGVQYXNzdGhyb3VnaCddO1xuICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfQVNTRVJUKGVuYWJsZVBhc3N0aHJvdWdoICE9IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgdmFyIGVuYWJsZUZvckFsbFNpdGVzID0gbWVzc2FnZVsnZW5hYmxlRm9yQWxsU2l0ZXMnXTtcbiAgICAgICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0FTU0VSVChlbmFibGVGb3JBbGxTaXRlcyAhPSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHZhciBlbmFibGVGb3JBbGxXZWJSdGNTaXRlcyA9IG1lc3NhZ2VbJ2VuYWJsZUZvckFsbFdlYlJ0Y1NpdGVzJ107XG4gICAgICAgICAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9BU1NFUlQoZW5hYmxlRm9yQWxsV2ViUnRjU2l0ZXMgIT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAvLyBFbmFibGUgc2hpbW1pbmcgaWYgdGhlIFVSTCBpcyBhbGxvd2VkIGZvciBhbnkgcmVhc29uXG4gICAgICAgICAgICAgICAgdmFyIGVuYWJsZVNoaW1taW5nID0gZW5hYmxlRm9yQWxsU2l0ZXMgfHwgc2hpbUVuYWJsZWRGb3JVUkxfMSB8fCBzaGltRW5hYmxlZEZvcldlYlJ0Y1VSTF8xIHx8IGVuYWJsZUZvckFsbFdlYlJ0Y1NpdGVzO1xuICAgICAgICAgICAgICAgIHZhciB3ZWJydGNTdXBwb3J0VmVyc2lvbiA9IG1lc3NhZ2VbJ3dlYnJ0Y1N1cHBvcnRWZXJzaW9uJ107XG4gICAgICAgICAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9BU1NFUlQod2VicnRjU3VwcG9ydFZlcnNpb24gIT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB2YXIgbW1yU3VwcG9ydFZlcnNpb24gPSBtZXNzYWdlWydtbXJTdXBwb3J0VmVyc2lvbiddO1xuICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfQVNTRVJUKG1tclN1cHBvcnRWZXJzaW9uICE9IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRlbnRQb3J0SWQgPSBtZXNzYWdlWydjb250ZW50UG9ydElkJ107XG4gICAgICAgICAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9BU1NFUlQoY29udGVudFBvcnRJZCAhPSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHZhciBlbmFibGVWaWRlb1N0YXR1c092ZXJsYXkgPSBtZXNzYWdlWydlbmFibGVWaWRlb1N0YXR1c092ZXJsYXknXTtcbiAgICAgICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0FTU0VSVChlbmFibGVWaWRlb1N0YXR1c092ZXJsYXkgIT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5hYmxlVmlkZW9PdXRsaW5lcyA9IG1lc3NhZ2VbJ2VuYWJsZVZpZGVvT3V0bGluZXMnXTtcbiAgICAgICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0FTU0VSVChlbmFibGVWaWRlb091dGxpbmVzICE9IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIHN1cHBvcnQgdmVyc2lvbiBpZiB0aGUgVVJMIGlzbid0IGVuYWJlbGQgZm9yIHRoYXQgc3BlY2lmaWMgZmVhdHVyZS4gRXNzZW50aWFsbHkgZGlzYWJsaW5nIHNoaW1taW5nIG9mIHRoYXQgZmVhdHVyZS5cbiAgICAgICAgICAgICAgICBpZiAoIWVuYWJsZUZvckFsbFNpdGVzICYmICFzaGltRW5hYmxlZEZvclVSTF8xKSB7XG4gICAgICAgICAgICAgICAgICAgIG1tclN1cHBvcnRWZXJzaW9uID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbmFibGVGb3JBbGxXZWJSdGNTaXRlcyAmJiAhc2hpbUVuYWJsZWRGb3JXZWJSdGNVUkxfMSkge1xuICAgICAgICAgICAgICAgICAgICB3ZWJydGNTdXBwb3J0VmVyc2lvbiA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcm94eS5jbGllbnRDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5qZWN0IG1tcl9tYWluIGludG8gcGFnZSBpZiB3ZSBhcmUgY29ubmVjdGVkIHdpdGggY2xpZW50XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfTE9HKFwiSW5qZWN0aW5nIE1TUkRDIE1NUiBzY3JpcHQgLSB1cmw6IFwiICsgY3VycmVudFVSTF8xICsgXCIgKHNoaW1taW5nIGVuYWJsZWQ6IFwiICsgZW5hYmxlU2hpbW1pbmcgKyBcIilcIik7XG4gICAgICAgICAgICAgICAgICAgIHByb3h5LmluamVjdE1tck1haW4oZW5hYmxlU2hpbW1pbmcsIG9jY2x1c2lvblN1cHBvcnRWZXJzaW9uLCBlbmFibGVQYXNzdGhyb3VnaCwgd2VicnRjU3VwcG9ydFZlcnNpb24sIG1tclN1cHBvcnRWZXJzaW9uLCBjb250ZW50UG9ydElkLCBlbmFibGVWaWRlb1N0YXR1c092ZXJsYXksIGVuYWJsZVZpZGVvT3V0bGluZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZW5hYmxlU2hpbW1pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm94eS5jbGllbnRDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfTE9HKFwiTXNSZGNNbXI6TmF0aXZlTWVzc2FnaW5nQ29udGVudFByb3h5OiBzZW5kaW5nIGNsaWVudCBub3QgY29ubmVjdGVkIGV2ZW50XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHkucG9ydC5wb3N0TWVzc2FnZSh7IFwibWVzc2FnZVR5cGVcIjogbmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25fMS5Qcm94eUNvbW1vbi5DT05URU5UX0JHX01NUl9BQ1RJVkVfTUVTU0FHRV9UWVBFLCBcImNsaWVudENvbm5lY3RlZFwiOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0xPRyhcIk1zUmRjTW1yOk5hdGl2ZU1lc3NhZ2luZ0NvbnRlbnRQcm94eTogc2VuZGluZyBleHRlbnNpb24gbG9hZGVkIGV2ZW50LCBjbGllbnRDb25uZWN0ZWQ9XCIgKyBwcm94eS5jbGllbnRDb25uZWN0ZWQpO1xuICAgICAgICAgICAgICAgICAgICBwcm94eS5wb3J0LnBvc3RNZXNzYWdlKHsgXCJtZXNzYWdlVHlwZVwiOiBuYXRpdmVNZXNzYWdpbmdQcm94eUNvbW1vbl8xLlByb3h5Q29tbW9uLkNPTlRFTlRfQkdfTU1SX0FDVElWRV9NRVNTQUdFX1RZUEUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNsaWVudENvbm5lY3RlZFwiOiBwcm94eS5jbGllbnRDb25uZWN0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1tclN1cHBvcnRWZXJzaW9uXCI6IG1tclN1cHBvcnRWZXJzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3ZWJydGNTdXBwb3J0VmVyc2lvblwiOiB3ZWJydGNTdXBwb3J0VmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY3VycmVudFVSTFwiOiBjdXJyZW50VVJMXzFcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYW5pZmVzdERhdGEgPSBjaHJvbWUucnVudGltZS5nZXRNYW5pZmVzdCgpO1xuICAgICAgICAgICAgICAgICAgICBwcm94eS5wb3J0LnBvc3RNZXNzYWdlKHsgXCJtZXNzYWdlVHlwZVwiOiBcImNvbm5lY3Rpb25UZWxlbWV0cnlJbmZvcm1hdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVGb3JBbGxTaXRlc1NldHRpbmdcIjogZW5hYmxlRm9yQWxsU2l0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlzVXJsU3VwcG9ydGVkXCI6IHNoaW1FbmFibGVkRm9yVVJMXzEsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVuYWJsZUZvckFsbFdlYlJ0Y1NpdGVzU2V0dGluZ1wiOiBlbmFibGVGb3JBbGxXZWJSdGNTaXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaXNXZWJSdGNVcmxTdXBwb3J0ZWRcIjogc2hpbUVuYWJsZWRGb3JXZWJSdGNVUkxfMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYnJvd3NlckV4dGVuc2lvblZlcnNpb25cIjogbWFuaWZlc3REYXRhLnZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRvbWFpblwiOiBkb2N1bWVudC5kb21haW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVzZXJBZ2VudFwiOiBuYXZpZ2F0b3IudXNlckFnZW50XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PSBcIm9uQ29ubmVjdGlvbkV2ZW50XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VbXCJldmVudFwiXSA9PSBcImNsaWVudERpc2Nvbm5lY3RlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm94eS5kaXNjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lc3NhZ2VbXCJldmVudFwiXSA9PSBcImNsaWVudENvbm5lY3RlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJveHkuZGlzY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHkuZGlzY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveHkucG9ydC5wb3N0TWVzc2FnZSh7IFwibWVzc2FnZVR5cGVcIjogbmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25fMS5Qcm94eUNvbW1vbi5DT05URU5UX0JHX1JFQ09OTkVDVF9NRVNTQUdFX1RZUEUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQobmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25fMS5Qcm94eUNvbW1vbi5QUk9YWV9SRUNFSVZFX01FU1NBR0VfRVZFTlQsIHsgZGV0YWlsOiBtZXNzYWdlIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBiYWNrZ3JvdW5kUG9ydCA9IHRoaXMucG9ydDtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihuYXRpdmVNZXNzYWdpbmdQcm94eUNvbW1vbl8xLlByb3h5Q29tbW9uLlBST1hZX1NFTkRfTUVTU0FHRV9FVkVOVCwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfTE9HKFwiTXNSZGNNbXI6TmF0aXZlTWVzc2FnaW5nQ29udGVudFByb3h5OiBTZW5kTWVzc2FnZTogXCIgKyBlbGVtZW50U2hpbUNvbW1vbl8xLnRyeUpzb25TdHJpbmdpZnkoZS5kZXRhaWwpKTtcbiAgICAgICAgICAgIGJhY2tncm91bmRQb3J0LnBvc3RNZXNzYWdlKGUuZGV0YWlsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIobmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25fMS5Qcm94eUNvbW1vbi5QUk9YWV9TRU5EX1NBTUVfT1JJR0lOX1BBUkVOVF9JRCwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnROYXRpdmVQb3J0SWQgPSBlLmRldGFpbC5wYXJlbnROYXRpdmVQb3J0SWQ7XG4gICAgICAgICAgICBsb2dnaW5nQ29tbW9uXzEuTU1SX0FTU0VSVChwYXJlbnROYXRpdmVQb3J0SWQgIT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGxvZ2dpbmdDb21tb25fMS5NTVJfTE9HKFwiTXNSZGNNbXI6TmF0aXZlTWVzc2FnaW5nQ29udGVudFByb3h5OiBzZW5kaW5nIHNhbWUgb3JpZ2luIHBhcmVudCBldmVudCBmb3IgcGFyZW50TmF0aXZlUG9ydElkPVwiICsgcGFyZW50TmF0aXZlUG9ydElkKTtcbiAgICAgICAgICAgIGJhY2tncm91bmRQb3J0LnBvc3RNZXNzYWdlKHsgXCJtZXNzYWdlVHlwZVwiOiBuYXRpdmVNZXNzYWdpbmdQcm94eUNvbW1vbl8xLlByb3h5Q29tbW9uLkNPTlRFTlRfQkdfU0FNRV9PUklHSU5fUEFSRU5UX01FU1NBR0VfVFlQRSwgXCJwYXJlbnROYXRpdmVQb3J0SWRcIjogcGFyZW50TmF0aXZlUG9ydElkIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgTmF0aXZlTWVzc2FnaW5nQ29udGVudFByb3h5LnByb3RvdHlwZS5pbmplY3RNbXJNYWluID0gZnVuY3Rpb24gKGVuYWJsZVNoaW1taW5nLCBvY2NsdXNpb25TdXBwb3J0VmVyc2lvbiwgZW5hYmxlUGFzc3Rocm91Z2gsIHdlYnJ0Y1N1cHBvcnRWZXJzaW9uLCBtbXJTdXBwb3J0VmVyc2lvbiwgY29udGVudFBvcnRJZCwgZW5hYmxlVmlkZW9TdGF0dXNPdmVybGF5LCBlbmFibGVWaWRlb091dGxpbmVzKSB7XG4gICAgICAgIGlmICghdGhpcy5pbmplY3RlZE1tck1haW4pIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlU2hpbW1pbmc6IGVuYWJsZVNoaW1taW5nLFxuICAgICAgICAgICAgICAgIG9jY2x1c2lvblN1cHBvcnRWZXJzaW9uOiBvY2NsdXNpb25TdXBwb3J0VmVyc2lvbixcbiAgICAgICAgICAgICAgICBlbmFibGVQYXNzdGhyb3VnaDogZW5hYmxlUGFzc3Rocm91Z2gsXG4gICAgICAgICAgICAgICAgd2VicnRjU3VwcG9ydFZlcnNpb246IHdlYnJ0Y1N1cHBvcnRWZXJzaW9uLFxuICAgICAgICAgICAgICAgIG1tclN1cHBvcnRWZXJzaW9uOiBtbXJTdXBwb3J0VmVyc2lvbixcbiAgICAgICAgICAgICAgICBjb250ZW50UG9ydElkOiBjb250ZW50UG9ydElkLFxuICAgICAgICAgICAgICAgIGVuYWJsZVZpZGVvU3RhdHVzT3ZlcmxheTogZW5hYmxlVmlkZW9TdGF0dXNPdmVybGF5LFxuICAgICAgICAgICAgICAgIGVuYWJsZVZpZGVvT3V0bGluZXM6IGVuYWJsZVZpZGVvT3V0bGluZXNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBtbXJJbmplY3Rpb25QYXJhbWV0ZXJzXzEuTW1ySW5qZWN0aW9uUGFyYW1ldGVySGFuZGxlci5zZXRQYXJhbXMocGFyYW1zKTtcbiAgICAgICAgICAgIHZhciB0ZXN0RGlyZWN0SW5qZWN0U2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICB0ZXN0RGlyZWN0SW5qZWN0U2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgICAgICAgICAgdGVzdERpcmVjdEluamVjdFNjcmlwdC5pbm5lckhUTUwgPSAnQHJlZiguL21tcl9tYWluLnRzKSc7XG4gICAgICAgICAgICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnByZXBlbmQodGVzdERpcmVjdEluamVjdFNjcmlwdCk7XG4gICAgICAgICAgICB0aGlzLmluamVjdGVkTW1yTWFpbiA9IHRydWU7XG4gICAgICAgICAgICBsb2NhbGl6ZWRTdHJpbmdIYW5kbGVyXzEuTG9jYWxpemVkU3RyaW5nSGFuZGxlci5kaXNwYXRjaExvY2FsaXplZFN0cmluZ3MoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE5hdGl2ZU1lc3NhZ2luZ0NvbnRlbnRQcm94eTtcbn0oKSk7XG5leHBvcnRzLk5hdGl2ZU1lc3NhZ2luZ0NvbnRlbnRQcm94eSA9IE5hdGl2ZU1lc3NhZ2luZ0NvbnRlbnRQcm94eTtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5FbGVjdHJvbkxvZ2dlciA9IHZvaWQgMDtcbnZhciBuYXRpdmVNZXNzYWdpbmdQcm94eUNvbW1vbl8xID0gcmVxdWlyZShcIi4vbmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25cIik7XG52YXIgY29udGVudExvZ2dlcl8xID0gcmVxdWlyZShcIi4vY29udGVudExvZ2dlclwiKTtcbnZhciBiYWNrZ3JvdW5kTG9nZ2VyXzEgPSByZXF1aXJlKFwiLi9iYWNrZ3JvdW5kTG9nZ2VyXCIpO1xudmFyIGxvZ2dpbmdDb21tb25fMSA9IHJlcXVpcmUoXCIuL2xvZ2dpbmdDb21tb25cIik7XG52YXIgZWxlY3Ryb25fMSA9IHJlcXVpcmUoXCJlbGVjdHJvblwiKTtcbnZhciBlbGVjdHJvbl9pbmplY3Rvcl8xID0gcmVxdWlyZShcIi4vZWxlY3Ryb25faW5qZWN0b3JcIik7XG52YXIgRWxlY3Ryb25Mb2dnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRWxlY3Ryb25Mb2dnZXIobG9nZ2luZ0NoYW5uZWwsIG1haW5DaGFubmVsKSB7XG4gICAgICAgIHRoaXMubG9nZ2luZ0NoYW5uZWwgPSBsb2dnaW5nQ2hhbm5lbDtcbiAgICAgICAgdGhpcy5tYWluQ2hhbm5lbCA9IG1haW5DaGFubmVsO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIHBvcnQgb2JqZWN0IHRoYXQgaXMgdXNlZCBieSB0aGUgQ29udGVudCBMb2dnZXIgdG8gc2VuZCBtZXNzYWdlcyB0byB0aGUgQmFja2dyb3VuZCBMb2dnZXIuXG4gICAgICAgIHRoaXMucG9ydCA9IG5ldyBlbGVjdHJvbl9pbmplY3Rvcl8xLkxvb3BiYWNrQ29ubmVjdGlvblBvcnQoeyBuYW1lOiBsb2dnaW5nQ29tbW9uXzEuTG9nZ2luZ0NvbW1vbi5MT0dHSU5HX0NPTlRFTlRfQkFDS0dST1VORF9QT1JUIH0pO1xuICAgIH1cbiAgICBFbGVjdHJvbkxvZ2dlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgQmFja2dyb3VuZCBMb2dnZXIgYW5kIHdpcmUgaXQgdXAgdG8gdGhlIHNwZWNpYWwgbG9vcGJhY2sgcG9ydCBmb3IgbG9nZ2luZyBtZXNzYWdlcy5cbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kTG9nZ2VyID0gbmV3IGJhY2tncm91bmRMb2dnZXJfMS5CYWNrZ3JvdW5kTG9nZ2VyKCk7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZExvZ2dlci5vblBvcnRDb25uZWN0ZWQodGhpcy5wb3J0KTtcbiAgICAgICAgLy8gRW5hYmxlIHRoZSBmb3JlZ3JvdW5kIChjb250ZW50IHBhZ2UpIGxvZ2dpbmcgb2JqZWN0LiBUaGlzIG5lZWRzIHRvIGJlIGRvbmUgYWZ0ZXIgdGhlIEJhY2tncm91bmQgTG9nZ2VyXG4gICAgICAgIC8vIGlzIGFscmVhZHkgdXAgYW5kIHJ1bm5pbmcuXG4gICAgICAgIGNvbnRlbnRMb2dnZXJfMS5SZWdpc3RlckNvbnRlbnRMb2dnZXIoKTtcbiAgICAgICAgLy8gTGlzdGVuIGZvciBtZXNzYWdlcyBzZW5kIGJ5IHRoZSBcIm1tcm5vZGVcIiBvYmplY3QgaW4gdGhlIE1haW4gRWxlY3Ryb24gcHJvY2Vzcy5cbiAgICAgICAgdmFyIGxvZ2dlciA9IHRoaXM7XG4gICAgICAgIGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIub24odGhpcy5sb2dnaW5nQ2hhbm5lbCwgZnVuY3Rpb24gKGV2ZW50LCBtc2cpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWQgbXNnIG9uIGxvZ2dpbmcgY2hhbm5lbDogXCIgKyBKU09OLnN0cmluZ2lmeShtc2cpKTtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlVHlwZSA9IG1zZ1tcIm1lc3NhZ2VUeXBlXCJdO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09IFwic3RhcnRGdWxsVHJhY2VcIikge1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHRoZSBNYWluIEVsZWN0cm9uIHByb2Nlc3MgaXMgYXNraW5nIHVzIHRvIHN0YXJ0IHRyYWNpbmcsIHdlIHRlbGwgdGhlIEJhY2tncm91bmQgTG9nZ2VyLlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBjYXVzZSBpdCB0byBjb2xsZWN0IHRyYWNlcyBmcm9tIG91ciBKYXZhU2NyaXB0IGNvZGUuXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmJhY2tncm91bmRMb2dnZXIuc3RhcnRGdWxsVHJhY2UoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSBhbHNvIHNlbmQgYSBtZXNzYWdlIHRvIHRoZSByZW1vdGUgY2xpZW50LCB2aWEgdGhlIE5hdGl2ZSBIb3N0LiBUaGlzIG1lc3NhZ2UgdGVsbHMgdGhlIGNsaWVudFxuICAgICAgICAgICAgICAgIC8vIHRvIHN0YXJ0IGNvbGxlY3RpbmcgdHJhY2VzLlxuICAgICAgICAgICAgICAgIGVsZWN0cm9uXzEuaXBjUmVuZGVyZXIuc2VuZChsb2dnZXIubWFpbkNoYW5uZWwsIHsgdHlwZTogXCJtc2dcIiwgcGF5bG9hZDogeyBtZXNzYWdlVHlwZTogbmF0aXZlTWVzc2FnaW5nUHJveHlDb21tb25fMS5Qcm94eUNvbW1vbi5CR19IT1NUX1NUQVJUX1RSQUNJTkdfTUVTU0FHRV9UWVBFIH0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlVHlwZSA9PSBcInN0b3BGdWxsVHJhY2VcIikge1xuICAgICAgICAgICAgICAgIC8vIFRlbGwgdGhlIEJhY2tncm91bmQgTG9nZ2VyIHRoYXQgd2UgYXJlIGRvbmUgdHJhY2luZy4gVGhlIGxvZ3MgYXJlIHRoZW4gYXZhaWxhYmxlIGJ5IGNhbGxpbmdcbiAgICAgICAgICAgICAgICAvLyBsb2dnZXIuYmFja2dyb3VuZExvZ2dlci5nZXRMb2dzKCkuIFdlIGNvdWxkIHNhdmUgdGhlIGxvZ3MgdG8gYSBmaWxlLCBidXQgdGhpcyBpcyBub3QgaW1wbGVtZW50ZWQgeWV0LlxuICAgICAgICAgICAgICAgIC8vIFdlIHNob3VsZCByZWZyYWluIGZyb20gc2VuZGluZyB0aGUgbG9nIGRhdGEgdG8gdGhlIE1haW4gcHJvY2VzcyBiZWNhdXNlIHRoYXQgbWF5IHJlcXVpcmUgbG9nIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgLy8gdG8gYmUgc3BsaXQgdXAgaW50byBzbWFsbGVyIGNodW5rcyBhZ2Fpbi5cbiAgICAgICAgICAgICAgICBsb2dnZXIuYmFja2dyb3VuZExvZ2dlci5zdG9wRnVsbFRyYWNlKCk7XG4gICAgICAgICAgICAgICAgLy8gQWxzbyBzZW5kIGEgbWVzc2FnZSB0byB0aGUgcmVtb3RlIGNsaWVudCB0ZWxsaW5nIGl0IHRvIHN0b3AgbG9nZ2luZy4gQWZ0ZXIgdGhpcywgdGhlIE5hdGl2ZSBIb3N0XG4gICAgICAgICAgICAgICAgLy8gd2lsbCBzZW5kIHRoZSBjbGllbnQgYSBmbHVzaExvZ3MgbWVzc2FnZS4gVGhpcyBjYXVzZXMgdGhlIGNsaWVudCB0byBzZW5kIHVzIGFsbCB0aGUgbG9ncyB0aGF0IGl0XG4gICAgICAgICAgICAgICAgLy8gaGFzIGNvbGxlY3RlZCBpbiBhbiBvbkZsdXNoTG9ncyBtZXNzYWdlLiBUaGUgY2xpZW50IGxvZ3MgYXJlIG5vdCBjdXJyZW50bHkgc2F2ZWQgYW55d2hlcmUgYnV0IHRoZXlcbiAgICAgICAgICAgICAgICAvLyB3aWxsIHNob3cgdXAgaW4gdGhlIGRlYnVnZ2VyIGNvbnNvbGUgd2luZG93IGhlcmUsIG9uIHRoZSBob3N0LCBiZWNhdXNlIHdlIGxvZyB0aGUgb25GbHVzaExvZ3MgbWVzc2FnZS5cbiAgICAgICAgICAgICAgICBlbGVjdHJvbl8xLmlwY1JlbmRlcmVyLnNlbmQobG9nZ2VyLm1haW5DaGFubmVsLCB7IHR5cGU6IFwibXNnXCIsIHBheWxvYWQ6IHsgbWVzc2FnZVR5cGU6IG5hdGl2ZU1lc3NhZ2luZ1Byb3h5Q29tbW9uXzEuUHJveHlDb21tb24uQkdfSE9TVF9TVE9QX1RSQUNJTkdfTUVTU0FHRV9UWVBFIH0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEVsZWN0cm9uTG9nZ2VyO1xufSgpKTtcbmV4cG9ydHMuRWxlY3Ryb25Mb2dnZXIgPSBFbGVjdHJvbkxvZ2dlcjtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5SZWdpc3RlckNvbnRlbnRMb2dnZXIgPSB2b2lkIDA7XG52YXIgbG9nZ2luZ0NvbW1vbl8xID0gcmVxdWlyZShcIi4vbG9nZ2luZ0NvbW1vblwiKTtcbnZhciBDb250ZW50TG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbnRlbnRMb2dnZXIoKSB7XG4gICAgICAgIHRoaXMucG9ydCA9IG51bGw7XG4gICAgICAgIHRoaXMuY2FjaGVkTG9ncyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB2YXIgY29udGVudExvZ2dlciA9IHRoaXM7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIobG9nZ2luZ0NvbW1vbl8xLkxvZ2dpbmdDb21tb24uTE9HR0lOR19QQUdFX1RPX0NPTlRFTlRfRVZFTlQsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBjb250ZW50TG9nZ2VyLm9uUmVjZWl2ZWRNZXNzYWdlKGUuZGV0YWlsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucG9ydCA9IGNocm9tZS5ydW50aW1lLmNvbm5lY3Qoe1xuICAgICAgICAgICAgbmFtZTogbG9nZ2luZ0NvbW1vbl8xLkxvZ2dpbmdDb21tb24uTE9HR0lOR19DT05URU5UX0JBQ0tHUk9VTkRfUE9SVFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wb3J0Lm9uRGlzY29ubmVjdC5hZGRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb250ZW50TG9nZ2VyLnBvcnQgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgQ29udGVudExvZ2dlci5wcm90b3R5cGUub25SZWNlaXZlZE1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgbWVzc2FnZVR5cGUgPSBtZXNzYWdlW1widHlwZVwiXTtcbiAgICAgICAgaWYgKG1lc3NhZ2VUeXBlID09IGxvZ2dpbmdDb21tb25fMS5Mb2dnaW5nQ29tbW9uLkFTU0VSVF9GQUlMVVJFX01FU1NBR0VfVFlQRSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kQXNzZXJ0RmFpbHVyZShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXNzYWdlVHlwZSA9PSBsb2dnaW5nQ29tbW9uXzEuTG9nZ2luZ0NvbW1vbi5GTFVTSF9MT0dTX01FU1NBR0VfVFlQRSkge1xuICAgICAgICAgICAgdmFyIGNhY2hlZEVudHJpZXMgPSBtZXNzYWdlW1wiZW50cmllc1wiXTtcbiAgICAgICAgICAgIC8vIFRPRE86IGludGVybGVhdmUgYmFzZWQgb24gdGltZSBzdGFtcHMgaW4gY2FjaGVkIGVudHJpZXMgKHRvIGJlIGFkZGVkKVxuICAgICAgICAgICAgdGhpcy5jYWNoZWRMb2dzID0gdGhpcy5jYWNoZWRMb2dzLmNvbmNhdChjYWNoZWRFbnRyaWVzKTtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hMb2dzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJSZWNlaXZlZCBpbnZhbGlkIG1lc3NhZ2UgdHlwZTogXCIgKyBtZXNzYWdlVHlwZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbnRlbnRMb2dnZXIucHJvdG90eXBlLmZsdXNoTG9ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9ydCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJTa2lwcGluZyBsb2cgZmx1c2ggLSBwb3J0IHRvIGJnIGRpc2Nvbm5lY3RlZFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZW5kIHRvIGJhY2tncm91bmQgc2NyaXB0XG4gICAgICAgIHZhciBtZXNzYWdlID0ge307XG4gICAgICAgIG1lc3NhZ2VbXCJ0eXBlXCJdID0gbG9nZ2luZ0NvbW1vbl8xLkxvZ2dpbmdDb21tb24uRkxVU0hfTE9HU19NRVNTQUdFX1RZUEU7XG4gICAgICAgIG1lc3NhZ2VbXCJlbnRyaWVzXCJdID0gdGhpcy5jYWNoZWRMb2dzO1xuICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuY2FjaGVkTG9ncyA9IG5ldyBBcnJheSgpO1xuICAgIH07XG4gICAgQ29udGVudExvZ2dlci5wcm90b3R5cGUuc2VuZEFzc2VydEZhaWx1cmUgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICBpZiAodGhpcy5wb3J0ID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlNraXBwaW5nIGFzc2VydCBmYWlsdXJlIC0gcG9ydCB0byBiZyBkaXNjb25uZWN0ZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wb3J0LnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIH07XG4gICAgQ29udGVudExvZ2dlci5wcm90b3R5cGUuTG9nID0gZnVuY3Rpb24gKGxvZ1N0cmluZykge1xuICAgICAgICBjb25zb2xlLmxvZyhsb2dTdHJpbmcpO1xuICAgICAgICB0aGlzLmFkZFRvTG9nQ2FjaGUobG9nZ2luZ0NvbW1vbl8xLkNhY2hlZExvZ0VudHJ5VHlwZS5JTkZPLCBsb2dTdHJpbmcpO1xuICAgIH07XG4gICAgQ29udGVudExvZ2dlci5wcm90b3R5cGUuRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3JTdHJpbmcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvclN0cmluZyk7XG4gICAgICAgIHRoaXMuYWRkVG9Mb2dDYWNoZShsb2dnaW5nQ29tbW9uXzEuQ2FjaGVkTG9nRW50cnlUeXBlLkVSUk9SLCBlcnJvclN0cmluZyk7XG4gICAgfTtcbiAgICBDb250ZW50TG9nZ2VyLnByb3RvdHlwZS5XYXJuID0gZnVuY3Rpb24gKHdhcm5pbmdTdHJpbmcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKHdhcm5pbmdTdHJpbmcpO1xuICAgICAgICB0aGlzLmFkZFRvTG9nQ2FjaGUobG9nZ2luZ0NvbW1vbl8xLkNhY2hlZExvZ0VudHJ5VHlwZS5XQVJOSU5HLCB3YXJuaW5nU3RyaW5nKTtcbiAgICB9O1xuICAgIENvbnRlbnRMb2dnZXIucHJvdG90eXBlLkFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24pIHtcbiAgICAgICAgaWYgKCFsb2dnaW5nQ29tbW9uXzEuTG9nZ2luZ0NvbW1vbi5Bc3NlcnQoYXNzZXJ0aW9uKSkge1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBsb2dnaW5nQ29tbW9uXzEuTG9nZ2luZ0NvbW1vbi5HZXRBc3NlcnRMb2coKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZEFzc2VydEZhaWx1cmUobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbnRlbnRMb2dnZXIucHJvdG90eXBlLmFkZFRvTG9nQ2FjaGUgPSBmdW5jdGlvbiAodHlwZSwgbG9nU3RyaW5nKSB7XG4gICAgICAgIHRoaXMuY2FjaGVkTG9ncy5wdXNoKG5ldyBsb2dnaW5nQ29tbW9uXzEuQ2FjaGVkTG9nRW50cnkodHlwZSwgbG9nU3RyaW5nKSk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlZExvZ3MubGVuZ3RoID49IENvbnRlbnRMb2dnZXIuTUFYX0NBQ0hFX0VOVFJJRVMpIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hMb2dzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbnRlbnRMb2dnZXIuTUFYX0NBQ0hFX0VOVFJJRVMgPSAxMDA7XG4gICAgcmV0dXJuIENvbnRlbnRMb2dnZXI7XG59KCkpO1xuZnVuY3Rpb24gUmVnaXN0ZXJDb250ZW50TG9nZ2VyKCkge1xuICAgIGxvZ2dpbmdDb21tb25fMS5Jbml0aWFsaXplTG9nZ2VyKG5ldyBDb250ZW50TG9nZ2VyKCkpO1xufVxuZXhwb3J0cy5SZWdpc3RlckNvbnRlbnRMb2dnZXIgPSBSZWdpc3RlckNvbnRlbnRMb2dnZXI7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQmFja2dyb3VuZExvZ2dlciA9IHZvaWQgMDtcbnZhciBsb2dnaW5nQ29tbW9uXzEgPSByZXF1aXJlKFwiLi9sb2dnaW5nQ29tbW9uXCIpO1xudmFyIEJhY2tncm91bmRMb2dnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmFja2dyb3VuZExvZ2dlcigpIHtcbiAgICAgICAgdGhpcy5wb3J0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYWNoZWRMb2dzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMuY2lyY3VsYXJUcmFjZU1vZGUgPSB0cnVlO1xuICAgIH1cbiAgICBCYWNrZ3JvdW5kTG9nZ2VyLnByb3RvdHlwZS5vblBvcnRDb25uZWN0ZWQgPSBmdW5jdGlvbiAocG9ydCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkJhY2tncm91bmRMb2dnZXI6Om9uUG9ydENvbm5lY3RlZFwiKTtcbiAgICAgICAgdGhpcy5wb3J0ID0gcG9ydDtcbiAgICAgICAgdmFyIGxvZ2dlciA9IHRoaXM7XG4gICAgICAgIHBvcnQub25NZXNzYWdlLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgICAgIGxvZ2dlci5vblJlY2VpdmVkTWVzc2FnZShtc2cpO1xuICAgICAgICB9KTtcbiAgICAgICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJCYWNrZ3JvdW5kTG9nZ2VyIC0gcG9ydCBkaXNjb25uZWN0ZWRcIik7XG4gICAgICAgICAgICBsb2dnZXIucG9ydCA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQmFja2dyb3VuZExvZ2dlci5wcm90b3R5cGUuc3RhcnRGdWxsVHJhY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFBydW5lIGVudHJpZXMgYmVmb3JlIHN0YXJ0aW5nIGZ1bGwgdHJhY2luZ1xuICAgICAgICB0aGlzLnBydW5lTG9ncygpO1xuICAgICAgICB0aGlzLmNpcmN1bGFyVHJhY2VNb2RlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2FjaGVkTG9ncy5wdXNoKG5ldyBsb2dnaW5nQ29tbW9uXzEuQ2FjaGVkTG9nRW50cnkobG9nZ2luZ0NvbW1vbl8xLkNhY2hlZExvZ0VudHJ5VHlwZS5JTkZPLCBcIjxTdGFydCBmdWxsIHRyYWNlPlwiKSk7XG4gICAgfTtcbiAgICBCYWNrZ3JvdW5kTG9nZ2VyLnByb3RvdHlwZS5zdG9wRnVsbFRyYWNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNpcmN1bGFyVHJhY2VNb2RlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jYWNoZWRMb2dzLnB1c2gobmV3IGxvZ2dpbmdDb21tb25fMS5DYWNoZWRMb2dFbnRyeShsb2dnaW5nQ29tbW9uXzEuQ2FjaGVkTG9nRW50cnlUeXBlLklORk8sIFwiPFN0b3AgZnVsbCB0cmFjZT5cIikpO1xuICAgIH07XG4gICAgQmFja2dyb3VuZExvZ2dlci5wcm90b3R5cGUub25SZWNlaXZlZE1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgIHZhciBtZXNzYWdlVHlwZSA9IG1zZ1tcInR5cGVcIl07XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQmFja2dyb3VuZExvZ2dlcjo6b25SZWNlaXZlZE1lc3NhZ2UgLSBtZXNzYWdlVHlwZTogXCIgKyBtZXNzYWdlVHlwZSk7XG4gICAgICAgIGlmIChtZXNzYWdlVHlwZSA9PSBsb2dnaW5nQ29tbW9uXzEuTG9nZ2luZ0NvbW1vbi5BU1NFUlRfRkFJTFVSRV9NRVNTQUdFX1RZUEUpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEFzc2VydEZhaWx1cmUobXNnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXNzYWdlVHlwZSA9PSBsb2dnaW5nQ29tbW9uXzEuTG9nZ2luZ0NvbW1vbi5GTFVTSF9MT0dTX01FU1NBR0VfVFlQRSkge1xuICAgICAgICAgICAgdmFyIGxvZ0VudHJpZXMgPSBtc2dbXCJlbnRyaWVzXCJdO1xuICAgICAgICAgICAgbG9nZ2luZ0NvbW1vbl8xLk1NUl9BU1NFUlQobG9nRW50cmllcyAhPSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZWRMb2dzID0gdGhpcy5jYWNoZWRMb2dzLmNvbmNhdChsb2dFbnRyaWVzKTtcbiAgICAgICAgICAgIHRoaXMucHJ1bmVMb2dzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJSZWNlaXZlZCBpbnZhbGlkIG1lc3NhZ2UgdHlwZTogXCIgKyBtZXNzYWdlVHlwZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJhY2tncm91bmRMb2dnZXIucHJvdG90eXBlLnBydW5lTG9ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gT25seSBwcnVuZSBlbnRyaWVzIHdoZW4gaW4gY2lyY3VsYXIgdHJhY2UgbW9kZVxuICAgICAgICBpZiAodGhpcy5jaXJjdWxhclRyYWNlTW9kZSkge1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMuY2FjaGVkTG9ncy5sZW5ndGggPiBCYWNrZ3JvdW5kTG9nZ2VyLkNJUkNVTEFSX1RSQUNFX01BWF9FTlRSSUVTKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZWRMb2dzLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEJhY2tncm91bmRMb2dnZXIucHJvdG90eXBlLmdldExvZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlZExvZ3M7XG4gICAgfTtcbiAgICBCYWNrZ3JvdW5kTG9nZ2VyLnByb3RvdHlwZS5zZW5kQXNzZXJ0RmFpbHVyZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlW1widHlwZVwiXSA9PSBsb2dnaW5nQ29tbW9uXzEuTG9nZ2luZ0NvbW1vbi5BU1NFUlRfRkFJTFVSRV9NRVNTQUdFX1RZUEUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYmFja2dyb3VuZExvZ2dlcjogc2VuZEFzc2VydEZhaWx1cmU6IFwiICsgbWVzc2FnZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChsb2dnaW5nQ29tbW9uXzEuTG9nZ2luZ0NvbW1vbi5BU1NFUlRfRkFJTFVSRV9CQUNLR1JPVU5EX1BPUlQsIHsgZGV0YWlsOiBtZXNzYWdlIH0pKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFja2dyb3VuZExvZ2dlci5wcm90b3R5cGUuTG9nID0gZnVuY3Rpb24gKGxvZ1N0cmluZykge1xuICAgICAgICBjb25zb2xlLmxvZyhsb2dTdHJpbmcpO1xuICAgIH07XG4gICAgQmFja2dyb3VuZExvZ2dlci5wcm90b3R5cGUuRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3JTdHJpbmcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvclN0cmluZyk7XG4gICAgfTtcbiAgICBCYWNrZ3JvdW5kTG9nZ2VyLnByb3RvdHlwZS5XYXJuID0gZnVuY3Rpb24gKHdhcm5pbmdTdHJpbmcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKHdhcm5pbmdTdHJpbmcpO1xuICAgIH07XG4gICAgQmFja2dyb3VuZExvZ2dlci5wcm90b3R5cGUuQXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbikge1xuICAgICAgICBpZiAoIWxvZ2dpbmdDb21tb25fMS5Mb2dnaW5nQ29tbW9uLkFzc2VydChhc3NlcnRpb24pKSB7XG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGxvZ2dpbmdDb21tb25fMS5Mb2dnaW5nQ29tbW9uLkdldEFzc2VydExvZygpO1xuICAgICAgICAgICAgdGhpcy5zZW5kQXNzZXJ0RmFpbHVyZShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQmFja2dyb3VuZExvZ2dlci5DSVJDVUxBUl9UUkFDRV9NQVhfRU5UUklFUyA9IDUwMDA7XG4gICAgcmV0dXJuIEJhY2tncm91bmRMb2dnZXI7XG59KCkpO1xuZXhwb3J0cy5CYWNrZ3JvdW5kTG9nZ2VyID0gQmFja2dyb3VuZExvZ2dlcjtcbiJdLCJzb3VyY2VSb290IjoiIn0=